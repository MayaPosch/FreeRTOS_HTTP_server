ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"httpd.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.httpd_init_pcb.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/apps/http/httpd.c\000"
  20      6C657761 
  20      7265732F 
  20      54686972 
  20      645F5061 
  21 0033 00       		.align	2
  22              	.LC1:
  23 0034 68747470 		.ascii	"httpd_init: tcp_bind failed\000"
  23      645F696E 
  23      69743A20 
  23      7463705F 
  23      62696E64 
  24              		.align	2
  25              	.LC2:
  26 0050 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
  26      7274696F 
  26      6E202225 
  26      73222066 
  26      61696C65 
  27              		.align	2
  28              	.LC3:
  29 0078 68747470 		.ascii	"httpd_init: tcp_listen failed\000"
  29      645F696E 
  29      69743A20 
  29      7463705F 
  29      6C697374 
  30              		.section	.text.httpd_init_pcb,"ax",%progbits
  31              		.align	1
  32              		.arch armv7e-m
  33              		.syntax unified
  34              		.thumb
  35              		.thumb_func
  36              		.fpu fpv5-sp-d16
  38              	httpd_init_pcb:
  39              	.LVL0:
  40              	.LFB45:
  41              		.file 1 "Middlewares/Third_Party/LwIP/src/apps/http/httpd.c"
   1:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 2


   2:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * LWIP HTTP server implementation
   4:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
   5:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
   6:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /*
   7:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Copyright (c) 2001-2003 Swedish Institute of Computer Science.
   8:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * All rights reserved.
   9:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  10:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Redistribution and use in source and binary forms, with or without modification,
  11:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * are permitted provided that the following conditions are met:
  12:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  13:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  14:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *    this list of conditions and the following disclaimer.
  15:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  16:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *    this list of conditions and the following disclaimer in the documentation
  17:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *    and/or other materials provided with the distribution.
  18:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * 3. The name of the author may not be used to endorse or promote products
  19:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *    derived from this software without specific prior written permission.
  20:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  21:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  22:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  23:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  24:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  25:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  26:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  27:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  28:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  29:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  30:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * OF SUCH DAMAGE.
  31:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  32:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * This file is part of the lwIP TCP/IP stack.
  33:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  34:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Author: Adam Dunkels <adam@sics.se>
  35:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         Simon Goldschmidt
  36:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  37:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
  38:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
  39:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
  40:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @defgroup httpd HTTP server
  41:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @ingroup apps
  42:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  43:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * This httpd supports for a
  44:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * rudimentary server-side-include facility which will replace tags of the form
  45:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * <!--#tag--> in any file whose extension is .shtml, .shtm or .ssi with
  46:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * strings provided by an include handler whose pointer is provided to the
  47:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * module via function http_set_ssi_handler().
  48:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Additionally, a simple common
  49:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * gateway interface (CGI) handling mechanism has been added to allow clients
  50:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * to hook functions to particular request URIs.
  51:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  52:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * To enable SSI support, define label LWIP_HTTPD_SSI in lwipopts.h.
  53:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * To enable CGI support, define label LWIP_HTTPD_CGI in lwipopts.h.
  54:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  55:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * By default, the server assumes that HTTP headers are already present in
  56:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * each file stored in the file system.  By defining LWIP_HTTPD_DYNAMIC_HEADERS in
  57:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * lwipopts.h, this behavior can be changed such that the server inserts the
  58:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * headers automatically based on the extension of the file being served.  If
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 3


  59:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * this mode is used, be careful to ensure that the file system image used
  60:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * does not already contain the header information.
  61:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  62:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * File system images without headers can be created using the makefsfile
  63:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * tool with the -h command line option.
  64:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  65:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  66:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Notes about valid SSI tags
  67:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * --------------------------
  68:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  69:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The following assumptions are made about tags used in SSI markers:
  70:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  71:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * 1. No tag may contain '-' or whitespace characters within the tag name.
  72:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * 2. Whitespace is allowed between the tag leadin "<!--#" and the start of
  73:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *    the tag name and between the tag name and the leadout string "-->".
  74:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * 3. The maximum tag name length is LWIP_HTTPD_MAX_TAG_NAME_LEN, currently 8 characters.
  75:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  76:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Notes on CGI usage
  77:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * ------------------
  78:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  79:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The simple CGI support offered here works with GET method requests only
  80:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * and can handle up to 16 parameters encoded into the URI. The handler
  81:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * function may not write directly to the HTTP output but must return a
  82:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * filename that the HTTP server will send to the browser as a response to
  83:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * the incoming CGI request.
  84:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  85:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  86:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
  87:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The list of supported file types is quite short, so if makefsdata complains
  88:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * about an unknown extension, make sure to add it (and its doctype) to
  89:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * the 'g_psHTTPHeaders' list.
  90:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
  91:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/init.h"
  92:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/apps/httpd.h"
  93:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/debug.h"
  94:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/stats.h"
  95:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/apps/fs.h"
  96:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "httpd_structs.h"
  97:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/def.h"
  98:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
  99:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/altcp.h"
 100:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/altcp_tcp.h"
 101:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if HTTPD_ENABLE_HTTPS
 102:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/altcp_tls.h"
 103:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 104:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #ifdef LWIP_HOOK_FILENAME
 105:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include LWIP_HOOK_FILENAME
 106:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 107:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
 108:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include "lwip/sys.h"
 109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_TIMING */
 110:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 111:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include <string.h> /* memset */
 112:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include <stdlib.h> /* atoi */
 113:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #include <stdio.h>
 114:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 115:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_TCP && LWIP_CALLBACK_API
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 4


 116:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 117:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Minimum length for a valid HTTP/0.9 request: "GET /\r\n" -> 7 bytes */
 118:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define MIN_REQ_LEN   7
 119:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 120:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define CRLF "\r\n"
 121:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
 122:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP11_CONNECTIONKEEPALIVE  "Connection: keep-alive"
 123:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP11_CONNECTIONKEEPALIVE2 "Connection: Keep-Alive"
 124:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 125:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 126:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_FILE_READ
 127:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_IS_DYNAMIC_FILE(hs) ((hs)->buf != NULL)
 128:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else
 129:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_IS_DYNAMIC_FILE(hs) 0
 130:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 131:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 132:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* This defines checks whether tcp_write has to copy data or not */
 133:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 134:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #ifndef HTTP_IS_DATA_VOLATILE
 135:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** tcp_write does not have to copy data when sent from rom-file-system directly */
 136:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_IS_DATA_VOLATILE(hs)       (HTTP_IS_DYNAMIC_FILE(hs) ? TCP_WRITE_FLAG_COPY : 0)
 137:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 138:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Default: dynamic headers are sent from ROM (non-dynamic headers are handled like file data) */
 139:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #ifndef HTTP_IS_HDR_VOLATILE
 140:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_IS_HDR_VOLATILE(hs, ptr)   0
 141:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 142:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 143:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* Return values for http_send_*() */
 144:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_DATA_TO_SEND_FREED    3
 145:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_DATA_TO_SEND_BREAK    2
 146:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_DATA_TO_SEND_CONTINUE 1
 147:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_NO_DATA_TO_SEND       0
 148:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 149:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** typedef struct {
 150:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *name;
 151:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t shtml;
 152:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** } default_filename;
 153:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 154:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static const default_filename httpd_default_filenames[] = {
 155:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {"/index.shtml", 1 },
 156:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {"/index.ssi",   1 },
 157:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {"/index.shtm",  1 },
 158:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {"/index.html",  0 },
 159:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {"/index.htm",   0 }
 160:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** };
 161:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 162:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define NUM_DEFAULT_FILENAMES LWIP_ARRAYSIZE(httpd_default_filenames)
 163:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 164:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
 165:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** HTTP request is copied here from pbufs for simple parsing */
 166:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static char httpd_req_buf[LWIP_HTTPD_MAX_REQ_LENGTH + 1];
 167:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
 168:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 169:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 170:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_POST_MAX_RESPONSE_URI_LEN > LWIP_HTTPD_MAX_REQUEST_URI_LEN
 171:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define LWIP_HTTPD_URI_BUF_LEN LWIP_HTTPD_POST_MAX_RESPONSE_URI_LEN
 172:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 5


 173:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 174:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #ifndef LWIP_HTTPD_URI_BUF_LEN
 175:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define LWIP_HTTPD_URI_BUF_LEN LWIP_HTTPD_MAX_REQUEST_URI_LEN
 176:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 177:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_URI_BUF_LEN
 178:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* Filename for response file to send when POST is finished or
 179:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * search for default files when a directory is requested. */
 180:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static char http_uri_buf[LWIP_HTTPD_URI_BUF_LEN + 1];
 181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 182:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 183:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_HEADERS
 184:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* The number of individual strings that comprise the headers sent before each
 185:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * requested file.
 186:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 187:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define NUM_FILE_HDR_STRINGS 5
 188:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HDR_STRINGS_IDX_HTTP_STATUS           0 /* e.g. "HTTP/1.0 200 OK\r\n" */
 189:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HDR_STRINGS_IDX_SERVER_NAME           1 /* e.g. "Server: "HTTPD_SERVER_AGENT"\r\n" */
 190:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HDR_STRINGS_IDX_CONTENT_LEN_KEEPALIVE 2 /* e.g. "Content-Length: xy\r\n" and/or "Connection
 191:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HDR_STRINGS_IDX_CONTENT_LEN_NR        3 /* the byte count, when content-length is used */
 192:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HDR_STRINGS_IDX_CONTENT_TYPE          4 /* the content type (or default answer content type
 193:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* The dynamically generated Content-Length buffer needs space for CRLF + NULL */
 195:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define LWIP_HTTPD_MAX_CONTENT_LEN_OFFSET 3
 196:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #ifndef LWIP_HTTPD_MAX_CONTENT_LEN_SIZE
 197:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* The dynamically generated Content-Length buffer shall be able to work with
 198:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    ~953 MB (9 digits) */
 199:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define LWIP_HTTPD_MAX_CONTENT_LEN_SIZE   (9 + LWIP_HTTPD_MAX_CONTENT_LEN_OFFSET)
 200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 201:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_HEADERS */
 202:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 203:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 204:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 205:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTPD_LAST_TAG_PART 0xFFFF
 206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 207:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** enum tag_check_state {
 208:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   TAG_NONE,       /* Not processing an SSI tag */
 209:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   TAG_LEADIN,     /* Tag lead in "<!--#" being processed */
 210:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   TAG_FOUND,      /* Tag name being read, looking for lead-out start */
 211:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   TAG_LEADOUT,    /* Tag lead out "-->" being processed */
 212:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   TAG_SENDING     /* Sending tag replacement string */
 213:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** };
 214:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 215:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** struct http_ssi_state {
 216:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *parsed;     /* Pointer to the first unparsed byte in buf. */
 217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SSI_INCLUDE_TAG
 218:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *tag_started;/* Pointer to the first opening '<' of the tag. */
 219:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI_INCLUDE_TAG */
 220:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *tag_end;    /* Pointer to char after the closing '>' of the tag. */
 221:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u32_t parse_left; /* Number of unparsed bytes in buf. */
 222:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t tag_index;   /* Counter used by tag parsing state machine */
 223:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t tag_insert_len; /* Length of insert in string tag_insert */
 224:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_MULTIPART
 225:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t tag_part; /* Counter passed to and changed by tag insertion function to insert multiple tim
 226:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_MULTIPART */
 227:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t tag_type; /* index into http_ssi_tag_desc array */
 228:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t tag_name_len; /* Length of the tag name in string tag_name */
 229:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char tag_name[LWIP_HTTPD_MAX_TAG_NAME_LEN + 1]; /* Last tag name extracted */
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 6


 230:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char tag_insert[LWIP_HTTPD_MAX_TAG_INSERT_LEN + 1]; /* Insert string for tag_name */
 231:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   enum tag_check_state tag_state; /* State of the tag processor */
 232:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** };
 233:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 234:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** struct http_ssi_tag_description {
 235:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *lead_in;
 236:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *lead_out; 
 237:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** };
 238:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 239:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 240:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 241:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** struct http_state {
 242:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED
 243:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *next;
 244:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED */
 245:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct fs_file file_handle;
 246:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct fs_file *handle;
 247:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *file;       /* Pointer to first unsent byte in buf. */
 248:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 249:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct altcp_pcb *pcb;
 250:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
 251:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct pbuf *req;
 252:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
 253:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 254:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_FILE_READ
 255:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *buf;        /* File read buffer. */
 256:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int buf_len;      /* Size of file read buffer, buf. */
 257:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_FILE_READ */
 258:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u32_t left;       /* Number of unsent bytes in buf. */
 259:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t retries;
 260:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
 261:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t keepalive;
 262:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_11_KEEPALIVE */
 263:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 264:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_ssi_state *ssi;
 265:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 266:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI
 267:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *params[LWIP_HTTPD_MAX_CGI_PARAMETERS]; /* Params extracted from the request URI */
 268:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *param_vals[LWIP_HTTPD_MAX_CGI_PARAMETERS]; /* Values for each extracted param */
 269:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_CGI */
 270:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_HEADERS
 271:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *hdrs[NUM_FILE_HDR_STRINGS]; /* HTTP headers to be sent. */
 272:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char hdr_content_len[LWIP_HTTPD_MAX_CONTENT_LEN_SIZE];
 273:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t hdr_pos;     /* The position of the first unsent header byte in the
 274:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                         current string */
 275:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t hdr_index;   /* The index of the hdr string currently being sent. */
 276:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_HEADERS */
 277:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
 278:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u32_t time_started;
 279:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_TIMING */
 280:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 281:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u32_t post_content_len_left;
 282:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_POST_MANUAL_WND
 283:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u32_t unrecved_bytes;
 284:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t no_auto_wnd;
 285:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t post_finished;
 286:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_POST_MANUAL_WND */
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 7


 287:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST*/
 288:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** };
 289:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 290:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if HTTPD_USE_MEM_POOL
 291:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** LWIP_MEMPOOL_DECLARE(HTTPD_STATE,     MEMP_NUM_PARALLEL_HTTPD_CONNS,     sizeof(struct http_state),
 292:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 293:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** LWIP_MEMPOOL_DECLARE(HTTPD_SSI_STATE, MEMP_NUM_PARALLEL_HTTPD_SSI_CONNS, sizeof(struct http_ssi_sta
 294:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_FREE_SSI_STATE(x)  LWIP_MEMPOOL_FREE(HTTPD_SSI_STATE, (x))
 295:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_ALLOC_SSI_STATE()  (struct http_ssi_state *)LWIP_MEMPOOL_ALLOC(HTTPD_SSI_STATE)
 296:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 297:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_ALLOC_HTTP_STATE() (struct http_state *)LWIP_MEMPOOL_ALLOC(HTTPD_STATE)
 298:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_FREE_HTTP_STATE(x) LWIP_MEMPOOL_FREE(HTTPD_STATE, (x))
 299:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* HTTPD_USE_MEM_POOL */
 300:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_ALLOC_HTTP_STATE() (struct http_state *)mem_malloc(sizeof(struct http_state))
 301:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_FREE_HTTP_STATE(x) mem_free(x)
 302:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 303:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_ALLOC_SSI_STATE()  (struct http_ssi_state *)mem_malloc(sizeof(struct http_ssi_state))
 304:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_FREE_SSI_STATE(x)  mem_free(x)
 305:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 306:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* HTTPD_USE_MEM_POOL */
 307:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 308:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t http_close_conn(struct altcp_pcb *pcb, struct http_state *hs);
 309:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t http_close_or_abort_conn(struct altcp_pcb *pcb, struct http_state *hs, u8_t abort_conn
 310:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t http_find_file(struct http_state *hs, const char *uri, int is_09);
 311:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t http_init_file(struct http_state *hs, struct fs_file *file, int is_09, const char *uri
 312:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t http_poll(void *arg, struct altcp_pcb *pcb);
 313:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static u8_t http_check_eof(struct altcp_pcb *pcb, struct http_state *hs);
 314:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_FS_ASYNC_READ
 315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void http_continue(void *connection);
 316:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_FS_ASYNC_READ */
 317:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 318:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 319:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* SSI insert handler function pointer. */
 320:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static tSSIHandler httpd_ssi_handler;
 321:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SSI_RAW
 322:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static int httpd_num_tags;
 323:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static const char **httpd_tags;
 324:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI_RAW */
 325:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 326:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* Define the available tag lead-ins and corresponding lead-outs.
 327:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * ATTENTION: for the algorithm below using this array, it is essential
 328:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * that the lead in differs in the first character! */
 329:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** const struct http_ssi_tag_description http_ssi_tag_desc[] = {
 330:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {"<!--#", "-->"},
 331:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {"/*#", "*/"}
 332:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** };
 333:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 334:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 335:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 336:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI
 337:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* CGI handler information */
 338:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static const tCGI *httpd_cgis;
 339:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static int httpd_num_cgis;
 340:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static int http_cgi_paramcount;
 341:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define http_cgi_params     hs->params
 342:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define http_cgi_param_vals hs->param_vals
 343:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #elif LWIP_HTTPD_CGI_SSI
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 8


 344:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static char *http_cgi_params[LWIP_HTTPD_MAX_CGI_PARAMETERS]; /* Params extracted from the request U
 345:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static char *http_cgi_param_vals[LWIP_HTTPD_MAX_CGI_PARAMETERS]; /* Values for each extracted param
 346:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_CGI */
 347:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 348:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED
 349:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** global list of active HTTP connections, use to kill the oldest when
 350:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     running out of memory */
 351:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static struct http_state *http_connections;
 352:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 353:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 354:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_add_connection(struct http_state *hs)
 355:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* add the connection to the list */
 357:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->next = http_connections;
 358:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   http_connections = hs;
 359:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 360:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 361:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 362:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_remove_connection(struct http_state *hs)
 363:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 364:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* take the connection off the list */
 365:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (http_connections) {
 366:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (http_connections == hs) {
 367:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_connections = hs->next;
 368:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else {
 369:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       struct http_state *last;
 370:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       for (last = http_connections; last->next != NULL; last = last->next) {
 371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (last->next == hs) {
 372:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           last->next = hs->next;
 373:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           break;
 374:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
 375:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 376:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 377:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 378:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 379:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 380:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 381:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_kill_oldest_connection(u8_t ssi_required)
 382:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 383:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = http_connections;
 384:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs_free_next = NULL;
 385:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   while (hs && hs->next) {
 386:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 387:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (ssi_required) {
 388:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (hs->next->ssi != NULL) {
 389:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs_free_next = hs;
 390:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 391:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else
 392:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SSI */
 393:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(ssi_required);
 394:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 395:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     {
 396:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs_free_next = hs;
 397:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 398:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("broken list", hs != hs->next);
 399:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs = hs->next;
 400:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 9


 401:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs_free_next != NULL) {
 402:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("hs_free_next->next != NULL", hs_free_next->next != NULL);
 403:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("hs_free_next->next->pcb != NULL", hs_free_next->next->pcb != NULL);
 404:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* send RST when killing a connection because of memory shortage */
 405:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_close_or_abort_conn(hs_free_next->next->pcb, hs_free_next->next, 1); /* this also unlinks 
 406:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 407:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 408:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED */
 409:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 410:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define http_add_connection(hs)
 411:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define http_remove_connection(hs)
 412:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 413:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED */
 414:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 415:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 416:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Allocate as struct http_ssi_state. */
 417:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static struct http_ssi_state *
 418:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_ssi_state_alloc(void)
 419:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 420:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_ssi_state *ret = HTTP_ALLOC_SSI_STATE();
 421:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED
 422:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (ret == NULL) {
 423:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_kill_oldest_connection(1);
 424:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     ret = HTTP_ALLOC_SSI_STATE();
 425:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 426:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED */
 427:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (ret != NULL) {
 428:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     memset(ret, 0, sizeof(struct http_ssi_state));
 429:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 430:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ret;
 431:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 432:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 433:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Free a struct http_ssi_state. */
 434:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 435:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_ssi_state_free(struct http_ssi_state *ssi)
 436:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 437:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (ssi != NULL) {
 438:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     HTTP_FREE_SSI_STATE(ssi);
 439:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 440:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 441:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 442:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 443:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Initialize a struct http_state.
 444:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 445:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 446:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_state_init(struct http_state *hs)
 447:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 448:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Initialize the structure. */
 449:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   memset(hs, 0, sizeof(struct http_state));
 450:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_HEADERS
 451:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Indicate that the headers are not yet valid */
 452:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->hdr_index = NUM_FILE_HDR_STRINGS;
 453:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_HEADERS */
 454:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 455:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 456:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Allocate a struct http_state. */
 457:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static struct http_state *
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 10


 458:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_state_alloc(void)
 459:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 460:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *ret = HTTP_ALLOC_HTTP_STATE();
 461:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED
 462:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (ret == NULL) {
 463:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_kill_oldest_connection(0);
 464:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     ret = HTTP_ALLOC_HTTP_STATE();
 465:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 466:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED */
 467:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (ret != NULL) {
 468:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_init(ret);
 469:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_add_connection(ret);
 470:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 471:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ret;
 472:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 473:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 474:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Free a struct http_state.
 475:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Also frees the file data if dynamic.
 476:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 477:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 478:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_state_eof(struct http_state *hs)
 479:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 480:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->handle) {
 481:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
 482:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     u32_t ms_needed = sys_now() - hs->time_started;
 483:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     u32_t needed = LWIP_MAX(1, (ms_needed / 100));
 484:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG_TIMING, ("httpd: needed %"U32_F" ms to send file of %d bytes -> %"U32_F
 485:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                      ms_needed, hs->handle->len, ((((u32_t)hs->handle->len) * 10) /
 486:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_TIMING */
 487:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     fs_close(hs->handle);
 488:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->handle = NULL;
 489:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 490:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_FILE_READ
 491:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->buf != NULL) {
 492:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     mem_free(hs->buf);
 493:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->buf = NULL;
 494:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 495:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_FILE_READ */
 496:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 497:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->ssi) {
 498:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_ssi_state_free(hs->ssi);
 499:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->ssi = NULL;
 500:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 501:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 502:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
 503:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->req) {
 504:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_free(hs->req);
 505:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->req = NULL;
 506:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 507:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
 508:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 509:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 510:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Free a struct http_state.
 511:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Also frees the file data if dynamic.
 512:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 513:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 514:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_state_free(struct http_state *hs)
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 11


 515:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 516:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs != NULL) {
 517:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_eof(hs);
 518:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_remove_connection(hs);
 519:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     HTTP_FREE_HTTP_STATE(hs);
 520:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 521:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 523:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Call tcp_write() in a loop trying smaller and smaller length
 524:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
 525:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param pcb altcp_pcb to send
 526:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param ptr Data to send
 527:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param length Length of data to send (in/out: on return, contains the
 528:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *        amount of data sent)
 529:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param apiflags directly passed to tcp_write
 530:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return the return value of tcp_write
 531:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 532:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
 533:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_write(struct altcp_pcb *pcb, const void *ptr, u16_t *length, u8_t apiflags)
 534:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 535:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t len, max_len;
 536:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("length != NULL", length != NULL);
 538:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 539:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (len == 0) {
 540:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
 541:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 542:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* We cannot send more data than space available in the send buffer. */
 543:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   max_len = altcp_sndbuf(pcb);
 544:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (max_len < len) {
 545:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = max_len;
 546:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 547:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #ifdef HTTPD_MAX_WRITE_LEN
 548:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Additional limitation: e.g. don't enqueue more than 2*mss at once */
 549:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   max_len = HTTPD_MAX_WRITE_LEN(pcb);
 550:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (len > max_len) {
 551:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = max_len;
 552:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 553:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* HTTPD_MAX_WRITE_LEN */
 554:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   do {
 555:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Trying to send %d bytes\n", len));
 556:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = altcp_write(pcb, ptr, len, apiflags);
 557:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err == ERR_MEM) {
 558:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if ((altcp_sndbuf(pcb) == 0) ||
 559:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           (altcp_sndqueuelen(pcb) >= TCP_SND_QUEUELEN)) {
 560:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* no need to try smaller sizes */
 561:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         len = 1;
 562:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else {
 563:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         len /= 2;
 564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 565:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE,
 566:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   ("Send failed, trying less (%d bytes)\n", len));
 567:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 568:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } while ((err == ERR_MEM) && (len > 1));
 569:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 570:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err == ERR_OK) {
 571:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Sent %d bytes\n", len));
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 12


 572:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     *length = len;
 573:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 574:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Send failed with err %d (\"%s\")\n", err, lwip_stre
 575:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     *length = 0;
 576:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 577:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 578:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
 579:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* ensure nagle is normally enabled (only disabled for persistent connections
 580:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      when all data has been enqueued but the connection stays open for the next
 581:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      request */
 582:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_nagle_enable(pcb);
 583:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 584:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 585:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return err;
 586:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 587:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 588:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
 589:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The connection shall be actively closed (using RST to close from fault states).
 590:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Reset the sent- and recv-callbacks.
 591:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
 592:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param pcb the tcp pcb to reset callbacks
 593:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs connection state to free
 594:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 595:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
 596:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_close_or_abort_conn(struct altcp_pcb *pcb, struct http_state *hs, u8_t abort_conn)
 597:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 598:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 599:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("Closing connection %p\n", (void *)pcb));
 600:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 601:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 602:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs != NULL) {
 603:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if ((hs->post_content_len_left != 0)
 604:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_POST_MANUAL_WND
 605:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         || ((hs->no_auto_wnd != 0) && (hs->unrecved_bytes != 0))
 606:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_POST_MANUAL_WND */
 607:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        ) {
 608:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* make sure the post code knows that the connection is closed */
 609:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_uri_buf[0] = 0;
 610:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       httpd_post_finished(hs, http_uri_buf, LWIP_HTTPD_URI_BUF_LEN);
 611:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 612:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 613:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST*/
 614:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 615:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 616:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_arg(pcb, NULL);
 617:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_recv(pcb, NULL);
 618:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_err(pcb, NULL);
 619:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_poll(pcb, NULL, 0);
 620:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_sent(pcb, NULL);
 621:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs != NULL) {
 622:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_free(hs);
 623:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 624:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 625:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (abort_conn) {
 626:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_abort(pcb);
 627:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
 628:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 13


 629:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err = altcp_close(pcb);
 630:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err != ERR_OK) {
 631:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Error %d closing %p\n", err, (void *)pcb));
 632:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error closing, try again later in poll */
 633:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_poll(pcb, http_poll, HTTPD_POLL_INTERVAL);
 634:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 635:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return err;
 636:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 637:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 638:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
 639:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The connection shall be actively closed.
 640:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Reset the sent- and recv-callbacks.
 641:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
 642:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param pcb the tcp pcb to reset callbacks
 643:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs connection state to free
 644:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 645:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
 646:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_close_conn(struct altcp_pcb *pcb, struct http_state *hs)
 647:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 648:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return http_close_or_abort_conn(pcb, hs, 0);
 649:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 650:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 651:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** End of file: either close the connection (Connection: close) or
 652:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * close the file (Connection: keep-alive)
 653:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 654:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 655:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_eof(struct altcp_pcb *pcb, struct http_state *hs)
 656:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 657:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* HTTP/1.1 persistent connection? (Not supported for SSI) */
 658:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
 659:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->keepalive) {
 660:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_remove_connection(hs);
 661:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 662:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_eof(hs);
 663:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_init(hs);
 664:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* restore state: */
 665:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->pcb = pcb;
 666:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->keepalive = 1;
 667:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_add_connection(hs);
 668:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* ensure nagle doesn't interfere with sending all data as fast as possible: */
 669:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_nagle_disable(pcb);
 670:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
 671:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_11_KEEPALIVE */
 672:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {
 673:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_close_conn(pcb, hs);
 674:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 675:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 676:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 677:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI || LWIP_HTTPD_CGI_SSI
 678:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
 679:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Extract URI parameters from the parameter-part of an URI in the form
 680:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * "test.cgi?x=y" @todo: better explanation!
 681:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Pointers to the parameters are stored in hs->param_vals.
 682:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
 683:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs http connection state
 684:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param params pointer to the NULL-terminated parameter string from the URI
 685:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return number of parameters extracted
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 14


 686:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 687:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static int
 688:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** extract_uri_parameters(struct http_state *hs, char *params)
 689:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 690:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *pair;
 691:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *equals;
 692:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int loop;
 693:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 694:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(hs);
 695:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 696:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* If we have no parameters at all, return immediately. */
 697:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (!params || (params[0] == '\0')) {
 698:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return (0);
 699:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 700:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 701:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Get a pointer to our first parameter */
 702:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   pair = params;
 703:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 704:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Parse up to LWIP_HTTPD_MAX_CGI_PARAMETERS from the passed string and ignore the
 705:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * remainder (if any) */
 706:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   for (loop = 0; (loop < LWIP_HTTPD_MAX_CGI_PARAMETERS) && pair; loop++) {
 707:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 708:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Save the name of the parameter */
 709:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_cgi_params[loop] = pair;
 710:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 711:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Remember the start of this name=value pair */
 712:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     equals = pair;
 713:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 714:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Find the start of the next name=value pair and replace the delimiter
 715:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * with a 0 to terminate the previous pair string. */
 716:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pair = strchr(pair, '&');
 717:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (pair) {
 718:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       *pair = '\0';
 719:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pair++;
 720:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else {
 721:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* We didn't find a new parameter so find the end of the URI and
 722:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        * replace the space with a '\0' */
 723:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pair = strchr(equals, ' ');
 724:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (pair) {
 725:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         *pair = '\0';
 726:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 727:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 728:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* Revert to NULL so that we exit the loop as expected. */
 729:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pair = NULL;
 730:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 731:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 732:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Now find the '=' in the previous pair, replace it with '\0' and save
 733:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * the parameter value string. */
 734:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     equals = strchr(equals, '=');
 735:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (equals) {
 736:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       *equals = '\0';
 737:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_cgi_param_vals[loop] = equals + 1;
 738:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else {
 739:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_cgi_param_vals[loop] = NULL;
 740:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 741:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 742:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 15


 743:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return loop;
 744:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 745:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_CGI || LWIP_HTTPD_CGI_SSI */
 746:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 747:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 748:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
 749:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Insert a tag (found in an shtml in the form of "<!--#tagname-->" into the file.
 750:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The tag's name is stored in ssi->tag_name (NULL-terminated), the replacement
 751:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * should be written to hs->tag_insert (up to a length of LWIP_HTTPD_MAX_TAG_INSERT_LEN).
 752:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The amount of data written is stored to ssi->tag_insert_len.
 753:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
 754:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @todo: return tag_insert_len - maybe it can be removed from struct http_state?
 755:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
 756:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs http connection state
 757:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 758:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 759:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** get_tag_insert(struct http_state *hs)
 760:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 761:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_RAW
 762:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *tag;
 763:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SSI_RAW */
 764:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int tag;
 765:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_RAW */
 766:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   size_t len;
 767:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_ssi_state *ssi;
 768:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_MULTIPART
 769:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t current_tag_part;
 770:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_MULTIPART */
 771:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 772:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 773:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   ssi = hs->ssi;
 774:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("ssi != NULL", ssi != NULL);
 775:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_MULTIPART
 776:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   current_tag_part = ssi->tag_part;
 777:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   ssi->tag_part = HTTPD_LAST_TAG_PART;
 778:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_MULTIPART */
 779:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_RAW
 780:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   tag = ssi->tag_name;
 781:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 782:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 783:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (httpd_ssi_handler
 784:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SSI_RAW
 785:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       && httpd_tags && httpd_num_tags
 786:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI_RAW */
 787:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      ) {
 788:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 789:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Find this tag in the list we have been provided. */
 790:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_RAW
 791:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     {
 792:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SSI_RAW */
 793:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     for (tag = 0; tag < httpd_num_tags; tag++) {
 794:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (strcmp(ssi->tag_name, httpd_tags[tag]) == 0)
 795:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_RAW */
 796:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       {
 797:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->tag_insert_len = httpd_ssi_handler(tag, ssi->tag_insert,
 798:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                               LWIP_HTTPD_MAX_TAG_INSERT_LEN
 799:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_MULTIPART
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 16


 800:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                               , current_tag_part, &ssi->tag_part
 801:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_MULTIPART */
 802:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_FILE_STATE
 803:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                               , (hs->handle ? hs->handle->state : NULL)
 804:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_FILE_STATE */
 805:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                              );
 806:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_RAW
 807:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (ssi->tag_insert_len != HTTPD_SSI_TAG_UNKNOWN)
 808:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_RAW */
 809:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         {
 810:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           return;
 811:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
 812:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 813:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 814:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 815:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 816:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* If we drop out, we were asked to serve a page which contains tags that
 817:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * we don't have a handler for. Merely echo back the tags with an error
 818:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * marker. */
 819:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define UNKNOWN_TAG1_TEXT "<b>***UNKNOWN TAG "
 820:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define UNKNOWN_TAG1_LEN  18
 821:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define UNKNOWN_TAG2_TEXT "***</b>"
 822:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define UNKNOWN_TAG2_LEN  7
 823:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = LWIP_MIN(sizeof(ssi->tag_name), LWIP_MIN(strlen(ssi->tag_name),
 824:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                  LWIP_HTTPD_MAX_TAG_INSERT_LEN - (UNKNOWN_TAG1_LEN + UNKNOWN_TAG2_LEN)));
 825:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   MEMCPY(ssi->tag_insert, UNKNOWN_TAG1_TEXT, UNKNOWN_TAG1_LEN);
 826:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   MEMCPY(&ssi->tag_insert[UNKNOWN_TAG1_LEN], ssi->tag_name, len);
 827:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   MEMCPY(&ssi->tag_insert[UNKNOWN_TAG1_LEN + len], UNKNOWN_TAG2_TEXT, UNKNOWN_TAG2_LEN);
 828:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   ssi->tag_insert[UNKNOWN_TAG1_LEN + len + UNKNOWN_TAG2_LEN] = 0;
 829:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 830:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = strlen(ssi->tag_insert);
 831:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("len <= 0xffff", len <= 0xffff);
 832:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   ssi->tag_insert_len = (u16_t)len;
 833:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 834:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 835:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 836:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_HEADERS
 837:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
 838:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Generate the relevant HTTP headers for the given filename and write
 839:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * them into the supplied buffer.
 840:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 841:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 842:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** get_http_headers(struct http_state *hs, const char *uri)
 843:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 844:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   size_t content_type;
 845:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *tmp;
 846:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *ext;
 847:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *vars;
 848:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 849:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* In all cases, the second header we send is the server identification
 850:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      so set it here. */
 851:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->hdrs[HDR_STRINGS_IDX_SERVER_NAME] = g_psHTTPHeaderStrings[HTTP_HDR_SERVER];
 852:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->hdrs[HDR_STRINGS_IDX_CONTENT_LEN_KEEPALIVE] = NULL;
 853:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->hdrs[HDR_STRINGS_IDX_CONTENT_LEN_NR] = NULL;
 854:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 855:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Is this a normal file or the special case we use to send back the
 856:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      default "404: Page not found" response? */
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 17


 857:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (uri == NULL) {
 858:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_HTTP_STATUS] = g_psHTTPHeaderStrings[HTTP_HDR_NOT_FOUND];
 859:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
 860:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->keepalive) {
 861:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->hdrs[HDR_STRINGS_IDX_CONTENT_TYPE] = g_psHTTPHeaderStrings[DEFAULT_404_HTML_PERSISTENT];
 862:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else
 863:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 864:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     {
 865:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->hdrs[HDR_STRINGS_IDX_CONTENT_TYPE] = g_psHTTPHeaderStrings[DEFAULT_404_HTML];
 866:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 867:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 868:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Set up to send the first header string. */
 869:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdr_index = 0;
 870:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdr_pos = 0;
 871:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return;
 872:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 873:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* We are dealing with a particular filename. Look for one other
 874:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       special case.  We assume that any filename with "404" in it must be
 875:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       indicative of a 404 server error whereas all other files require
 876:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       the 200 OK header. */
 877:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (strstr(uri, "404")) {
 878:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_HTTP_STATUS] = g_psHTTPHeaderStrings[HTTP_HDR_NOT_FOUND];
 879:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else if (strstr(uri, "400")) {
 880:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_HTTP_STATUS] = g_psHTTPHeaderStrings[HTTP_HDR_BAD_REQUEST];
 881:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else if (strstr(uri, "501")) {
 882:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_HTTP_STATUS] = g_psHTTPHeaderStrings[HTTP_HDR_NOT_IMPL];
 883:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 884:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_HTTP_STATUS] = g_psHTTPHeaderStrings[HTTP_HDR_OK];
 885:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 886:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 887:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Determine if the URI has any variables and, if so, temporarily remove
 888:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       them. */
 889:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   vars = strchr(uri, '?');
 890:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (vars) {
 891:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     *vars = '\0';
 892:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 893:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 894:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Get a pointer to the file extension.  We find this by looking for the
 895:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       last occurrence of "." in the filename passed. */
 896:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   ext = NULL;
 897:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   tmp = strchr(uri, '.');
 898:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   while (tmp) {
 899:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     ext = tmp + 1;
 900:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     tmp = strchr(ext, '.');
 901:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 902:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (ext != NULL) {
 903:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Now determine the content type and add the relevant header for that. */
 904:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     for (content_type = 0; content_type < NUM_HTTP_HEADERS; content_type++) {
 905:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* Have we found a matching extension? */
 906:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (!lwip_stricmp(g_psHTTPHeaders[content_type].extension, ext)) {
 907:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         break;
 908:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 909:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 910:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 911:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     content_type = NUM_HTTP_HEADERS;
 912:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 913:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 18


 914:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Reinstate the parameter marker if there was one in the original URI. */
 915:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (vars) {
 916:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     *vars = '?';
 917:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 918:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 919:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_OMIT_HEADER_FOR_EXTENSIONLESS_URI
 920:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Does the URL passed have any file extension?  If not, we assume it
 921:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      is a special-case URL used for control state notification and we do
 922:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      not send any HTTP headers with the response. */
 923:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (!ext) {
 924:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Force the header index to a value indicating that all headers
 925:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        have already been sent. */
 926:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdr_index = NUM_FILE_HDR_STRINGS;
 927:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return;
 928:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 929:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_OMIT_HEADER_FOR_EXTENSIONLESS_URI */
 930:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Did we find a matching extension? */
 931:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (content_type < NUM_HTTP_HEADERS) {
 932:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* yes, store it */
 933:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_CONTENT_TYPE] = g_psHTTPHeaders[content_type].content_type;
 934:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else if (!ext) {
 935:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* no, no extension found -> use binary transfer to prevent the browser adding '.txt' on save *
 936:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_CONTENT_TYPE] = HTTP_HDR_APP;
 937:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 938:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* No - use the default, plain text file type. */
 939:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_CONTENT_TYPE] = HTTP_HDR_DEFAULT_TYPE;
 940:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 941:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Set up to send the first header string. */
 942:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->hdr_index = 0;
 943:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->hdr_pos = 0;
 944:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 945:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 946:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* Add content-length header? */
 947:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
 948:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** get_http_content_length(struct http_state *hs)
 949:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 950:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t add_content_len = 0;
 951:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 952:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("already been here?", hs->hdrs[HDR_STRINGS_IDX_CONTENT_LEN_KEEPALIVE] == NULL);
 953:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 954:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   add_content_len = 0;
 955:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 956:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->ssi == NULL) /* @todo: get maximum file length from SSI */
 957:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 958:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {
 959:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if ((hs->handle != NULL) && (hs->handle->flags & FS_FILE_FLAGS_HEADER_PERSISTENT)) {
 960:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       add_content_len = 1;
 961:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 962:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 963:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (add_content_len) {
 964:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     size_t len;
 965:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     lwip_itoa(hs->hdr_content_len, (size_t)LWIP_HTTPD_MAX_CONTENT_LEN_SIZE,
 966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               hs->handle->len);
 967:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = strlen(hs->hdr_content_len);
 968:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (len <= LWIP_HTTPD_MAX_CONTENT_LEN_SIZE - LWIP_HTTPD_MAX_CONTENT_LEN_OFFSET) {
 969:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       SMEMCPY(&hs->hdr_content_len[len], CRLF, 3);
 970:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->hdrs[HDR_STRINGS_IDX_CONTENT_LEN_NR] = hs->hdr_content_len;
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 19


 971:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else {
 972:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       add_content_len = 0;
 973:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 974:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 975:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
 976:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (add_content_len) {
 977:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_CONTENT_LEN_KEEPALIVE] = g_psHTTPHeaderStrings[HTTP_HDR_KEEPALIVE_LEN]
 978:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 979:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_CONTENT_LEN_KEEPALIVE] = g_psHTTPHeaderStrings[HTTP_HDR_CONN_CLOSE];
 980:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->keepalive = 0;
 981:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 982:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SUPPORT_11_KEEPALIVE */
 983:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (add_content_len) {
 984:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdrs[HDR_STRINGS_IDX_CONTENT_LEN_KEEPALIVE] = g_psHTTPHeaderStrings[HTTP_HDR_CONTENT_LENGTH
 985:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 986:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_11_KEEPALIVE */
 987:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 988:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 989:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Sub-function of http_send(): send dynamic headers
 990:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
 991:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @returns: - HTTP_NO_DATA_TO_SEND: no new data has been enqueued
 992:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *           - HTTP_DATA_TO_SEND_CONTINUE: continue with sending HTTP body
 993:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *           - HTTP_DATA_TO_SEND_BREAK: data has been enqueued, headers pending,
 994:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *                                      so don't send HTTP body yet
 995:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *           - HTTP_DATA_TO_SEND_FREED: http_state and pcb are already freed
 996:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
 997:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static u8_t
 998:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_send_headers(struct altcp_pcb *pcb, struct http_state *hs)
 999:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1000:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
1001:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t len;
1002:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t data_to_send = HTTP_NO_DATA_TO_SEND;
1003:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t hdrlen, sendlen;
1004:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1005:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->hdrs[HDR_STRINGS_IDX_CONTENT_LEN_KEEPALIVE] == NULL) {
1006:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* set up "content-length" and "connection:" headers */
1007:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     get_http_content_length(hs);
1008:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1009:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1010:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* How much data can we send? */
1011:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = altcp_sndbuf(pcb);
1012:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   sendlen = len;
1013:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1014:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   while (len && (hs->hdr_index < NUM_FILE_HDR_STRINGS) && sendlen) {
1015:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     const void *ptr;
1016:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     u16_t old_sendlen;
1017:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     u8_t apiflags;
1018:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* How much do we have to send from the current header? */
1019:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hdrlen = (u16_t)strlen(hs->hdrs[hs->hdr_index]);
1020:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1021:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* How much of this can we send? */
1022:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     sendlen = (len < (hdrlen - hs->hdr_pos)) ? len : (hdrlen - hs->hdr_pos);
1023:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1024:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Send this amount of data or as much as we can given memory
1025:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * constraints. */
1026:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     ptr = (const void *)(hs->hdrs[hs->hdr_index] + hs->hdr_pos);
1027:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     old_sendlen = sendlen;
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 20


1028:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     apiflags = HTTP_IS_HDR_VOLATILE(hs, ptr);
1029:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->hdr_index == HDR_STRINGS_IDX_CONTENT_LEN_NR) {
1030:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* content-length is always volatile */
1031:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       apiflags |= TCP_WRITE_FLAG_COPY;
1032:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1033:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->hdr_index < NUM_FILE_HDR_STRINGS - 1) {
1034:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       apiflags |= TCP_WRITE_FLAG_MORE;
1035:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1036:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = http_write(pcb, ptr, &sendlen, apiflags);
1037:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if ((err == ERR_OK) && (old_sendlen != sendlen)) {
1038:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* Remember that we added some more data to be transmitted. */
1039:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       data_to_send = HTTP_DATA_TO_SEND_CONTINUE;
1040:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else if (err != ERR_OK) {
1041:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* special case: http_write does not try to send 1 byte */
1042:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       sendlen = 0;
1043:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1044:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1045:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Fix up the header position for the next time round. */
1046:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->hdr_pos += sendlen;
1047:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len -= sendlen;
1048:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1049:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Have we finished sending this string? */
1050:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->hdr_pos == hdrlen) {
1051:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* Yes - move on to the next one */
1052:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->hdr_index++;
1053:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* skip headers that are NULL (not all headers are required) */
1054:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       while ((hs->hdr_index < NUM_FILE_HDR_STRINGS) &&
1055:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              (hs->hdrs[hs->hdr_index] == NULL)) {
1056:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->hdr_index++;
1057:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
1058:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->hdr_pos = 0;
1059:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1060:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1061:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1062:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((hs->hdr_index >= NUM_FILE_HDR_STRINGS) && (hs->file == NULL)) {
1063:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* When we are at the end of the headers, check for data to send
1064:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * instead of waiting for ACK from remote side to continue
1065:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * (which would happen when sending files from async read). */
1066:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (http_check_eof(pcb, hs)) {
1067:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       data_to_send = HTTP_DATA_TO_SEND_BREAK;
1068:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else {
1069:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* At this point, for non-keepalive connections, hs is deallocated an
1070:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          pcb is closed. */
1071:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return HTTP_DATA_TO_SEND_FREED;
1072:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1073:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1074:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* If we get here and there are still header bytes to send, we send
1075:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * the header information we just wrote immediately. If there are no
1076:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * more headers to send, but we do have file data to send, drop through
1077:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * to try to send some file data too. */
1078:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((hs->hdr_index < NUM_FILE_HDR_STRINGS) || !hs->file) {
1079:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("tcp_output\n"));
1080:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return HTTP_DATA_TO_SEND_BREAK;
1081:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1082:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return data_to_send;
1083:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1084:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_HEADERS */
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 21


1085:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1086:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Sub-function of http_send(): end-of-file (or block) is reached,
1087:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * either close the file or read the next block (if supported).
1088:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1089:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @returns: 0 if the file is finished or no data has been read
1090:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *           1 if the file is not finished and data has been read
1091:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1092:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static u8_t
1093:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_check_eof(struct altcp_pcb *pcb, struct http_state *hs)
1094:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1095:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int bytes_left;
1096:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_FILE_READ
1097:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int count;
1098:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #ifdef HTTPD_MAX_WRITE_LEN
1099:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int max_write_len;
1100:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* HTTPD_MAX_WRITE_LEN */
1101:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_FILE_READ */
1102:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1103:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Do we have a valid file handle? */
1104:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->handle == NULL) {
1105:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* No - close the connection. */
1106:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_eof(pcb, hs);
1107:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
1108:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   bytes_left = fs_bytes_left(hs->handle);
1110:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (bytes_left <= 0) {
1111:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done. */
1112:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("End of file.\n"));
1113:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_eof(pcb, hs);
1114:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
1115:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1116:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_FILE_READ
1117:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Do we already have a send buffer allocated? */
1118:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->buf) {
1119:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Yes - get the length of the buffer */
1120:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     count = LWIP_MIN(hs->buf_len, bytes_left);
1121:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
1122:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We don't have a send buffer so allocate one now */
1123:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     count = altcp_sndbuf(pcb);
1124:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (bytes_left < count) {
1125:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       count = bytes_left;
1126:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1127:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #ifdef HTTPD_MAX_WRITE_LEN
1128:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Additional limitation: e.g. don't enqueue more than 2*mss at once */
1129:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     max_write_len = HTTPD_MAX_WRITE_LEN(pcb);
1130:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (count > max_write_len) {
1131:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       count = max_write_len;
1132:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1133:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* HTTPD_MAX_WRITE_LEN */
1134:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     do {
1135:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->buf = (char *)mem_malloc((mem_size_t)count);
1136:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (hs->buf != NULL) {
1137:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->buf_len = count;
1138:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         break;
1139:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
1140:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       count = count / 2;
1141:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } while (count > 100);
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 22


1142:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1143:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Did we get a send buffer? If not, return immediately. */
1144:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->buf == NULL) {
1145:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG, ("No buff\n"));
1146:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return 0;
1147:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1148:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1149:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1150:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Read a block of data from the file. */
1151:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("Trying to read %d bytes.\n", count));
1152:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1153:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_FS_ASYNC_READ
1154:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   count = fs_read_async(hs->handle, hs->buf, count, http_continue, hs);
1155:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_FS_ASYNC_READ */
1156:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   count = fs_read(hs->handle, hs->buf, count);
1157:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_FS_ASYNC_READ */
1158:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (count < 0) {
1159:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (count == FS_READ_DELAYED) {
1160:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* Delayed read, wait for FS to unblock us */
1161:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return 0;
1162:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1163:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done.
1164:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * @todo: close here for HTTP/1.1 when reading file fails */
1165:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("End of file.\n"));
1166:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_eof(pcb, hs);
1167:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
1168:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1169:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1170:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Set up to send the block of data we just read */
1171:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("Read %d bytes.\n", count));
1172:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->left = count;
1173:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->file = hs->buf;
1174:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
1175:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->ssi) {
1176:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->ssi->parse_left = count;
1177:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->ssi->parsed = hs->buf;
1178:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1179:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
1180:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_DYNAMIC_FILE_READ */
1181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("SSI and DYNAMIC_HEADERS turned off but eof not reached", 0);
1182:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI || LWIP_HTTPD_DYNAMIC_HEADERS */
1183:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return 1;
1184:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1185:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1186:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Sub-function of http_send(): This is the normal send-routine for non-ssi files
1187:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1188:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @returns: - 1: data has been written (so call tcp_ouput)
1189:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *           - 0: no data has been written (no need to call tcp_output)
1190:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1191:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static u8_t
1192:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_send_data_nonssi(struct altcp_pcb *pcb, struct http_state *hs)
1193:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
1195:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t len;
1196:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t data_to_send = 0;
1197:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1198:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* We are not processing an SHTML file so no tag checking is necessary.
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 23


1199:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * Just send the data as we received it from the file. */
1200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = (u16_t)LWIP_MIN(hs->left, 0xffff);
1201:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1202:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err = http_write(pcb, hs->file, &len, HTTP_IS_DATA_VOLATILE(hs));
1203:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err == ERR_OK) {
1204:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_to_send = 1;
1205:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->file += len;
1206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->left -= len;
1207:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1208:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1209:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return data_to_send;
1210:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1211:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1212:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
1213:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Sub-function of http_send(): This is the send-routine for ssi files
1214:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1215:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @returns: - 1: data has been written (so call tcp_ouput)
1216:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *           - 0: no data has been written (no need to call tcp_output)
1217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1218:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static u8_t
1219:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_send_data_ssi(struct altcp_pcb *pcb, struct http_state *hs)
1220:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1221:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err = ERR_OK;
1222:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t len;
1223:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t data_to_send = 0;
1224:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t tag_type;
1225:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1226:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_ssi_state *ssi = hs->ssi;
1227:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("ssi != NULL", ssi != NULL);
1228:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* We are processing an SHTML file so need to scan for tags and replace
1229:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * them with insert strings. We need to be careful here since a tag may
1230:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * straddle the boundary of two blocks read from the file and we may also
1231:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * have to split the insert string between two tcp_write operations. */
1232:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1233:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* How much data could we send? */
1234:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = altcp_sndbuf(pcb);
1235:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1236:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Do we have remaining data to send before parsing more? */
1237:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (ssi->parsed > hs->file) {
1238:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = (u16_t)LWIP_MIN(ssi->parsed - hs->file, 0xffff);
1239:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1240:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = http_write(pcb, hs->file, &len, HTTP_IS_DATA_VOLATILE(hs));
1241:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err == ERR_OK) {
1242:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       data_to_send = 1;
1243:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->file += len;
1244:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->left -= len;
1245:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1246:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1247:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* If the send buffer is full, return now. */
1248:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (altcp_sndbuf(pcb) == 0) {
1249:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return data_to_send;
1250:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1251:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1252:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1253:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("State %d, %d left\n", ssi->tag_state, (int)ssi->parse_left));
1254:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1255:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* We have sent all the data that was already parsed so continue parsing
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 24


1256:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * the buffer contents looking for SSI tags. */
1257:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   while (((ssi->tag_state == TAG_SENDING) || ssi->parse_left) && (err == ERR_OK)) {
1258:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (len == 0) {
1259:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return data_to_send;
1260:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1261:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     switch (ssi->tag_state) {
1262:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       case TAG_NONE:
1263:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* We are not currently processing an SSI tag so scan for the
1264:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          * start of the lead-in marker. */
1265:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         for (tag_type = 0; tag_type < LWIP_ARRAYSIZE(http_ssi_tag_desc); tag_type++) {
1266:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (*ssi->parsed == http_ssi_tag_desc[tag_type].lead_in[0]) {
1267:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* We found what could be the lead-in for a new tag so change
1268:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * state appropriately. */
1269:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_type = tag_type;
1270:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_state = TAG_LEADIN;
1271:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_index = 1;
1272:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   #if !LWIP_HTTPD_SSI_INCLUDE_TAG
1273:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_started = ssi->parsed;
1274:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   #endif /* !LWIP_HTTPD_SSI_INCLUDE_TAG */
1275:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             break;
1276:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1277:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1278:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1279:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* Move on to the next character in the buffer */
1280:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->parse_left--;
1281:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->parsed++;
1282:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         break;
1283:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1284:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       case TAG_LEADIN:
1285:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* We are processing the lead-in marker, looking for the start of
1286:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          * the tag name. */
1287:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1288:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* Have we reached the end of the leadin? */
1289:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (http_ssi_tag_desc[ssi->tag_type].lead_in[ssi->tag_index] == 0) {
1290:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->tag_index = 0;
1291:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->tag_state = TAG_FOUND;
1292:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         } else {
1293:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* Have we found the next character we expect for the tag leadin? */
1294:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (*ssi->parsed == http_ssi_tag_desc[ssi->tag_type].lead_in[ssi->tag_index]) {
1295:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* Yes - move to the next one unless we have found the complete
1296:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * leadin, in which case we start looking for the tag itself */
1297:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_index++;
1298:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           } else {
1299:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* We found an unexpected character so this is not a tag. Move
1300:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * back to idle state. */
1301:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_state = TAG_NONE;
1302:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1303:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1304:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* Move on to the next character in the buffer */
1305:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parse_left--;
1306:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parsed++;
1307:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1308:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         break;
1309:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1310:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       case TAG_FOUND:
1311:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* We are reading the tag name, looking for the start of the
1312:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          * lead-out marker and removing any whitespace found. */
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 25


1313:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1314:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* Remove leading whitespace between the tag leading and the first
1315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          * tag name character. */
1316:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if ((ssi->tag_index == 0) && ((*ssi->parsed == ' ') ||
1317:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                       (*ssi->parsed == '\t') || (*ssi->parsed == '\n') ||
1318:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                       (*ssi->parsed == '\r'))) {
1319:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* Move on to the next character in the buffer */
1320:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parse_left--;
1321:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parsed++;
1322:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           break;
1323:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1324:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1325:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* Have we found the end of the tag name? This is signalled by
1326:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          * us finding the first leadout character or whitespace */
1327:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if ((*ssi->parsed == http_ssi_tag_desc[ssi->tag_type].lead_out[0]) ||
1328:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             (*ssi->parsed == ' ')  || (*ssi->parsed == '\t') ||
1329:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             (*ssi->parsed == '\n') || (*ssi->parsed == '\r')) {
1330:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1331:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (ssi->tag_index == 0) {
1332:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* We read a zero length tag so ignore it. */
1333:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_state = TAG_NONE;
1334:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           } else {
1335:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* We read a non-empty tag so go ahead and look for the
1336:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * leadout string. */
1337:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_state = TAG_LEADOUT;
1338:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             LWIP_ASSERT("ssi->tag_index <= 0xff", ssi->tag_index <= 0xff);
1339:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_name_len = (u8_t)ssi->tag_index;
1340:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_name[ssi->tag_index] = '\0';
1341:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (*ssi->parsed == http_ssi_tag_desc[ssi->tag_type].lead_out[0]) {
1342:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               ssi->tag_index = 1;
1343:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             } else {
1344:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               ssi->tag_index = 0;
1345:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
1346:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1347:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         } else {
1348:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* This character is part of the tag name so save it */
1349:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (ssi->tag_index < LWIP_HTTPD_MAX_TAG_NAME_LEN) {
1350:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_name[ssi->tag_index++] = *ssi->parsed;
1351:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           } else {
1352:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* The tag was too long so ignore it. */
1353:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_state = TAG_NONE;
1354:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1355:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1357:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* Move on to the next character in the buffer */
1358:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->parse_left--;
1359:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->parsed++;
1360:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1361:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         break;
1362:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1363:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* We are looking for the end of the lead-out marker. */
1364:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       case TAG_LEADOUT:
1365:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* Remove leading whitespace between the tag leading and the first
1366:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          * tag leadout character. */
1367:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if ((ssi->tag_index == 0) && ((*ssi->parsed == ' ') ||
1368:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                       (*ssi->parsed == '\t') || (*ssi->parsed == '\n') ||
1369:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                       (*ssi->parsed == '\r'))) {
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 26


1370:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* Move on to the next character in the buffer */
1371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parse_left--;
1372:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parsed++;
1373:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           break;
1374:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1375:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1376:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* Have we found the next character we expect for the tag leadout? */
1377:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (*ssi->parsed == http_ssi_tag_desc[ssi->tag_type].lead_out[ssi->tag_index]) {
1378:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* Yes - move to the next one unless we have found the complete
1379:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****            * leadout, in which case we need to call the client to process
1380:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****            * the tag. */
1381:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1382:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* Move on to the next character in the buffer */
1383:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parse_left--;
1384:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parsed++;
1385:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->tag_index++;
1386:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1387:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (http_ssi_tag_desc[ssi->tag_type].lead_out[ssi->tag_index] == 0) {
1388:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* Call the client to ask for the insert string for the
1389:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * tag we just found. */
1390:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_MULTIPART
1391:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_part = 0; /* start with tag part 0 */
1392:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_MULTIPART */
1393:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             get_tag_insert(hs);
1394:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1395:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* Next time through, we are going to be sending data
1396:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * immediately, either the end of the block we start
1397:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * sending here or the insert string. */
1398:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_index = 0;
1399:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_state = TAG_SENDING;
1400:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->tag_end = ssi->parsed;
1401:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SSI_INCLUDE_TAG
1402:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             ssi->parsed = ssi->tag_started;
1403:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI_INCLUDE_TAG*/
1404:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1405:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* If there is any unsent data in the buffer prior to the
1406:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * tag, we need to send it now. */
1407:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (ssi->tag_end > hs->file) {
1408:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               /* How much of the data can we send? */
1409:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_INCLUDE_TAG
1410:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               len = (u16_t)LWIP_MIN(ssi->tag_end - hs->file, 0xffff);
1411:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SSI_INCLUDE_TAG*/
1412:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               /* we would include the tag in sending */
1413:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               len = (u16_t)LWIP_MIN(ssi->tag_started - hs->file, 0xffff);
1414:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_INCLUDE_TAG*/
1415:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1416:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               err = http_write(pcb, hs->file, &len, HTTP_IS_DATA_VOLATILE(hs));
1417:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               if (err == ERR_OK) {
1418:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 data_to_send = 1;
1419:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SSI_INCLUDE_TAG
1420:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 if (ssi->tag_started <= hs->file) {
1421:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   /* pretend to have sent the tag, too */
1422:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   len += (u16_t)(ssi->tag_end - ssi->tag_started);
1423:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 }
1424:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI_INCLUDE_TAG*/
1425:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 hs->file += len;
1426:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 hs->left -= len;
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 27


1427:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               }
1428:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
1429:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1430:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         } else {
1431:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* We found an unexpected character so this is not a tag. Move
1432:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****            * back to idle state. */
1433:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parse_left--;
1434:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->parsed++;
1435:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ssi->tag_state = TAG_NONE;
1436:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1437:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         break;
1438:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1439:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /*
1440:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        * We have found a valid tag and are in the process of sending
1441:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        * data as a result of that discovery. We send either remaining data
1442:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        * from the file prior to the insert point or the insert string itself.
1443:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        */
1444:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       case TAG_SENDING:
1445:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* Do we have any remaining file data to send from the buffer prior
1446:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          * to the tag? */
1447:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (ssi->tag_end > hs->file) {
1448:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* How much of the data can we send? */
1449:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_INCLUDE_TAG
1450:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           len = (u16_t)LWIP_MIN(ssi->tag_end - hs->file, 0xffff);
1451:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SSI_INCLUDE_TAG*/
1452:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           LWIP_ASSERT("hs->started >= hs->file", ssi->tag_started >= hs->file);
1453:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* we would include the tag in sending */
1454:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           len = (u16_t)LWIP_MIN(ssi->tag_started - hs->file, 0xffff);
1455:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_INCLUDE_TAG*/
1456:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (len != 0) {
1457:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             err = http_write(pcb, hs->file, &len, HTTP_IS_DATA_VOLATILE(hs));
1458:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           } else {
1459:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             err = ERR_OK;
1460:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1461:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (err == ERR_OK) {
1462:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             data_to_send = 1;
1463:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SSI_INCLUDE_TAG
1464:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (ssi->tag_started <= hs->file) {
1465:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               /* pretend to have sent the tag, too */
1466:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               len += (u16_t)(ssi->tag_end - ssi->tag_started);
1467:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
1468:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI_INCLUDE_TAG*/
1469:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             hs->file += len;
1470:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             hs->left -= len;
1471:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1472:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         } else {
1473:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_MULTIPART
1474:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (ssi->tag_index >= ssi->tag_insert_len) {
1475:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* Did the last SSIHandler have more to send? */
1476:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (ssi->tag_part != HTTPD_LAST_TAG_PART) {
1477:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               /* If so, call it again */
1478:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               ssi->tag_index = 0;
1479:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               get_tag_insert(hs);
1480:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
1481:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1482:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_MULTIPART */
1483:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 28


1484:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* Do we still have insert data left to send? */
1485:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (ssi->tag_index < ssi->tag_insert_len) {
1486:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* We are sending the insert string itself. How much of the
1487:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * insert can we send? */
1488:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             len = (ssi->tag_insert_len - ssi->tag_index);
1489:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1490:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* Note that we set the copy flag here since we only have a
1491:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * single tag insert buffer per connection. If we don't do
1492:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * this, insert corruption can occur if more than one insert
1493:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              * is processed before we call tcp_output. */
1494:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             err = http_write(pcb, &(ssi->tag_insert[ssi->tag_index]), &len,
1495:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                              HTTP_IS_TAG_VOLATILE(hs));
1496:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (err == ERR_OK) {
1497:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               data_to_send = 1;
1498:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               ssi->tag_index += len;
1499:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               /* Don't return here: keep on sending data */
1500:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
1501:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           } else {
1502:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_MULTIPART
1503:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (ssi->tag_part == HTTPD_LAST_TAG_PART)
1504:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_MULTIPART */
1505:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             {
1506:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               /* We have sent all the insert data so go back to looking for
1507:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                * a new tag. */
1508:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               LWIP_DEBUGF(HTTPD_DEBUG, ("Everything sent.\n"));
1509:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               ssi->tag_index = 0;
1510:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               ssi->tag_state = TAG_NONE;
1511:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SSI_INCLUDE_TAG
1512:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               ssi->parsed = ssi->tag_end;
1513:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI_INCLUDE_TAG*/
1514:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
1515:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1516:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           break;
1517:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         default:
1518:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           break;
1519:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1520:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1521:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1523:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* If we drop out of the end of the for loop, this implies we must have
1524:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * file data to send so send it now. In TAG_SENDING state, we've already
1525:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * handled this so skip the send if that's the case. */
1526:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((ssi->tag_state != TAG_SENDING) && (ssi->parsed > hs->file)) {
1527:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_FILE_READ && !LWIP_HTTPD_SSI_INCLUDE_TAG
1528:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if ((ssi->tag_state != TAG_NONE) && (ssi->tag_started > ssi->tag_end)) {
1529:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* If we found tag on the edge of the read buffer: just throw away the first part
1530:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          (we have copied/saved everything required for parsing on later). */
1531:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       len = (u16_t)(ssi->tag_started - hs->file);
1532:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->left -= (ssi->parsed - ssi->tag_started);
1533:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ssi->parsed = ssi->tag_started;
1534:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ssi->tag_started = hs->buf;
1535:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else
1536:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_FILE_READ && !LWIP_HTTPD_SSI_INCLUDE_TAG */
1537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     {
1538:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       len = (u16_t)LWIP_MIN(ssi->parsed - hs->file, 0xffff);
1539:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1540:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 29


1541:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = http_write(pcb, hs->file, &len, HTTP_IS_DATA_VOLATILE(hs));
1542:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err == ERR_OK) {
1543:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       data_to_send = 1;
1544:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->file += len;
1545:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->left -= len;
1546:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1547:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1548:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return data_to_send;
1549:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1550:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
1551:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1552:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
1553:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Try to send more data on this pcb.
1554:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1555:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param pcb the pcb to send data
1556:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs connection state
1557:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1558:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static u8_t
1559:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_send(struct altcp_pcb *pcb, struct http_state *hs)
1560:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1561:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t data_to_send = HTTP_NO_DATA_TO_SEND;
1562:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1563:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_send: pcb=%p hs=%p left=%d\n", (void *)pcb,
1564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               (void *)hs, hs != NULL ? (int)hs->left : 0));
1565:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1566:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST && LWIP_HTTPD_POST_MANUAL_WND
1567:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->unrecved_bytes != 0) {
1568:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
1569:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1570:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST && LWIP_HTTPD_POST_MANUAL_WND */
1571:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1572:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* If we were passed a NULL state structure pointer, ignore the call. */
1573:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs == NULL) {
1574:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
1575:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1576:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1577:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_FS_ASYNC_READ
1578:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Check if we are allowed to read from this file.
1579:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      (e.g. SSI might want to delay sending until data is available) */
1580:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (!fs_is_file_ready(hs->handle, http_continue, hs)) {
1581:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
1582:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1583:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_FS_ASYNC_READ */
1584:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1585:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_HEADERS
1586:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Do we have any more header data to send for this file? */
1587:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->hdr_index < NUM_FILE_HDR_STRINGS) {
1588:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_to_send = http_send_headers(pcb, hs);
1589:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if ((data_to_send == HTTP_DATA_TO_SEND_FREED) ||
1590:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ((data_to_send != HTTP_DATA_TO_SEND_CONTINUE) &&
1591:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          (hs->hdr_index < NUM_FILE_HDR_STRINGS))) {
1592:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return data_to_send;
1593:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1594:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1595:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_HEADERS */
1596:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1597:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Have we run out of file data to send? If so, we need to read the next
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 30


1598:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * block from the file. */
1599:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->left == 0) {
1600:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (!http_check_eof(pcb, hs)) {
1601:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return 0;
1602:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1603:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1604:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1605:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
1606:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->ssi) {
1607:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_to_send = http_send_data_ssi(pcb, hs);
1608:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
1609:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
1610:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {
1611:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_to_send = http_send_data_nonssi(pcb, hs);
1612:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1613:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1614:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((hs->left == 0) && (fs_bytes_left(hs->handle) <= 0)) {
1615:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done.
1616:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * This adds the FIN flag right into the last data segment. */
1617:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("End of file.\n"));
1618:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_eof(pcb, hs);
1619:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
1620:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1621:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("send_data end.\n"));
1622:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return data_to_send;
1623:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1624:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1625:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_EXTSTATUS
1626:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Initialize a http connection with a file to send for an error message
1627:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1628:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs http connection state
1629:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param error_nr HTTP error number
1630:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return ERR_OK if file was found and hs has been initialized correctly
1631:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         another err_t otherwise
1632:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1633:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
1634:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_find_error_file(struct http_state *hs, u16_t error_nr)
1635:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1636:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const char *uri, *uri1, *uri2, *uri3;
1637:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1638:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (error_nr == 501) {
1639:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri1 = "/501.html";
1640:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri2 = "/501.htm";
1641:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri3 = "/501.shtml";
1642:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
1643:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* 400 (bad request is the default) */
1644:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri1 = "/400.html";
1645:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri2 = "/400.htm";
1646:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri3 = "/400.shtml";
1647:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1648:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (fs_open(&hs->file_handle, uri1) == ERR_OK) {
1649:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri = uri1;
1650:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else if (fs_open(&hs->file_handle, uri2) == ERR_OK) {
1651:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri = uri2;
1652:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else if (fs_open(&hs->file_handle, uri3) == ERR_OK) {
1653:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     uri = uri3;
1654:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 31


1655:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Error page for error %"U16_F" not found\n",
1656:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                               error_nr));
1657:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_ARG;
1658:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1659:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return http_init_file(hs, &hs->file_handle, 0, uri, 0, NULL);
1660:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1661:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SUPPORT_EXTSTATUS */
1662:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define http_find_error_file(hs, error_nr) ERR_ARG
1663:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_EXTSTATUS */
1664:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1665:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
1666:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Get the file struct for a 404 error page.
1667:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Tries some file names and returns NULL if none found.
1668:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1669:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param uri pointer that receives the actual file name URI
1670:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return file struct for the error page or NULL no matching file was found
1671:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1672:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static struct fs_file *
1673:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_get_404_file(struct http_state *hs, const char **uri)
1674:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1675:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
1676:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1677:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   *uri = "/404.html";
1678:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err = fs_open(&hs->file_handle, *uri);
1679:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err != ERR_OK) {
1680:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* 404.html doesn't exist. Try 404.htm instead. */
1681:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     *uri = "/404.htm";
1682:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = fs_open(&hs->file_handle, *uri);
1683:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err != ERR_OK) {
1684:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* 404.htm doesn't exist either. Try 404.shtml instead. */
1685:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       *uri = "/404.shtml";
1686:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err = fs_open(&hs->file_handle, *uri);
1687:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (err != ERR_OK) {
1688:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* 404.htm doesn't exist either. Indicate to the caller that it should
1689:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          * send back a default 404 page.
1690:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          */
1691:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         *uri = NULL;
1692:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         return NULL;
1693:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
1694:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1695:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1696:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1697:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return &hs->file_handle;
1698:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1699:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1700:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
1701:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
1702:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_handle_post_finished(struct http_state *hs)
1703:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1704:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_POST_MANUAL_WND
1705:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Prevent multiple calls to httpd_post_finished, since it might have already
1706:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      been called before from httpd_post_data_recved(). */
1707:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->post_finished) {
1708:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
1709:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1710:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->post_finished = 1;
1711:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_POST_MANUAL_WND */
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 32


1712:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* application error or POST finished */
1713:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* NULL-terminate the buffer */
1714:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   http_uri_buf[0] = 0;
1715:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   httpd_post_finished(hs, http_uri_buf, LWIP_HTTPD_URI_BUF_LEN);
1716:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return http_find_file(hs, http_uri_buf, 0);
1717:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1718:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1719:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Pass received POST body data to the application and correctly handle
1720:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * returning a response document or closing the connection.
1721:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * ATTENTION: The application is responsible for the pbuf now, so don't free it!
1722:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1723:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs http connection state
1724:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param p pbuf to pass to the application
1725:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return ERR_OK if passed successfully, another err_t if the response file
1726:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         hasn't been found (after POST finished)
1727:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1728:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
1729:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_post_rxpbuf(struct http_state *hs, struct pbuf *p)
1730:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1731:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
1732:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1733:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (p != NULL) {
1734:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* adjust remaining Content-Length */
1735:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->post_content_len_left < p->tot_len) {
1736:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->post_content_len_left = 0;
1737:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else {
1738:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->post_content_len_left -= p->tot_len;
1739:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1740:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1741:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST && LWIP_HTTPD_POST_MANUAL_WND
1742:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* prevent connection being closed if httpd_post_data_recved() is called nested */
1743:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->unrecved_bytes++;
1744:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
1745:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (p != NULL) {
1746:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = httpd_post_receive_data(hs, p);
1747:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
1748:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = ERR_OK;
1749:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1750:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST && LWIP_HTTPD_POST_MANUAL_WND
1751:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->unrecved_bytes--;
1752:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
1753:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err != ERR_OK) {
1754:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Ignore remaining content in case of application error */
1755:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->post_content_len_left = 0;
1756:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1757:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->post_content_len_left == 0) {
1758:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST && LWIP_HTTPD_POST_MANUAL_WND
1759:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->unrecved_bytes != 0) {
1760:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return ERR_OK;
1761:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1762:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST && LWIP_HTTPD_POST_MANUAL_WND */
1763:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* application error or POST finished */
1764:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return http_handle_post_finished(hs);
1765:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1766:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1767:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ERR_OK;
1768:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 33


1769:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1770:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Handle a post request. Called from http_parse_request when method 'POST'
1771:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * is found.
1772:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1773:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param p The input pbuf (containing the POST header and body).
1774:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs The http connection state.
1775:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param data HTTP request (header and part of body) from input pbuf(s).
1776:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param data_len Size of 'data'.
1777:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param uri The HTTP URI parsed from input pbuf(s).
1778:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param uri_end Pointer to the end of 'uri' (here, the rest of the HTTP
1779:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *                header starts).
1780:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return ERR_OK: POST correctly parsed and accepted by the application.
1781:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         ERR_INPROGRESS: POST not completely parsed (no error yet)
1782:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         another err_t: Error parsing POST or denied by the application
1783:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1784:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
1785:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_post_request(struct pbuf *inp, struct http_state *hs,
1786:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   char *data, u16_t data_len, char *uri, char *uri_end)
1787:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1788:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
1789:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* search for end-of-header (first double-CRLF) */
1790:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *crlfcrlf = lwip_strnstr(uri_end + 1, CRLF CRLF, data_len - (uri_end + 1 - data));
1791:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1792:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (crlfcrlf != NULL) {
1793:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* search for "Content-Length: " */
1794:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_HDR_CONTENT_LEN                "Content-Length: "
1795:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_HDR_CONTENT_LEN_LEN            16
1796:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #define HTTP_HDR_CONTENT_LEN_DIGIT_MAX_LEN  10
1797:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     char *scontent_len = lwip_strnstr(uri_end + 1, HTTP_HDR_CONTENT_LEN, crlfcrlf - (uri_end + 1));
1798:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (scontent_len != NULL) {
1799:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       char *scontent_len_end = lwip_strnstr(scontent_len + HTTP_HDR_CONTENT_LEN_LEN, CRLF, HTTP_HDR
1800:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (scontent_len_end != NULL) {
1801:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         int content_len;
1802:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         char *content_len_num = scontent_len + HTTP_HDR_CONTENT_LEN_LEN;
1803:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         content_len = atoi(content_len_num);
1804:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (content_len == 0) {
1805:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* if atoi returns 0 on error, fix this */
1806:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if ((content_len_num[0] != '0') || (content_len_num[1] != '\r')) {
1807:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             content_len = -1;
1808:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1809:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1810:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (content_len >= 0) {
1811:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* adjust length of HTTP header passed to application */
1812:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           const char *hdr_start_after_uri = uri_end + 1;
1813:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           u16_t hdr_len = (u16_t)LWIP_MIN(data_len, crlfcrlf + 4 - data);
1814:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           u16_t hdr_data_len = (u16_t)LWIP_MIN(data_len, crlfcrlf + 4 - hdr_start_after_uri);
1815:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           u8_t post_auto_wnd = 1;
1816:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_uri_buf[0] = 0;
1817:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* trim http header */
1818:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           *crlfcrlf = 0;
1819:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           err = httpd_post_begin(hs, uri, hdr_start_after_uri, hdr_data_len, content_len,
1820:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                  http_uri_buf, LWIP_HTTPD_URI_BUF_LEN, &post_auto_wnd);
1821:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (err == ERR_OK) {
1822:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* try to pass in data of the first pbuf(s) */
1823:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             struct pbuf *q = inp;
1824:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             u16_t start_offset = hdr_len;
1825:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_POST_MANUAL_WND
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 34


1826:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             hs->no_auto_wnd = !post_auto_wnd;
1827:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_POST_MANUAL_WND */
1828:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* set the Content-Length to be received for this POST */
1829:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             hs->post_content_len_left = (u32_t)content_len;
1830:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1831:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* get to the pbuf where the body starts */
1832:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             while ((q != NULL) && (q->len <= start_offset)) {
1833:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               start_offset -= q->len;
1834:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               q = q->next;
1835:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
1836:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (q != NULL) {
1837:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               /* hide the remaining HTTP header */
1838:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               pbuf_remove_header(q, start_offset);
1839:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_POST_MANUAL_WND
1840:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               if (!post_auto_wnd) {
1841:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 /* already tcp_recved() this data... */
1842:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 hs->unrecved_bytes = q->tot_len;
1843:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               }
1844:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_POST_MANUAL_WND */
1845:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               pbuf_ref(q);
1846:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               return http_post_rxpbuf(hs, q);
1847:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             } else if (hs->post_content_len_left == 0) {
1848:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               q = pbuf_alloc(PBUF_RAW, 0, PBUF_REF);
1849:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               return http_post_rxpbuf(hs, q);
1850:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             } else {
1851:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               return ERR_OK;
1852:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
1853:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           } else {
1854:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             /* return file passed from application */
1855:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             return http_find_file(hs, http_uri_buf, 0);
1856:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
1857:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         } else {
1858:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           LWIP_DEBUGF(HTTPD_DEBUG, ("POST received invalid Content-Length: %s\n",
1859:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                     content_len_num));
1860:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           return ERR_ARG;
1861:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1862:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
1863:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1864:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* If we come here, headers are fully received (double-crlf), but Content-Length
1865:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        was not included. Since this is currently the only supported method, we have
1866:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        to fail in this case! */
1867:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Error when parsing Content-Length\n"));
1868:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_ARG;
1869:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1870:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* if we come here, the POST is incomplete */
1871:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
1872:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ERR_INPROGRESS;
1873:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
1874:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ERR_ARG;
1875:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
1876:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1877:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1878:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_POST_MANUAL_WND
1879:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
1880:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @ingroup httpd
1881:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * A POST implementation can call this function to update the TCP window.
1882:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * This can be used to throttle data reception (e.g. when received data is
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 35


1883:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * programmed to flash and data is received faster than programmed).
1884:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1885:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param connection A connection handle passed to httpd_post_begin for which
1886:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *        httpd_post_finished has *NOT* been called yet!
1887:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param recved_len Length of data received (for window update)
1888:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1889:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** void httpd_post_data_recved(void *connection, u16_t recved_len)
1890:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1891:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)connection;
1892:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs != NULL) {
1893:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->no_auto_wnd) {
1894:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       u16_t len = recved_len;
1895:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (hs->unrecved_bytes >= recved_len) {
1896:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->unrecved_bytes -= recved_len;
1897:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else {
1898:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_LEVEL_WARNING, ("httpd_post_data_recved: recved_len too 
1899:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         len = (u16_t)hs->unrecved_bytes;
1900:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->unrecved_bytes = 0;
1901:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
1902:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (hs->pcb != NULL) {
1903:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (len != 0) {
1904:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           altcp_recved(hs->pcb, len);
1905:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1906:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if ((hs->post_content_len_left == 0) && (hs->unrecved_bytes == 0)) {
1907:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* finished handling POST */
1908:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_handle_post_finished(hs);
1909:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_send(hs->pcb, hs);
1910:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
1911:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
1912:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1913:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1914:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1915:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_POST_MANUAL_WND */
1916:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1917:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
1918:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1919:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_FS_ASYNC_READ
1920:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Try to send more data if file has been blocked before
1921:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * This is a callback function passed to fs_read_async().
1922:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1923:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
1924:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_continue(void *connection)
1925:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1926:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)connection;
1927:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT_CORE_LOCKED();
1928:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs && (hs->pcb) && (hs->handle)) {
1929:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("hs->pcb != NULL", hs->pcb != NULL);
1930:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("httpd_continue: try to send more data\n"));
1931:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (http_send(hs->pcb, hs)) {
1932:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* If we wrote anything to be sent, go ahead and send it now. */
1933:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("tcp_output\n"));
1934:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       altcp_output(hs->pcb);
1935:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
1936:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1937:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
1938:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_FS_ASYNC_READ */
1939:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 36


1940:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
1941:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * When data has been received in the correct state, try to parse it
1942:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * as a HTTP request.
1943:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
1944:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param inp the received pbuf
1945:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs the connection state
1946:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param pcb the altcp_pcb which received this packet
1947:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return ERR_OK if request was OK and hs has been initialized correctly
1948:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         ERR_INPROGRESS if request was OK so far but not fully received
1949:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         another err_t otherwise
1950:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
1951:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
1952:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_parse_request(struct pbuf *inp, struct http_state *hs, struct altcp_pcb *pcb)
1953:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
1954:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *data;
1955:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *crlf;
1956:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t data_len;
1957:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct pbuf *p = inp;
1958:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
1959:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t clen;
1960:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
1961:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
1962:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
1963:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
1964:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1965:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(pcb); /* only used for post */
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("p != NULL", p != NULL);
1967:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
1968:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1969:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((hs->handle != NULL) || (hs->file != NULL)) {
1970:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Received data while sending a file\n"));
1971:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* already sending a file */
1972:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* @todo: abort? */
1973:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_USE;
1974:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1975:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1976:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
1977:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1978:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("Received %"U16_F" bytes\n", p->tot_len));
1979:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1980:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* first check allowed characters in this pbuf? */
1981:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1982:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* enqueue the pbuf */
1983:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->req == NULL) {
1984:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("First pbuf\n"));
1985:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->req = p;
1986:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
1987:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("pbuf enqueued\n"));
1988:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_cat(hs->req, p);
1989:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
1990:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* increase pbuf ref counter as it is freed when we return but we want to
1991:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      keep it on the req list */
1992:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   pbuf_ref(p);
1993:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
1994:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->req->next != NULL) {
1995:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_len = LWIP_MIN(hs->req->tot_len, LWIP_HTTPD_MAX_REQ_LENGTH);
1996:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_copy_partial(hs->req, httpd_req_buf, data_len, 0);
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 37


1997:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data = httpd_req_buf;
1998:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
1999:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
2000:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {
2001:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data = (char *)p->payload;
2002:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_len = p->len;
2003:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (p->len != p->tot_len) {
2004:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG, ("Warning: incomplete header due to chained pbufs\n"));
2005:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2006:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2007:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2008:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* received enough data for minimal request? */
2009:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (data_len >= MIN_REQ_LEN) {
2010:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* wait for CRLF before parsing anything */
2011:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     crlf = lwip_strnstr(data, CRLF, data_len);
2012:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (crlf != NULL) {
2013:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
2014:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       int is_post = 0;
2015:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
2016:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       int is_09 = 0;
2017:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       char *sp1, *sp2;
2018:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       u16_t left_len, uri_len;
2019:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("CRLF received, parsing request\n"));
2020:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* parse method */
2021:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (!strncmp(data, "GET ", 4)) {
2022:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         sp1 = data + 3;
2023:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* received GET request */
2024:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Received GET request\"\n"));
2025:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
2026:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else if (!strncmp(data, "POST ", 5)) {
2027:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* store request type */
2028:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         is_post = 1;
2029:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         sp1 = data + 4;
2030:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* received GET request */
2031:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Received POST request\n"));
2032:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
2033:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else {
2034:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* null-terminate the METHOD (pbuf is freed anyway wen returning) */
2035:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         data[4] = 0;
2036:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* unsupported method! */
2037:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         LWIP_DEBUGF(HTTPD_DEBUG, ("Unsupported request method (not implemented): \"%s\"\n",
2038:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                   data));
2039:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         return http_find_error_file(hs, 501);
2040:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2041:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* if we come here, method is OK, parse URI */
2042:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       left_len = (u16_t)(data_len - ((sp1 + 1) - data));
2043:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       sp2 = lwip_strnstr(sp1 + 1, " ", left_len);
2044:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_V09
2045:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (sp2 == NULL) {
2046:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* HTTP 0.9: respond with correct protocol version */
2047:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         sp2 = lwip_strnstr(sp1 + 1, CRLF, left_len);
2048:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         is_09 = 1;
2049:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
2050:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (is_post) {
2051:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* HTTP/0.9 does not support POST */
2052:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           goto badrequest;
2053:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 38


2054:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
2055:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2056:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_V09 */
2057:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       uri_len = (u16_t)(sp2 - (sp1 + 1));
2058:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if ((sp2 != 0) && (sp2 > sp1)) {
2059:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* wait for CRLFCRLF (indicating end of HTTP headers) before parsing anything */
2060:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (lwip_strnstr(data, CRLF CRLF, data_len) != NULL) {
2061:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           char *uri = sp1 + 1;
2062:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
2063:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* This is HTTP/1.0 compatible: for strict 1.1, a connection
2064:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****              would always be persistent unless "close" was specified. */
2065:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (!is_09 && (lwip_strnstr(data, HTTP11_CONNECTIONKEEPALIVE, data_len) ||
2066:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                          lwip_strnstr(data, HTTP11_CONNECTIONKEEPALIVE2, data_len))) {
2067:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             hs->keepalive = 1;
2068:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           } else {
2069:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             hs->keepalive = 0;
2070:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
2071:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_11_KEEPALIVE */
2072:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /* null-terminate the METHOD (pbuf is freed anyway wen returning) */
2073:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           *sp1 = 0;
2074:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           uri[uri_len] = 0;
2075:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           LWIP_DEBUGF(HTTPD_DEBUG, ("Received \"%s\" request for URI: \"%s\"\n",
2076:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                     data, uri));
2077:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
2078:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           if (is_post) {
2079:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
2080:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             struct pbuf *q = hs->req;
2081:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
2082:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             struct pbuf *q = inp;
2083:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
2084:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             err = http_post_request(q, hs, data, data_len, uri, sp2);
2085:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (err != ERR_OK) {
2086:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               /* restore header for next try */
2087:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               *sp1 = ' ';
2088:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               *sp2 = ' ';
2089:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               uri[uri_len] = ' ';
2090:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
2091:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             if (err == ERR_ARG) {
2092:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               goto badrequest;
2093:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             }
2094:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             return err;
2095:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           } else
2096:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
2097:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           {
2098:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****             return http_find_file(hs, uri, is_09);
2099:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
2100:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
2101:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else {
2102:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         LWIP_DEBUGF(HTTPD_DEBUG, ("invalid URI\n"));
2103:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2104:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2105:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2106:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2107:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
2108:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   clen = pbuf_clen(hs->req);
2109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((hs->req->tot_len <= LWIP_HTTPD_REQ_BUFSIZE) &&
2110:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       (clen <= LWIP_HTTPD_REQ_QUEUELEN)) {
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 39


2111:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* request not fully received (too short or CRLF is missing) */
2112:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_INPROGRESS;
2113:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
2114:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
2115:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {
2116:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
2117:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** badrequest:
2118:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
2119:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("bad request\n"));
2120:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* could not parse request */
2121:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return http_find_error_file(hs, 400);
2122:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2123:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
2124:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2125:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI && (LWIP_HTTPD_SSI_BY_FILE_EXTENSION == 1)
2126:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /* Check if SSI should be parsed for this file/URL
2127:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * (With LWIP_HTTPD_SSI_BY_FILE_EXTENSION == 2, this function can be
2128:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * overridden by an external implementation.)
2129:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
2130:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return 1 for SSI, 0 for standard files
2131:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2132:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static u8_t
2133:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_uri_is_ssi(struct fs_file *file, const char *uri)
2134:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
2135:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   size_t loop;
2136:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t tag_check = 0;
2137:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (file != NULL) {
2138:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* See if we have been asked for an shtml file and, if so,
2139:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         enable tag checking. */
2140:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     const char *ext = NULL, *sub;
2141:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     char *param = (char *)strstr(uri, "?");
2142:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (param != NULL) {
2143:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* separate uri from parameters for now, set back later */
2144:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       *param = 0;
2145:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2146:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     sub = uri;
2147:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     ext = uri;
2148:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     for (sub = strstr(sub, "."); sub != NULL; sub = strstr(sub, ".")) {
2149:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ext = sub;
2150:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       sub++;
2151:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2152:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     for (loop = 0; loop < NUM_SHTML_EXTENSIONS; loop++) {
2153:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (!lwip_stricmp(ext, g_pcSSIExtensions[loop])) {
2154:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         tag_check = 1;
2155:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         break;
2156:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2157:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2158:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (param != NULL) {
2159:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       *param = '?';
2160:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2161:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2162:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return tag_check;
2163:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
2164:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
2165:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2166:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Try to find the file specified by uri and, if found, initialize hs
2167:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * accordingly.
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 40


2168:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
2169:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs the connection state
2170:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param uri the HTTP header URI
2171:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param is_09 1 if the request is HTTP/0.9 (no HTTP headers in response)
2172:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return ERR_OK if file was found and hs has been initialized correctly
2173:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         another err_t otherwise
2174:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2175:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
2176:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_find_file(struct http_state *hs, const char *uri, int is_09)
2177:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
2178:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   size_t loop;
2179:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct fs_file *file = NULL;
2180:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *params = NULL;
2181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
2182:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI
2183:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int i;
2184:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_CGI */
2185:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SSI
2186:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   const
2187:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI */
2188:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* By default, assume we will not be processing server-side-includes tags */
2189:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t tag_check = 0;
2190:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2191:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Have we been asked for the default file (in root or a directory) ? */
2192:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_MAX_REQUEST_URI_LEN
2193:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   size_t uri_len = strlen(uri);
2194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((uri_len > 0) && (uri[uri_len - 1] == '/') &&
2195:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ((uri != http_uri_buf) || (uri_len == 1))) {
2196:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     size_t copy_len = LWIP_MIN(sizeof(http_uri_buf) - 1, uri_len - 1);
2197:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (copy_len > 0) {
2198:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       MEMCPY(http_uri_buf, uri, copy_len);
2199:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_uri_buf[copy_len] = 0;
2200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2201:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_MAX_REQUEST_URI_LEN */
2202:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((uri[0] == '/') &&  (uri[1] == 0)) {
2203:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_MAX_REQUEST_URI_LEN */
2204:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Try each of the configured default filenames until we find one
2205:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****        that exists. */
2206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     for (loop = 0; loop < NUM_DEFAULT_FILENAMES; loop++) {
2207:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       const char *file_name;
2208:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_MAX_REQUEST_URI_LEN
2209:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (copy_len > 0) {
2210:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         size_t len_left = sizeof(http_uri_buf) - copy_len - 1;
2211:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (len_left > 0) {
2212:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           size_t name_len = strlen(httpd_default_filenames[loop].name);
2213:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           size_t name_copy_len = LWIP_MIN(len_left, name_len);
2214:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           MEMCPY(&http_uri_buf[copy_len], httpd_default_filenames[loop].name, name_copy_len);
2215:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_uri_buf[copy_len + name_copy_len] = 0;
2216:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
2217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         file_name = http_uri_buf;
2218:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else
2219:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_MAX_REQUEST_URI_LEN */
2220:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       {
2221:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         file_name = httpd_default_filenames[loop].name;
2222:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2223:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Looking for %s...\n", file_name));
2224:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err = fs_open(&hs->file_handle, file_name);
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 41


2225:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (err == ERR_OK) {
2226:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         uri = file_name;
2227:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         file = &hs->file_handle;
2228:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Opened.\n"));
2229:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
2230:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         tag_check = httpd_default_filenames[loop].shtml;
2231:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
2232:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         break;
2233:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2234:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2235:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2236:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (file == NULL) {
2237:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* No - we've been asked for a specific file. */
2238:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* First, isolate the base URI (without any parameters) */
2239:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     params = (char *)strchr(uri, '?');
2240:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (params != NULL) {
2241:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* URI contains parameters. NULL-terminate the base URI */
2242:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       *params = '\0';
2243:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       params++;
2244:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2245:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2246:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI
2247:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_cgi_paramcount = -1;
2248:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Does the base URI we have isolated correspond to a CGI handler? */
2249:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (httpd_num_cgis && httpd_cgis) {
2250:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       for (i = 0; i < httpd_num_cgis; i++) {
2251:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (strcmp(uri, httpd_cgis[i].pcCGIName) == 0) {
2252:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           /*
2253:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****            * We found a CGI that handles this URI so extract the
2254:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****            * parameters and call the handler.
2255:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****            */
2256:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_cgi_paramcount = extract_uri_parameters(hs, params);
2257:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           uri = httpd_cgis[i].pfnCGIHandler(i, http_cgi_paramcount, hs->params,
2258:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                                          hs->param_vals);
2259:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           break;
2260:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
2261:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2262:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2263:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_CGI */
2264:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2265:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Opening %s\n", uri));
2266:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2267:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = fs_open(&hs->file_handle, uri);
2268:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err == ERR_OK) {
2269:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       file = &hs->file_handle;
2270:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else {
2271:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       file = http_get_404_file(hs, &uri);
2272:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2273:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
2274:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (file != NULL) {
2275:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (file->flags & FS_FILE_FLAGS_SSI) {
2276:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         tag_check = 1;
2277:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else {
2278:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI_BY_FILE_EXTENSION
2279:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         tag_check = http_uri_is_ssi(file, uri);
2280:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI_BY_FILE_EXTENSION */
2281:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 42


2282:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2283:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
2284:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2285:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (file == NULL) {
2286:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* None of the default filenames exist so send back a 404 page */
2287:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     file = http_get_404_file(hs, &uri);
2288:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2289:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return http_init_file(hs, file, is_09, uri, tag_check, params);
2290:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
2291:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2292:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /** Initialize a http connection with a file to send (if found).
2293:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Called by http_find_file and http_find_error_file.
2294:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
2295:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param hs http connection state
2296:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param file file structure to send (or NULL if not found)
2297:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param is_09 1 if the request is HTTP/0.9 (no HTTP headers in response)
2298:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param uri the HTTP header URI
2299:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param tag_check enable SSI tag checking
2300:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @param params != NULL if URI has parameters (separated by '?')
2301:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @return ERR_OK if file was found and hs has been initialized correctly
2302:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *         another err_t otherwise
2303:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2304:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
2305:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_init_file(struct http_state *hs, struct fs_file *file, int is_09, const char *uri,
2306:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                u8_t tag_check, char *params)
2307:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
2308:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SUPPORT_V09
2309:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(is_09);
2310:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
2311:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (file != NULL) {
2312:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* file opened, initialise struct http_state */
2313:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_DYNAMIC_FILE_READ
2314:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* If dynamic read is disabled, file data must be in one piece and available now */
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("file->data != NULL", file->data != NULL);
2316:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
2317:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2318:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
2319:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (tag_check) {
2320:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       struct http_ssi_state *ssi = http_ssi_state_alloc();
2321:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (ssi != NULL) {
2322:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->tag_index = 0;
2323:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->tag_state = TAG_NONE;
2324:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->parsed = file->data;
2325:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->parse_left = file->len;
2326:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         ssi->tag_end = file->data;
2327:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->ssi = ssi;
2328:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2329:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2330:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_SSI */
2331:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(tag_check);
2332:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
2333:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->handle = file;
2334:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI_SSI
2335:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (params != NULL) {
2336:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* URI contains parameters, call generic CGI handler */
2337:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       int count;
2338:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 43


2339:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (http_cgi_paramcount >= 0) {
2340:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         count = http_cgi_paramcount;
2341:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else
2342:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
2343:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       {
2344:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         count = extract_uri_parameters(hs, params);
2345:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2346:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       httpd_cgi_handler(file, uri, count, http_cgi_params, http_cgi_param_vals
2347:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if defined(LWIP_HTTPD_FILE_STATE) && LWIP_HTTPD_FILE_STATE
2348:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                         , file->state
2349:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_FILE_STATE */
2350:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                        );
2351:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2352:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_CGI_SSI */
2353:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(params);
2354:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_CGI_SSI */
2355:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->file = file->data;
2356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("File length must be positive!", (file->len >= 0));
2357:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CUSTOM_FILES
2358:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (file->is_custom_file && (file->data == NULL)) {
2359:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* custom file, need to read data first (via fs_read_custom) */
2360:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->left = 0;
2361:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else
2362:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_CUSTOM_FILES */
2363:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     {
2364:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->left = (u32_t)file->len;
2365:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2366:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->retries = 0;
2367:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
2368:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->time_started = sys_now();
2369:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_TIMING */
2370:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_DYNAMIC_HEADERS
2371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("HTTP headers not included in file system",
2372:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 (hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) != 0);
2373:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_DYNAMIC_HEADERS */
2374:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_V09
2375:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (is_09 && ((hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) != 0)) {
2376:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* HTTP/0.9 responses are sent without HTTP header,
2377:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****          search for the end of the header. */
2378:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       char *file_start = lwip_strnstr(hs->file, CRLF CRLF, hs->left);
2379:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (file_start != NULL) {
2380:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         int diff = file_start + 4 - hs->file;
2381:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->file += diff;
2382:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->left -= (u32_t)diff;
2383:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2384:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2385:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_V09*/
2386:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
2387:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->handle = NULL;
2388:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->file = NULL;
2389:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->left = 0;
2390:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->retries = 0;
2391:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2392:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_HEADERS
2393:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Determine the HTTP headers to send based on the file extension of
2394:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****    * the requested URI. */
2395:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((hs->handle == NULL) || ((hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) == 0)) {
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 44


2396:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     get_http_headers(hs, uri);
2397:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2398:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #else /* LWIP_HTTPD_DYNAMIC_HEADERS */
2399:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(uri);
2400:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_HEADERS */
2401:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
2402:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->keepalive) {
2403:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
2404:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->ssi != NULL) {
2405:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       hs->keepalive = 0;
2406:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else
2407:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
2408:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     {
2409:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if ((hs->handle != NULL) &&
2410:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           ((hs->handle->flags & (FS_FILE_FLAGS_HEADER_INCLUDED | FS_FILE_FLAGS_HEADER_PERSISTENT)) 
2411:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->keepalive = 0;
2412:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2413:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2414:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2415:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_11_KEEPALIVE */
2416:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ERR_OK;
2417:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
2418:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2419:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
2420:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The pcb had an error and is already deallocated.
2421:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The argument might still be valid (if != NULL).
2422:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2423:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
2424:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_err(void *arg, err_t err)
2425:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
2426:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
2427:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(err);
2428:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2429:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("http_err: %s", lwip_strerr(err)));
2430:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2431:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs != NULL) {
2432:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_free(hs);
2433:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2434:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
2435:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2436:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
2437:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Data has been sent and acknowledged by the remote host.
2438:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * This means that more data can be sent.
2439:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2440:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
2441:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_sent(void *arg, struct altcp_pcb *pcb, u16_t len)
2442:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
2443:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
2444:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2445:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_sent %p\n", (void *)pcb));
2446:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2447:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(len);
2448:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2449:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs == NULL) {
2450:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
2451:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2452:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 45


2453:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->retries = 0;
2454:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2455:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   http_send(pcb, hs);
2456:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2457:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ERR_OK;
2458:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
2459:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2460:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
2461:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * The poll function is called every 2nd second.
2462:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * If there has been no data sent (which resets the retries) in 8 seconds, close.
2463:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * If the last portion of a file has not been sent in 2 seconds, close.
2464:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  *
2465:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * This could be increased, but we don't want to waste resources for bad connections.
2466:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2467:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
2468:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_poll(void *arg, struct altcp_pcb *pcb)
2469:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
2470:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
2471:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_poll: pcb=%p hs=%p pcb_state=%s\n",
2472:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               (void *)pcb, (void *)hs, tcp_debug_state_str(altcp_dbg_get_tcp_state(pcb))));
2473:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2474:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs == NULL) {
2475:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err_t closed;
2476:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* arg is null, close. */
2477:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("http_poll: arg is NULL, close\n"));
2478:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     closed = http_close_conn(pcb, NULL);
2479:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(closed);
2480:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_ABORT_ON_CLOSE_MEM_ERROR
2481:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (closed == ERR_MEM) {
2482:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       altcp_abort(pcb);
2483:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return ERR_ABRT;
2484:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2485:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_ABORT_ON_CLOSE_MEM_ERROR */
2486:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
2487:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
2488:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->retries++;
2489:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->retries == HTTPD_MAX_RETRIES) {
2490:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG, ("http_poll: too many retries, close\n"));
2491:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_close_conn(pcb, hs);
2492:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return ERR_OK;
2493:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2494:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2495:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* If this connection has a file open, try to send some more data. If
2496:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * it has not yet received a GET request, don't do this since it will
2497:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      * cause the connection to close immediately. */
2498:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->handle) {
2499:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_poll: try to send more data\n"));
2500:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (http_send(pcb, hs)) {
2501:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* If we wrote anything to be sent, go ahead and send it now. */
2502:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("tcp_output\n"));
2503:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         altcp_output(pcb);
2504:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2505:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2506:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2507:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2508:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ERR_OK;
2509:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 46


2510:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2511:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
2512:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Data has been received on this pcb.
2513:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * For HTTP 1.0, this should normally only happen once (if the request fits in one packet).
2514:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2515:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
2516:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_recv(void *arg, struct altcp_pcb *pcb, struct pbuf *p, err_t err)
2517:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
2518:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
2519:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_recv: pcb=%p pbuf=%p err=%s\n", (void *)pcb,
2520:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****               (void *)p, lwip_strerr(err)));
2521:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((err != ERR_OK) || (p == NULL) || (hs == NULL)) {
2523:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error or closed by other side? */
2524:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (p != NULL) {
2525:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* Inform TCP that we have taken the data. */
2526:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       altcp_recved(pcb, p->tot_len);
2527:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pbuf_free(p);
2528:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2529:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs == NULL) {
2530:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* this should not happen, only to be robust */
2531:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG, ("Error, http_recv: hs is NULL, close\n"));
2532:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2533:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_close_conn(pcb, hs);
2534:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
2535:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2536:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST && LWIP_HTTPD_POST_MANUAL_WND
2538:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->no_auto_wnd) {
2539:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->unrecved_bytes += p->tot_len;
2540:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
2541:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST && LWIP_HTTPD_POST_MANUAL_WND */
2542:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {
2543:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* Inform TCP that we have taken the data. */
2544:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_recved(pcb, p->tot_len);
2545:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2546:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2547:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
2548:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->post_content_len_left > 0) {
2549:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* reset idle counter when POST data is received */
2550:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->retries = 0;
2551:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* this is data for a POST, pass the complete pbuf to the application */
2552:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_post_rxpbuf(hs, p);
2553:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* pbuf is passed to the application, don't free it! */
2554:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->post_content_len_left == 0) {
2555:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* all data received, send response or close connection */
2556:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_send(pcb, hs);
2557:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2558:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
2559:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
2560:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
2561:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   {
2562:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->handle == NULL) {
2563:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err_t parsed = http_parse_request(p, hs, pcb);
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_ASSERT("http_parse_request: unexpected return value", parsed == ERR_OK
2565:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
2566:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 47


2567:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (parsed != ERR_INPROGRESS) {
2568:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* request fully parsed or error */
2569:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (hs->req != NULL) {
2570:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           pbuf_free(hs->req);
2571:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           hs->req = NULL;
2572:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
2573:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2574:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
2575:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pbuf_free(p);
2576:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (parsed == ERR_OK) {
2577:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
2578:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (hs->post_content_len_left == 0)
2579:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_POST */
2580:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         {
2581:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_recv: data %p len %"S32_F"\n", (const vo
2582:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_send(pcb, hs);
2583:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
2584:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else if (parsed == ERR_ARG) {
2585:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* @todo: close on ERR_USE? */
2586:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         http_close_conn(pcb, hs);
2587:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
2588:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     } else {
2589:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG, ("http_recv: already sending data\n"));
2590:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* already sending but still receiving data, we might want to RST here? */
2591:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pbuf_free(p);
2592:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
2593:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2594:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ERR_OK;
2595:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
2596:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2597:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
2598:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * A new incoming connection has been accepted.
2599:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2600:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static err_t
2601:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** http_accept(void *arg, struct altcp_pcb *pcb, err_t err)
2602:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
2603:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs;
2604:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(err);
2605:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(arg);
2606:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("http_accept %p / %p\n", (void *)pcb, arg));
2607:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2608:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((err != ERR_OK) || (pcb == NULL)) {
2609:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_VAL;
2610:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2611:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2612:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Set priority */
2613:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_setprio(pcb, HTTPD_TCP_PRIO);
2614:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2615:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Allocate memory for the structure that holds the state of the
2616:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      connection - initialized by that function. */
2617:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs = http_state_alloc();
2618:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs == NULL) {
2619:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("http_accept: Out of memory, RST\n"));
2620:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_MEM;
2621:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2622:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   hs->pcb = pcb;
2623:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 48


2624:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Tell TCP that this is the structure we wish to be passed for our
2625:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****      callbacks. */
2626:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_arg(pcb, hs);
2627:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2628:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Set up the various callback functions */
2629:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_recv(pcb, http_recv);
2630:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_err(pcb, http_err);
2631:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_poll(pcb, http_poll, HTTPD_POLL_INTERVAL);
2632:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_sent(pcb, http_sent);
2633:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2634:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return ERR_OK;
2635:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
2636:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2637:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** static void
2638:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** httpd_init_pcb(struct altcp_pcb *pcb, u16_t port)
2639:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
  42              		.loc 1 2639 1 view -0
  43              		.cfi_startproc
  44              		@ args = 0, pretend = 0, frame = 0
  45              		@ frame_needed = 0, uses_anonymous_args = 0
2640:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
  46              		.loc 1 2640 3 view .LVU1
2641:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2642:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (pcb) {
  47              		.loc 1 2642 3 view .LVU2
  48              		.loc 1 2642 6 is_stmt 0 view .LVU3
  49 0000 30B3     		cbz	r0, .L6
2639:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
  50              		.loc 1 2639 1 view .LVU4
  51 0002 38B5     		push	{r3, r4, r5, lr}
  52              	.LCFI0:
  53              		.cfi_def_cfa_offset 16
  54              		.cfi_offset 3, -16
  55              		.cfi_offset 4, -12
  56              		.cfi_offset 5, -8
  57              		.cfi_offset 14, -4
  58 0004 0C46     		mov	r4, r1
  59 0006 0546     		mov	r5, r0
2643:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_setprio(pcb, HTTPD_TCP_PRIO);
  60              		.loc 1 2643 5 is_stmt 1 view .LVU5
  61 0008 0121     		movs	r1, #1
  62              	.LVL1:
  63              		.loc 1 2643 5 is_stmt 0 view .LVU6
  64 000a FFF7FEFF 		bl	tcp_setprio
  65              	.LVL2:
2644:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* set SOF_REUSEADDR here to explicitly bind httpd to multiple interfaces */
2645:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = altcp_bind(pcb, IP_ANY_TYPE, port);
  66              		.loc 1 2645 5 is_stmt 1 view .LVU7
  67              		.loc 1 2645 11 is_stmt 0 view .LVU8
  68 000e 2246     		mov	r2, r4
  69 0010 1049     		ldr	r1, .L11
  70 0012 2846     		mov	r0, r5
  71 0014 FFF7FEFF 		bl	tcp_bind
  72              	.LVL3:
2646:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(err); /* in case of LWIP_NOASSERT */
  73              		.loc 1 2646 5 is_stmt 1 view .LVU9
2647:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("httpd_init: tcp_bind failed", err == ERR_OK);
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 49


  74              		.loc 1 2647 5 view .LVU10
  75              		.loc 1 2647 5 view .LVU11
  76 0018 50B9     		cbnz	r0, .L9
  77              	.LVL4:
  78              	.L3:
  79              		.loc 1 2647 5 discriminator 3 view .LVU12
  80              		.loc 1 2647 5 discriminator 3 view .LVU13
2648:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pcb = altcp_listen(pcb);
  81              		.loc 1 2648 5 discriminator 3 view .LVU14
  82              		.loc 1 2648 11 is_stmt 0 discriminator 3 view .LVU15
  83 001a FF21     		movs	r1, #255
  84 001c 2846     		mov	r0, r5
  85 001e FFF7FEFF 		bl	tcp_listen_with_backlog
  86              	.LVL5:
2649:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("httpd_init: tcp_listen failed", pcb != NULL);
  87              		.loc 1 2649 5 is_stmt 1 discriminator 3 view .LVU16
  88              		.loc 1 2649 5 discriminator 3 view .LVU17
  89 0022 0446     		mov	r4, r0
  90 0024 60B1     		cbz	r0, .L10
  91              	.LVL6:
  92              	.L4:
  93              		.loc 1 2649 5 discriminator 3 view .LVU18
  94              		.loc 1 2649 5 discriminator 3 view .LVU19
2650:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_accept(pcb, http_accept);
  95              		.loc 1 2650 5 discriminator 3 view .LVU20
  96 0026 0C49     		ldr	r1, .L11+4
  97 0028 2046     		mov	r0, r4
  98 002a FFF7FEFF 		bl	tcp_accept
  99              	.LVL7:
2651:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
2652:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 100              		.loc 1 2652 1 is_stmt 0 discriminator 3 view .LVU21
 101 002e 38BD     		pop	{r3, r4, r5, pc}
 102              	.LVL8:
 103              	.L9:
2647:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pcb = altcp_listen(pcb);
 104              		.loc 1 2647 5 is_stmt 1 discriminator 1 view .LVU22
2647:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pcb = altcp_listen(pcb);
 105              		.loc 1 2647 5 discriminator 1 view .LVU23
 106 0030 0A4B     		ldr	r3, .L11+8
 107 0032 40F65722 		movw	r2, #2647
 108 0036 0A49     		ldr	r1, .L11+12
 109 0038 0A48     		ldr	r0, .L11+16
 110              	.LVL9:
2647:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pcb = altcp_listen(pcb);
 111              		.loc 1 2647 5 is_stmt 0 discriminator 1 view .LVU24
 112 003a FFF7FEFF 		bl	printf
 113              	.LVL10:
 114 003e ECE7     		b	.L3
 115              	.LVL11:
 116              	.L10:
2649:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_accept(pcb, http_accept);
 117              		.loc 1 2649 5 is_stmt 1 discriminator 1 view .LVU25
2649:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_accept(pcb, http_accept);
 118              		.loc 1 2649 5 discriminator 1 view .LVU26
 119 0040 064B     		ldr	r3, .L11+8
 120 0042 40F65922 		movw	r2, #2649
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 50


 121 0046 0849     		ldr	r1, .L11+20
 122 0048 0648     		ldr	r0, .L11+16
 123              	.LVL12:
2649:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_accept(pcb, http_accept);
 124              		.loc 1 2649 5 is_stmt 0 discriminator 1 view .LVU27
 125 004a FFF7FEFF 		bl	printf
 126              	.LVL13:
 127 004e EAE7     		b	.L4
 128              	.LVL14:
 129              	.L6:
 130              	.LCFI1:
 131              		.cfi_def_cfa_offset 0
 132              		.cfi_restore 3
 133              		.cfi_restore 4
 134              		.cfi_restore 5
 135              		.cfi_restore 14
2649:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_accept(pcb, http_accept);
 136              		.loc 1 2649 5 discriminator 1 view .LVU28
 137 0050 7047     		bx	lr
 138              	.L12:
 139 0052 00BF     		.align	2
 140              	.L11:
 141 0054 00000000 		.word	ip_addr_any
 142 0058 00000000 		.word	http_accept
 143 005c 00000000 		.word	.LC0
 144 0060 34000000 		.word	.LC1
 145 0064 50000000 		.word	.LC2
 146 0068 78000000 		.word	.LC3
 147              		.cfi_endproc
 148              	.LFE45:
 150              		.section	.rodata.http_write.str1.4,"aMS",%progbits,1
 151              		.align	2
 152              	.LC4:
 153 0000 6C656E67 		.ascii	"length != NULL\000"
 153      74682021 
 153      3D204E55 
 153      4C4C00
 154              		.section	.text.http_write,"ax",%progbits
 155              		.align	1
 156              		.syntax unified
 157              		.thumb
 158              		.thumb_func
 159              		.fpu fpv5-sp-d16
 161              	http_write:
 162              	.LVL15:
 163              	.LFB29:
 534:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t len, max_len;
 164              		.loc 1 534 1 is_stmt 1 view -0
 165              		.cfi_startproc
 166              		@ args = 0, pretend = 0, frame = 0
 167              		@ frame_needed = 0, uses_anonymous_args = 0
 534:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t len, max_len;
 168              		.loc 1 534 1 is_stmt 0 view .LVU30
 169 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 170              	.LCFI2:
 171              		.cfi_def_cfa_offset 24
 172              		.cfi_offset 4, -24
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 51


 173              		.cfi_offset 5, -20
 174              		.cfi_offset 6, -16
 175              		.cfi_offset 7, -12
 176              		.cfi_offset 8, -8
 177              		.cfi_offset 14, -4
 178 0004 0546     		mov	r5, r0
 179 0006 0E46     		mov	r6, r1
 180 0008 1F46     		mov	r7, r3
 535:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 181              		.loc 1 535 3 is_stmt 1 view .LVU31
 536:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("length != NULL", length != NULL);
 182              		.loc 1 536 3 view .LVU32
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 183              		.loc 1 537 3 view .LVU33
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 184              		.loc 1 537 3 view .LVU34
 185 000a 9046     		mov	r8, r2
 186 000c 7AB1     		cbz	r2, .L25
 187              	.LVL16:
 188              	.L14:
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 189              		.loc 1 537 3 discriminator 3 view .LVU35
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 190              		.loc 1 537 3 discriminator 3 view .LVU36
 538:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (len == 0) {
 191              		.loc 1 538 3 discriminator 3 view .LVU37
 538:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (len == 0) {
 192              		.loc 1 538 7 is_stmt 0 discriminator 3 view .LVU38
 193 000e B8F80030 		ldrh	r3, [r8]
 194              	.LVL17:
 539:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
 195              		.loc 1 539 3 is_stmt 1 discriminator 3 view .LVU39
 539:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
 196              		.loc 1 539 6 is_stmt 0 discriminator 3 view .LVU40
 197 0012 002B     		cmp	r3, #0
 198 0014 3BD0     		beq	.L21
 543:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (max_len < len) {
 199              		.loc 1 543 3 is_stmt 1 view .LVU41
 543:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (max_len < len) {
 200              		.loc 1 543 11 is_stmt 0 view .LVU42
 201 0016 B5F86420 		ldrh	r2, [r5, #100]
 202              	.LVL18:
 544:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = max_len;
 203              		.loc 1 544 3 is_stmt 1 view .LVU43
 544:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = max_len;
 204              		.loc 1 544 6 is_stmt 0 view .LVU44
 205 001a 9342     		cmp	r3, r2
 206 001c 00D8     		bhi	.L16
 538:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (len == 0) {
 207              		.loc 1 538 7 view .LVU45
 208 001e 1A46     		mov	r2, r3
 209              	.LVL19:
 210              	.L16:
 549:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (len > max_len) {
 211              		.loc 1 549 3 is_stmt 1 view .LVU46
 549:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (len > max_len) {
 212              		.loc 1 549 13 is_stmt 0 view .LVU47
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 52


 213 0020 6C8E     		ldrh	r4, [r5, #50]
 549:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (len > max_len) {
 214              		.loc 1 549 11 view .LVU48
 215 0022 6400     		lsls	r4, r4, #1
 216 0024 A4B2     		uxth	r4, r4
 217              	.LVL20:
 550:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = max_len;
 218              		.loc 1 550 3 is_stmt 1 view .LVU49
 550:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = max_len;
 219              		.loc 1 550 6 is_stmt 0 view .LVU50
 220 0026 A242     		cmp	r2, r4
 221 0028 13D8     		bhi	.L19
 222 002a 1446     		mov	r4, r2
 223              	.LVL21:
 550:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     len = max_len;
 224              		.loc 1 550 6 view .LVU51
 225 002c 11E0     		b	.L19
 226              	.LVL22:
 227              	.L25:
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 228              		.loc 1 537 3 is_stmt 1 discriminator 1 view .LVU52
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 229              		.loc 1 537 3 discriminator 1 view .LVU53
 230 002e 194B     		ldr	r3, .L27
 231              	.LVL23:
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 232              		.loc 1 537 3 is_stmt 0 discriminator 1 view .LVU54
 233 0030 40F21922 		movw	r2, #537
 234              	.LVL24:
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 235              		.loc 1 537 3 discriminator 1 view .LVU55
 236 0034 1849     		ldr	r1, .L27+4
 237              	.LVL25:
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 238              		.loc 1 537 3 discriminator 1 view .LVU56
 239 0036 1948     		ldr	r0, .L27+8
 240              	.LVL26:
 537:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   len = *length;
 241              		.loc 1 537 3 discriminator 1 view .LVU57
 242 0038 FFF7FEFF 		bl	printf
 243              	.LVL27:
 244 003c E7E7     		b	.L14
 245              	.LVL28:
 246              	.L22:
 561:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else {
 247              		.loc 1 561 13 view .LVU58
 248 003e 0124     		movs	r4, #1
 249              	.LVL29:
 250              	.L18:
 566:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 251              		.loc 1 566 66 is_stmt 1 view .LVU59
 568:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 252              		.loc 1 568 11 view .LVU60
 568:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 253              		.loc 1 568 29 is_stmt 0 view .LVU61
 254 0040 B0F1FF3F 		cmp	r0, #-1
 255 0044 14BF     		ite	ne
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 53


 256 0046 0022     		movne	r2, #0
 257 0048 0122     		moveq	r2, #1
 258 004a 012C     		cmp	r4, #1
 259 004c 98BF     		it	ls
 260 004e 0022     		movls	r2, #0
 568:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 261              		.loc 1 568 3 view .LVU62
 262 0050 AAB1     		cbz	r2, .L26
 263              	.LVL30:
 264              	.L19:
 554:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Trying to send %d bytes\n", len));
 265              		.loc 1 554 3 is_stmt 1 view .LVU63
 555:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = altcp_write(pcb, ptr, len, apiflags);
 266              		.loc 1 555 82 view .LVU64
 556:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err == ERR_MEM) {
 267              		.loc 1 556 5 view .LVU65
 556:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err == ERR_MEM) {
 268              		.loc 1 556 11 is_stmt 0 view .LVU66
 269 0052 3B46     		mov	r3, r7
 270 0054 2246     		mov	r2, r4
 271 0056 3146     		mov	r1, r6
 272 0058 2846     		mov	r0, r5
 273 005a FFF7FEFF 		bl	tcp_write
 274              	.LVL31:
 557:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if ((altcp_sndbuf(pcb) == 0) ||
 275              		.loc 1 557 5 is_stmt 1 view .LVU67
 557:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if ((altcp_sndbuf(pcb) == 0) ||
 276              		.loc 1 557 8 is_stmt 0 view .LVU68
 277 005e B0F1FF3F 		cmp	r0, #-1
 278 0062 EDD1     		bne	.L18
 558:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           (altcp_sndqueuelen(pcb) >= TCP_SND_QUEUELEN)) {
 279              		.loc 1 558 7 is_stmt 1 view .LVU69
 558:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           (altcp_sndqueuelen(pcb) >= TCP_SND_QUEUELEN)) {
 280              		.loc 1 558 12 is_stmt 0 view .LVU70
 281 0064 B5F86430 		ldrh	r3, [r5, #100]
 558:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           (altcp_sndqueuelen(pcb) >= TCP_SND_QUEUELEN)) {
 282              		.loc 1 558 10 view .LVU71
 283 0068 002B     		cmp	r3, #0
 284 006a E8D0     		beq	.L22
 559:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* no need to try smaller sizes */
 285              		.loc 1 559 12 discriminator 1 view .LVU72
 286 006c B5F86630 		ldrh	r3, [r5, #102]
 558:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           (altcp_sndqueuelen(pcb) >= TCP_SND_QUEUELEN)) {
 287              		.loc 1 558 36 discriminator 1 view .LVU73
 288 0070 072B     		cmp	r3, #7
 289 0072 02D8     		bhi	.L23
 563:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 290              		.loc 1 563 9 is_stmt 1 view .LVU74
 563:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 291              		.loc 1 563 13 is_stmt 0 view .LVU75
 292 0074 C4F34F04 		ubfx	r4, r4, #1, #16
 293              	.LVL32:
 563:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 294              		.loc 1 563 13 view .LVU76
 295 0078 E2E7     		b	.L18
 296              	.L23:
 561:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else {
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 54


 297              		.loc 1 561 13 view .LVU77
 298 007a 0124     		movs	r4, #1
 299              	.LVL33:
 561:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else {
 300              		.loc 1 561 13 view .LVU78
 301 007c E0E7     		b	.L18
 302              	.LVL34:
 303              	.L26:
 570:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Sent %d bytes\n", len));
 304              		.loc 1 570 3 is_stmt 1 view .LVU79
 570:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Sent %d bytes\n", len));
 305              		.loc 1 570 6 is_stmt 0 view .LVU80
 306 007e 10B9     		cbnz	r0, .L20
 571:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     *length = len;
 307              		.loc 1 571 72 is_stmt 1 view .LVU81
 572:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 308              		.loc 1 572 5 view .LVU82
 572:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 309              		.loc 1 572 13 is_stmt 0 view .LVU83
 310 0080 A8F80040 		strh	r4, [r8]	@ movhi
 311 0084 04E0     		b	.L15
 312              	.L20:
 574:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     *length = 0;
 313              		.loc 1 574 109 is_stmt 1 view .LVU84
 575:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 314              		.loc 1 575 5 view .LVU85
 575:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 315              		.loc 1 575 13 is_stmt 0 view .LVU86
 316 0086 0023     		movs	r3, #0
 317 0088 A8F80030 		strh	r3, [r8]	@ movhi
 318 008c 00E0     		b	.L15
 319              	.LVL35:
 320              	.L21:
 540:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 321              		.loc 1 540 12 view .LVU87
 322 008e 0020     		movs	r0, #0
 323              	.LVL36:
 324              	.L15:
 586:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 325              		.loc 1 586 1 view .LVU88
 326 0090 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 327              	.LVL37:
 328              	.L28:
 586:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 329              		.loc 1 586 1 view .LVU89
 330              		.align	2
 331              	.L27:
 332 0094 00000000 		.word	.LC0
 333 0098 00000000 		.word	.LC4
 334 009c 50000000 		.word	.LC2
 335              		.cfi_endproc
 336              	.LFE29:
 338              		.section	.text.http_send_data_nonssi,"ax",%progbits
 339              		.align	1
 340              		.syntax unified
 341              		.thumb
 342              		.thumb_func
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 55


 343              		.fpu fpv5-sp-d16
 345              	http_send_data_nonssi:
 346              	.LVL38:
 347              	.LFB34:
1193:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 348              		.loc 1 1193 1 is_stmt 1 view -0
 349              		.cfi_startproc
 350              		@ args = 0, pretend = 0, frame = 8
 351              		@ frame_needed = 0, uses_anonymous_args = 0
1193:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 352              		.loc 1 1193 1 is_stmt 0 view .LVU91
 353 0000 10B5     		push	{r4, lr}
 354              	.LCFI3:
 355              		.cfi_def_cfa_offset 8
 356              		.cfi_offset 4, -8
 357              		.cfi_offset 14, -4
 358 0002 82B0     		sub	sp, sp, #8
 359              	.LCFI4:
 360              		.cfi_def_cfa_offset 16
 361 0004 0C46     		mov	r4, r1
1194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t len;
 362              		.loc 1 1194 3 is_stmt 1 view .LVU92
1195:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t data_to_send = 0;
 363              		.loc 1 1195 3 view .LVU93
1196:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 364              		.loc 1 1196 3 view .LVU94
 365              	.LVL39:
1200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 366              		.loc 1 1200 3 view .LVU95
1200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 367              		.loc 1 1200 16 is_stmt 0 view .LVU96
 368 0006 4B6A     		ldr	r3, [r1, #36]
1200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 369              		.loc 1 1200 9 view .LVU97
 370 0008 4FF6FE72 		movw	r2, #65534
 371 000c 9342     		cmp	r3, r2
 372 000e 14D8     		bhi	.L32
1200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 373              		.loc 1 1200 9 discriminator 1 view .LVU98
 374 0010 9BB2     		uxth	r3, r3
 375              	.L30:
1200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 376              		.loc 1 1200 7 discriminator 4 view .LVU99
 377 0012 ADF80630 		strh	r3, [sp, #6]	@ movhi
1202:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err == ERR_OK) {
 378              		.loc 1 1202 3 is_stmt 1 discriminator 4 view .LVU100
1202:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err == ERR_OK) {
 379              		.loc 1 1202 9 is_stmt 0 discriminator 4 view .LVU101
 380 0016 0023     		movs	r3, #0
 381 0018 0DF10602 		add	r2, sp, #6
 382 001c A169     		ldr	r1, [r4, #24]
 383              	.LVL40:
1202:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err == ERR_OK) {
 384              		.loc 1 1202 9 discriminator 4 view .LVU102
 385 001e FFF7FEFF 		bl	http_write
 386              	.LVL41:
1203:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_to_send = 1;
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 56


 387              		.loc 1 1203 3 is_stmt 1 discriminator 4 view .LVU103
1203:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_to_send = 1;
 388              		.loc 1 1203 6 is_stmt 0 discriminator 4 view .LVU104
 389 0022 68B9     		cbnz	r0, .L33
1204:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->file += len;
 390              		.loc 1 1204 5 is_stmt 1 view .LVU105
 391              	.LVL42:
1205:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->left -= len;
 392              		.loc 1 1205 5 view .LVU106
1205:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->left -= len;
 393              		.loc 1 1205 14 is_stmt 0 view .LVU107
 394 0024 BDF80610 		ldrh	r1, [sp, #6]
 395 0028 A269     		ldr	r2, [r4, #24]
 396 002a 0A44     		add	r2, r2, r1
 397 002c A261     		str	r2, [r4, #24]
1206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 398              		.loc 1 1206 5 is_stmt 1 view .LVU108
1206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 399              		.loc 1 1206 14 is_stmt 0 view .LVU109
 400 002e 636A     		ldr	r3, [r4, #36]
 401 0030 5B1A     		subs	r3, r3, r1
 402 0032 6362     		str	r3, [r4, #36]
1204:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->file += len;
 403              		.loc 1 1204 18 view .LVU110
 404 0034 0120     		movs	r0, #1
 405              	.LVL43:
 406              	.L31:
1209:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 407              		.loc 1 1209 3 is_stmt 1 view .LVU111
1210:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 408              		.loc 1 1210 1 is_stmt 0 view .LVU112
 409 0036 02B0     		add	sp, sp, #8
 410              	.LCFI5:
 411              		.cfi_remember_state
 412              		.cfi_def_cfa_offset 8
 413              		@ sp needed
 414 0038 10BD     		pop	{r4, pc}
 415              	.LVL44:
 416              	.L32:
 417              	.LCFI6:
 418              		.cfi_restore_state
1200:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 419              		.loc 1 1200 9 view .LVU113
 420 003a 4FF6FF73 		movw	r3, #65535
 421 003e E8E7     		b	.L30
 422              	.LVL45:
 423              	.L33:
1196:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 424              		.loc 1 1196 8 view .LVU114
 425 0040 0020     		movs	r0, #0
 426              	.LVL46:
1196:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 427              		.loc 1 1196 8 view .LVU115
 428 0042 F8E7     		b	.L31
 429              		.cfi_endproc
 430              	.LFE34:
 432              		.section	.text.http_state_eof,"ax",%progbits
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 57


 433              		.align	1
 434              		.syntax unified
 435              		.thumb
 436              		.thumb_func
 437              		.fpu fpv5-sp-d16
 439              	http_state_eof:
 440              	.LVL47:
 441              	.LFB27:
 479:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->handle) {
 442              		.loc 1 479 1 is_stmt 1 view -0
 443              		.cfi_startproc
 444              		@ args = 0, pretend = 0, frame = 0
 445              		@ frame_needed = 0, uses_anonymous_args = 0
 479:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs->handle) {
 446              		.loc 1 479 1 is_stmt 0 view .LVU117
 447 0000 10B5     		push	{r4, lr}
 448              	.LCFI7:
 449              		.cfi_def_cfa_offset 8
 450              		.cfi_offset 4, -8
 451              		.cfi_offset 14, -4
 452 0002 0446     		mov	r4, r0
 480:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
 453              		.loc 1 480 3 is_stmt 1 view .LVU118
 480:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
 454              		.loc 1 480 9 is_stmt 0 view .LVU119
 455 0004 4069     		ldr	r0, [r0, #20]
 456              	.LVL48:
 480:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
 457              		.loc 1 480 6 view .LVU120
 458 0006 18B1     		cbz	r0, .L36
 487:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->handle = NULL;
 459              		.loc 1 487 5 is_stmt 1 view .LVU121
 460 0008 FFF7FEFF 		bl	fs_close
 461              	.LVL49:
 488:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 462              		.loc 1 488 5 view .LVU122
 488:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 463              		.loc 1 488 16 is_stmt 0 view .LVU123
 464 000c 0023     		movs	r3, #0
 465 000e 6361     		str	r3, [r4, #20]
 466              	.L36:
 503:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_free(hs->req);
 467              		.loc 1 503 3 is_stmt 1 view .LVU124
 503:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_free(hs->req);
 468              		.loc 1 503 9 is_stmt 0 view .LVU125
 469 0010 206A     		ldr	r0, [r4, #32]
 503:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_free(hs->req);
 470              		.loc 1 503 6 view .LVU126
 471 0012 18B1     		cbz	r0, .L35
 504:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->req = NULL;
 472              		.loc 1 504 5 is_stmt 1 view .LVU127
 473 0014 FFF7FEFF 		bl	pbuf_free
 474              	.LVL50:
 505:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 475              		.loc 1 505 5 view .LVU128
 505:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 476              		.loc 1 505 13 is_stmt 0 view .LVU129
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 58


 477 0018 0023     		movs	r3, #0
 478 001a 2362     		str	r3, [r4, #32]
 479              	.L35:
 508:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 480              		.loc 1 508 1 view .LVU130
 481 001c 10BD     		pop	{r4, pc}
 508:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 482              		.loc 1 508 1 view .LVU131
 483              		.cfi_endproc
 484              	.LFE27:
 486              		.section	.text.http_state_free,"ax",%progbits
 487              		.align	1
 488              		.syntax unified
 489              		.thumb
 490              		.thumb_func
 491              		.fpu fpv5-sp-d16
 493              	http_state_free:
 494              	.LVL51:
 495              	.LFB28:
 515:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs != NULL) {
 496              		.loc 1 515 1 is_stmt 1 view -0
 497              		.cfi_startproc
 498              		@ args = 0, pretend = 0, frame = 0
 499              		@ frame_needed = 0, uses_anonymous_args = 0
 516:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_eof(hs);
 500              		.loc 1 516 3 view .LVU133
 516:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_eof(hs);
 501              		.loc 1 516 6 is_stmt 0 view .LVU134
 502 0000 38B1     		cbz	r0, .L42
 515:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs != NULL) {
 503              		.loc 1 515 1 view .LVU135
 504 0002 10B5     		push	{r4, lr}
 505              	.LCFI8:
 506              		.cfi_def_cfa_offset 8
 507              		.cfi_offset 4, -8
 508              		.cfi_offset 14, -4
 509 0004 0446     		mov	r4, r0
 517:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_remove_connection(hs);
 510              		.loc 1 517 5 is_stmt 1 view .LVU136
 511 0006 FFF7FEFF 		bl	http_state_eof
 512              	.LVL52:
 518:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     HTTP_FREE_HTTP_STATE(hs);
 513              		.loc 1 518 31 view .LVU137
 519:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 514              		.loc 1 519 5 view .LVU138
 515 000a 2046     		mov	r0, r4
 516 000c FFF7FEFF 		bl	mem_free
 517              	.LVL53:
 521:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 518              		.loc 1 521 1 is_stmt 0 view .LVU139
 519 0010 10BD     		pop	{r4, pc}
 520              	.LVL54:
 521              	.L42:
 522              	.LCFI9:
 523              		.cfi_def_cfa_offset 0
 524              		.cfi_restore 4
 525              		.cfi_restore 14
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 59


 521:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 526              		.loc 1 521 1 view .LVU140
 527 0012 7047     		bx	lr
 528              		.cfi_endproc
 529              	.LFE28:
 531              		.section	.text.http_close_or_abort_conn,"ax",%progbits
 532              		.align	1
 533              		.syntax unified
 534              		.thumb
 535              		.thumb_func
 536              		.fpu fpv5-sp-d16
 538              	http_close_or_abort_conn:
 539              	.LVL55:
 540              	.LFB30:
 597:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 541              		.loc 1 597 1 is_stmt 1 view -0
 542              		.cfi_startproc
 543              		@ args = 0, pretend = 0, frame = 0
 544              		@ frame_needed = 0, uses_anonymous_args = 0
 597:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 545              		.loc 1 597 1 is_stmt 0 view .LVU142
 546 0000 70B5     		push	{r4, r5, r6, lr}
 547              	.LCFI10:
 548              		.cfi_def_cfa_offset 16
 549              		.cfi_offset 4, -16
 550              		.cfi_offset 5, -12
 551              		.cfi_offset 6, -8
 552              		.cfi_offset 14, -4
 553 0002 0446     		mov	r4, r0
 554 0004 0D46     		mov	r5, r1
 555 0006 1646     		mov	r6, r2
 598:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("Closing connection %p\n", (void *)pcb));
 556              		.loc 1 598 3 is_stmt 1 view .LVU143
 599:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 557              		.loc 1 599 69 view .LVU144
 616:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_recv(pcb, NULL);
 558              		.loc 1 616 3 view .LVU145
 559 0008 0021     		movs	r1, #0
 560              	.LVL56:
 616:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_recv(pcb, NULL);
 561              		.loc 1 616 3 is_stmt 0 view .LVU146
 562 000a FFF7FEFF 		bl	tcp_arg
 563              	.LVL57:
 617:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_err(pcb, NULL);
 564              		.loc 1 617 3 is_stmt 1 view .LVU147
 565 000e 0021     		movs	r1, #0
 566 0010 2046     		mov	r0, r4
 567 0012 FFF7FEFF 		bl	tcp_recv
 568              	.LVL58:
 618:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_poll(pcb, NULL, 0);
 569              		.loc 1 618 3 view .LVU148
 570 0016 0021     		movs	r1, #0
 571 0018 2046     		mov	r0, r4
 572 001a FFF7FEFF 		bl	tcp_err
 573              	.LVL59:
 619:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_sent(pcb, NULL);
 574              		.loc 1 619 3 view .LVU149
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 60


 575 001e 0022     		movs	r2, #0
 576 0020 1146     		mov	r1, r2
 577 0022 2046     		mov	r0, r4
 578 0024 FFF7FEFF 		bl	tcp_poll
 579              	.LVL60:
 620:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs != NULL) {
 580              		.loc 1 620 3 view .LVU150
 581 0028 0021     		movs	r1, #0
 582 002a 2046     		mov	r0, r4
 583 002c FFF7FEFF 		bl	tcp_sent
 584              	.LVL61:
 621:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_free(hs);
 585              		.loc 1 621 3 view .LVU151
 621:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_free(hs);
 586              		.loc 1 621 6 is_stmt 0 view .LVU152
 587 0030 15B1     		cbz	r5, .L46
 622:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 588              		.loc 1 622 5 is_stmt 1 view .LVU153
 589 0032 2846     		mov	r0, r5
 590 0034 FFF7FEFF 		bl	http_state_free
 591              	.LVL62:
 592              	.L46:
 625:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_abort(pcb);
 593              		.loc 1 625 3 view .LVU154
 625:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     altcp_abort(pcb);
 594              		.loc 1 625 6 is_stmt 0 view .LVU155
 595 0038 36B9     		cbnz	r6, .L50
 629:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err != ERR_OK) {
 596              		.loc 1 629 3 is_stmt 1 view .LVU156
 629:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err != ERR_OK) {
 597              		.loc 1 629 9 is_stmt 0 view .LVU157
 598 003a 2046     		mov	r0, r4
 599 003c FFF7FEFF 		bl	tcp_close
 600              	.LVL63:
 630:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Error %d closing %p\n", err, (void *)pcb));
 601              		.loc 1 630 3 is_stmt 1 view .LVU158
 630:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Error %d closing %p\n", err, (void *)pcb));
 602              		.loc 1 630 6 is_stmt 0 view .LVU159
 603 0040 0546     		mov	r5, r0
 604              	.LVL64:
 630:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Error %d closing %p\n", err, (void *)pcb));
 605              		.loc 1 630 6 view .LVU160
 606 0042 30B9     		cbnz	r0, .L51
 607              	.LVL65:
 608              	.L48:
 636:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 609              		.loc 1 636 1 view .LVU161
 610 0044 2846     		mov	r0, r5
 611 0046 70BD     		pop	{r4, r5, r6, pc}
 612              	.LVL66:
 613              	.L50:
 626:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
 614              		.loc 1 626 5 is_stmt 1 view .LVU162
 615 0048 2046     		mov	r0, r4
 616 004a FFF7FEFF 		bl	tcp_abort
 617              	.LVL67:
 627:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 61


 618              		.loc 1 627 5 view .LVU163
 627:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 619              		.loc 1 627 12 is_stmt 0 view .LVU164
 620 004e 0025     		movs	r5, #0
 621              	.LVL68:
 627:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 622              		.loc 1 627 12 view .LVU165
 623 0050 F8E7     		b	.L48
 624              	.LVL69:
 625              	.L51:
 631:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error closing, try again later in poll */
 626              		.loc 1 631 74 is_stmt 1 view .LVU166
 633:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 627              		.loc 1 633 5 view .LVU167
 628 0052 0422     		movs	r2, #4
 629 0054 0249     		ldr	r1, .L52
 630 0056 2046     		mov	r0, r4
 631              	.LVL70:
 633:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 632              		.loc 1 633 5 is_stmt 0 view .LVU168
 633 0058 FFF7FEFF 		bl	tcp_poll
 634              	.LVL71:
 635 005c F2E7     		b	.L48
 636              	.L53:
 637 005e 00BF     		.align	2
 638              	.L52:
 639 0060 00000000 		.word	http_poll
 640              		.cfi_endproc
 641              	.LFE30:
 643              		.section	.text.http_close_conn,"ax",%progbits
 644              		.align	1
 645              		.syntax unified
 646              		.thumb
 647              		.thumb_func
 648              		.fpu fpv5-sp-d16
 650              	http_close_conn:
 651              	.LVL72:
 652              	.LFB31:
 647:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return http_close_or_abort_conn(pcb, hs, 0);
 653              		.loc 1 647 1 is_stmt 1 view -0
 654              		.cfi_startproc
 655              		@ args = 0, pretend = 0, frame = 0
 656              		@ frame_needed = 0, uses_anonymous_args = 0
 647:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   return http_close_or_abort_conn(pcb, hs, 0);
 657              		.loc 1 647 1 is_stmt 0 view .LVU170
 658 0000 08B5     		push	{r3, lr}
 659              	.LCFI11:
 660              		.cfi_def_cfa_offset 8
 661              		.cfi_offset 3, -8
 662              		.cfi_offset 14, -4
 648:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 663              		.loc 1 648 3 is_stmt 1 view .LVU171
 648:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 664              		.loc 1 648 10 is_stmt 0 view .LVU172
 665 0002 0022     		movs	r2, #0
 666 0004 FFF7FEFF 		bl	http_close_or_abort_conn
 667              	.LVL73:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 62


 649:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 668              		.loc 1 649 1 view .LVU173
 669 0008 08BD     		pop	{r3, pc}
 670              		.cfi_endproc
 671              	.LFE31:
 673              		.section	.text.http_eof,"ax",%progbits
 674              		.align	1
 675              		.syntax unified
 676              		.thumb
 677              		.thumb_func
 678              		.fpu fpv5-sp-d16
 680              	http_eof:
 681              	.LVL74:
 682              	.LFB32:
 656:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* HTTP/1.1 persistent connection? (Not supported for SSI) */
 683              		.loc 1 656 1 is_stmt 1 view -0
 684              		.cfi_startproc
 685              		@ args = 0, pretend = 0, frame = 0
 686              		@ frame_needed = 0, uses_anonymous_args = 0
 656:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* HTTP/1.1 persistent connection? (Not supported for SSI) */
 687              		.loc 1 656 1 is_stmt 0 view .LVU175
 688 0000 08B5     		push	{r3, lr}
 689              	.LCFI12:
 690              		.cfi_def_cfa_offset 8
 691              		.cfi_offset 3, -8
 692              		.cfi_offset 14, -4
 673:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 693              		.loc 1 673 5 is_stmt 1 view .LVU176
 694 0002 FFF7FEFF 		bl	http_close_conn
 695              	.LVL75:
 675:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 696              		.loc 1 675 1 is_stmt 0 view .LVU177
 697 0006 08BD     		pop	{r3, pc}
 698              		.cfi_endproc
 699              	.LFE32:
 701              		.section	.rodata.http_check_eof.str1.4,"aMS",%progbits,1
 702              		.align	2
 703              	.LC5:
 704 0000 53534920 		.ascii	"SSI and DYNAMIC_HEADERS turned off but eof not reac"
 704      616E6420 
 704      44594E41 
 704      4D49435F 
 704      48454144 
 705 0033 68656400 		.ascii	"hed\000"
 706              		.section	.text.http_check_eof,"ax",%progbits
 707              		.align	1
 708              		.syntax unified
 709              		.thumb
 710              		.thumb_func
 711              		.fpu fpv5-sp-d16
 713              	http_check_eof:
 714              	.LVL76:
 715              	.LFB33:
1094:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int bytes_left;
 716              		.loc 1 1094 1 is_stmt 1 view -0
 717              		.cfi_startproc
 718              		@ args = 0, pretend = 0, frame = 0
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 63


 719              		@ frame_needed = 0, uses_anonymous_args = 0
1094:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   int bytes_left;
 720              		.loc 1 1094 1 is_stmt 0 view .LVU179
 721 0000 38B5     		push	{r3, r4, r5, lr}
 722              	.LCFI13:
 723              		.cfi_def_cfa_offset 16
 724              		.cfi_offset 3, -16
 725              		.cfi_offset 4, -12
 726              		.cfi_offset 5, -8
 727              		.cfi_offset 14, -4
 728 0002 0546     		mov	r5, r0
 729 0004 0C46     		mov	r4, r1
1095:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_FILE_READ
 730              		.loc 1 1095 3 is_stmt 1 view .LVU180
1104:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* No - close the connection. */
 731              		.loc 1 1104 3 view .LVU181
1104:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* No - close the connection. */
 732              		.loc 1 1104 9 is_stmt 0 view .LVU182
 733 0006 4869     		ldr	r0, [r1, #20]
 734              	.LVL77:
1104:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* No - close the connection. */
 735              		.loc 1 1104 6 view .LVU183
 736 0008 60B1     		cbz	r0, .L63
1109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (bytes_left <= 0) {
 737              		.loc 1 1109 3 is_stmt 1 view .LVU184
1109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (bytes_left <= 0) {
 738              		.loc 1 1109 16 is_stmt 0 view .LVU185
 739 000a FFF7FEFF 		bl	fs_bytes_left
 740              	.LVL78:
1110:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done. */
 741              		.loc 1 1110 3 is_stmt 1 view .LVU186
1110:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done. */
 742              		.loc 1 1110 6 is_stmt 0 view .LVU187
 743 000e 0028     		cmp	r0, #0
 744 0010 0DDD     		ble	.L64
1181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI || LWIP_HTTPD_DYNAMIC_HEADERS */
 745              		.loc 1 1181 3 is_stmt 1 discriminator 1 view .LVU188
1181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI || LWIP_HTTPD_DYNAMIC_HEADERS */
 746              		.loc 1 1181 3 discriminator 1 view .LVU189
1181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI || LWIP_HTTPD_DYNAMIC_HEADERS */
 747              		.loc 1 1181 3 discriminator 1 view .LVU190
1181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI || LWIP_HTTPD_DYNAMIC_HEADERS */
 748              		.loc 1 1181 3 discriminator 1 view .LVU191
 749 0012 0A4B     		ldr	r3, .L65
 750 0014 40F29D42 		movw	r2, #1181
 751 0018 0949     		ldr	r1, .L65+4
 752 001a 0A48     		ldr	r0, .L65+8
 753              	.LVL79:
1181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI || LWIP_HTTPD_DYNAMIC_HEADERS */
 754              		.loc 1 1181 3 is_stmt 0 discriminator 1 view .LVU192
 755 001c FFF7FEFF 		bl	printf
 756              	.LVL80:
1181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI || LWIP_HTTPD_DYNAMIC_HEADERS */
 757              		.loc 1 1181 3 is_stmt 1 discriminator 1 view .LVU193
1181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI || LWIP_HTTPD_DYNAMIC_HEADERS */
 758              		.loc 1 1181 3 discriminator 1 view .LVU194
1183:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 64


 759              		.loc 1 1183 3 discriminator 1 view .LVU195
1183:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 760              		.loc 1 1183 10 is_stmt 0 discriminator 1 view .LVU196
 761 0020 0120     		movs	r0, #1
 762              	.L60:
1184:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 763              		.loc 1 1184 1 view .LVU197
 764 0022 38BD     		pop	{r3, r4, r5, pc}
 765              	.LVL81:
 766              	.L63:
1106:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
 767              		.loc 1 1106 5 is_stmt 1 view .LVU198
 768 0024 2846     		mov	r0, r5
 769 0026 FFF7FEFF 		bl	http_eof
 770              	.LVL82:
1107:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 771              		.loc 1 1107 5 view .LVU199
1107:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 772              		.loc 1 1107 12 is_stmt 0 view .LVU200
 773 002a 0020     		movs	r0, #0
 774 002c F9E7     		b	.L60
 775              	.LVL83:
 776              	.L64:
1112:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_eof(pcb, hs);
 777              		.loc 1 1112 49 is_stmt 1 view .LVU201
1113:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
 778              		.loc 1 1113 5 view .LVU202
 779 002e 2146     		mov	r1, r4
 780 0030 2846     		mov	r0, r5
 781              	.LVL84:
1113:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
 782              		.loc 1 1113 5 is_stmt 0 view .LVU203
 783 0032 FFF7FEFF 		bl	http_eof
 784              	.LVL85:
1114:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 785              		.loc 1 1114 5 is_stmt 1 view .LVU204
1114:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 786              		.loc 1 1114 12 is_stmt 0 view .LVU205
 787 0036 0020     		movs	r0, #0
 788 0038 F3E7     		b	.L60
 789              	.L66:
 790 003a 00BF     		.align	2
 791              	.L65:
 792 003c 00000000 		.word	.LC0
 793 0040 00000000 		.word	.LC5
 794 0044 50000000 		.word	.LC2
 795              		.cfi_endproc
 796              	.LFE33:
 798              		.section	.text.http_send,"ax",%progbits
 799              		.align	1
 800              		.syntax unified
 801              		.thumb
 802              		.thumb_func
 803              		.fpu fpv5-sp-d16
 805              	http_send:
 806              	.LVL86:
 807              	.LFB35:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 65


1560:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t data_to_send = HTTP_NO_DATA_TO_SEND;
 808              		.loc 1 1560 1 is_stmt 1 view -0
 809              		.cfi_startproc
 810              		@ args = 0, pretend = 0, frame = 0
 811              		@ frame_needed = 0, uses_anonymous_args = 0
1560:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u8_t data_to_send = HTTP_NO_DATA_TO_SEND;
 812              		.loc 1 1560 1 is_stmt 0 view .LVU207
 813 0000 70B5     		push	{r4, r5, r6, lr}
 814              	.LCFI14:
 815              		.cfi_def_cfa_offset 16
 816              		.cfi_offset 4, -16
 817              		.cfi_offset 5, -12
 818              		.cfi_offset 6, -8
 819              		.cfi_offset 14, -4
1561:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 820              		.loc 1 1561 3 is_stmt 1 view .LVU208
 821              	.LVL87:
1564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 822              		.loc 1 1564 59 view .LVU209
1573:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
 823              		.loc 1 1573 3 view .LVU210
1573:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
 824              		.loc 1 1573 6 is_stmt 0 view .LVU211
 825 0002 D9B1     		cbz	r1, .L70
 826 0004 0446     		mov	r4, r0
 827 0006 0E46     		mov	r6, r1
1599:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (!http_check_eof(pcb, hs)) {
 828              		.loc 1 1599 3 is_stmt 1 view .LVU212
1599:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (!http_check_eof(pcb, hs)) {
 829              		.loc 1 1599 9 is_stmt 0 view .LVU213
 830 0008 4B6A     		ldr	r3, [r1, #36]
1599:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (!http_check_eof(pcb, hs)) {
 831              		.loc 1 1599 6 view .LVU214
 832 000a 1BB9     		cbnz	r3, .L69
1600:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return 0;
 833              		.loc 1 1600 5 is_stmt 1 view .LVU215
1600:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return 0;
 834              		.loc 1 1600 10 is_stmt 0 view .LVU216
 835 000c FFF7FEFF 		bl	http_check_eof
 836              	.LVL88:
1600:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return 0;
 837              		.loc 1 1600 8 view .LVU217
 838 0010 0546     		mov	r5, r0
 839 0012 30B1     		cbz	r0, .L68
 840              	.L69:
1611:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 841              		.loc 1 1611 5 is_stmt 1 view .LVU218
1611:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 842              		.loc 1 1611 20 is_stmt 0 view .LVU219
 843 0014 3146     		mov	r1, r6
 844 0016 2046     		mov	r0, r4
 845 0018 FFF7FEFF 		bl	http_send_data_nonssi
 846              	.LVL89:
 847 001c 0546     		mov	r5, r0
 848              	.LVL90:
1614:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done.
 849              		.loc 1 1614 3 is_stmt 1 view .LVU220
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 66


1614:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done.
 850              		.loc 1 1614 10 is_stmt 0 view .LVU221
 851 001e 736A     		ldr	r3, [r6, #36]
1614:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done.
 852              		.loc 1 1614 6 view .LVU222
 853 0020 0BB1     		cbz	r3, .L72
 854              	.LVL91:
 855              	.L68:
1623:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 856              		.loc 1 1623 1 view .LVU223
 857 0022 2846     		mov	r0, r5
 858 0024 70BD     		pop	{r4, r5, r6, pc}
 859              	.LVL92:
 860              	.L72:
1614:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done.
 861              		.loc 1 1614 27 discriminator 1 view .LVU224
 862 0026 7069     		ldr	r0, [r6, #20]
 863 0028 FFF7FEFF 		bl	fs_bytes_left
 864              	.LVL93:
1614:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* We reached the end of the file so this request is done.
 865              		.loc 1 1614 23 discriminator 1 view .LVU225
 866 002c 0028     		cmp	r0, #0
 867 002e F8DC     		bgt	.L68
1617:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_eof(pcb, hs);
 868              		.loc 1 1617 49 is_stmt 1 view .LVU226
1618:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return 0;
 869              		.loc 1 1618 5 view .LVU227
 870 0030 3146     		mov	r1, r6
 871 0032 2046     		mov	r0, r4
 872 0034 FFF7FEFF 		bl	http_eof
 873              	.LVL94:
1619:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 874              		.loc 1 1619 5 view .LVU228
1619:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 875              		.loc 1 1619 12 is_stmt 0 view .LVU229
 876 0038 0025     		movs	r5, #0
 877              	.LVL95:
1619:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 878              		.loc 1 1619 12 view .LVU230
 879 003a F2E7     		b	.L68
 880              	.LVL96:
 881              	.L70:
1574:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 882              		.loc 1 1574 12 view .LVU231
 883 003c 0025     		movs	r5, #0
 884 003e F0E7     		b	.L68
 885              		.cfi_endproc
 886              	.LFE35:
 888              		.section	.text.http_sent,"ax",%progbits
 889              		.align	1
 890              		.syntax unified
 891              		.thumb
 892              		.thumb_func
 893              		.fpu fpv5-sp-d16
 895              	http_sent:
 896              	.LVL97:
 897              	.LFB41:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 67


2442:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
 898              		.loc 1 2442 1 is_stmt 1 view -0
 899              		.cfi_startproc
 900              		@ args = 0, pretend = 0, frame = 0
 901              		@ frame_needed = 0, uses_anonymous_args = 0
2443:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 902              		.loc 1 2443 3 view .LVU233
2445:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 903              		.loc 1 2445 77 view .LVU234
2447:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 904              		.loc 1 2447 3 view .LVU235
2449:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
 905              		.loc 1 2449 3 view .LVU236
2449:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
 906              		.loc 1 2449 6 is_stmt 0 view .LVU237
 907 0000 50B1     		cbz	r0, .L76
2442:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
 908              		.loc 1 2442 1 view .LVU238
 909 0002 08B5     		push	{r3, lr}
 910              	.LCFI15:
 911              		.cfi_def_cfa_offset 8
 912              		.cfi_offset 3, -8
 913              		.cfi_offset 14, -4
 914 0004 0B46     		mov	r3, r1
 915 0006 0146     		mov	r1, r0
 916              	.LVL98:
2453:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 917              		.loc 1 2453 3 is_stmt 1 view .LVU239
2453:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 918              		.loc 1 2453 15 is_stmt 0 view .LVU240
 919 0008 0022     		movs	r2, #0
 920              	.LVL99:
2453:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 921              		.loc 1 2453 15 view .LVU241
 922 000a 80F82820 		strb	r2, [r0, #40]
2455:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 923              		.loc 1 2455 3 is_stmt 1 view .LVU242
 924 000e 1846     		mov	r0, r3
 925              	.LVL100:
2455:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 926              		.loc 1 2455 3 is_stmt 0 view .LVU243
 927 0010 FFF7FEFF 		bl	http_send
 928              	.LVL101:
2457:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 929              		.loc 1 2457 3 is_stmt 1 view .LVU244
2458:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 930              		.loc 1 2458 1 is_stmt 0 view .LVU245
 931 0014 0020     		movs	r0, #0
 932 0016 08BD     		pop	{r3, pc}
 933              	.LVL102:
 934              	.L76:
 935              	.LCFI16:
 936              		.cfi_def_cfa_offset 0
 937              		.cfi_restore 3
 938              		.cfi_restore 14
2458:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 939              		.loc 1 2458 1 view .LVU246
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 68


 940 0018 0020     		movs	r0, #0
 941              	.LVL103:
2458:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 942              		.loc 1 2458 1 view .LVU247
 943 001a 7047     		bx	lr
 944              		.cfi_endproc
 945              	.LFE41:
 947              		.section	.text.http_err,"ax",%progbits
 948              		.align	1
 949              		.syntax unified
 950              		.thumb
 951              		.thumb_func
 952              		.fpu fpv5-sp-d16
 954              	http_err:
 955              	.LVL104:
 956              	.LFB40:
2425:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
 957              		.loc 1 2425 1 is_stmt 1 view -0
 958              		.cfi_startproc
 959              		@ args = 0, pretend = 0, frame = 0
 960              		@ frame_needed = 0, uses_anonymous_args = 0
2426:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(err);
 961              		.loc 1 2426 3 view .LVU249
2427:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 962              		.loc 1 2427 3 view .LVU250
2429:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 963              		.loc 1 2429 63 view .LVU251
2431:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_free(hs);
 964              		.loc 1 2431 3 view .LVU252
2431:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_free(hs);
 965              		.loc 1 2431 6 is_stmt 0 view .LVU253
 966 0000 18B1     		cbz	r0, .L82
2425:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
 967              		.loc 1 2425 1 view .LVU254
 968 0002 08B5     		push	{r3, lr}
 969              	.LCFI17:
 970              		.cfi_def_cfa_offset 8
 971              		.cfi_offset 3, -8
 972              		.cfi_offset 14, -4
2432:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 973              		.loc 1 2432 5 is_stmt 1 view .LVU255
 974 0004 FFF7FEFF 		bl	http_state_free
 975              	.LVL105:
2434:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 976              		.loc 1 2434 1 is_stmt 0 view .LVU256
 977 0008 08BD     		pop	{r3, pc}
 978              	.LVL106:
 979              	.L82:
 980              	.LCFI18:
 981              		.cfi_def_cfa_offset 0
 982              		.cfi_restore 3
 983              		.cfi_restore 14
2434:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 984              		.loc 1 2434 1 view .LVU257
 985 000a 7047     		bx	lr
 986              		.cfi_endproc
 987              	.LFE40:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 69


 989              		.section	.text.http_poll,"ax",%progbits
 990              		.align	1
 991              		.syntax unified
 992              		.thumb
 993              		.thumb_func
 994              		.fpu fpv5-sp-d16
 996              	http_poll:
 997              	.LVL107:
 998              	.LFB42:
2469:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
 999              		.loc 1 2469 1 is_stmt 1 view -0
 1000              		.cfi_startproc
 1001              		@ args = 0, pretend = 0, frame = 0
 1002              		@ frame_needed = 0, uses_anonymous_args = 0
2469:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
 1003              		.loc 1 2469 1 is_stmt 0 view .LVU259
 1004 0000 10B5     		push	{r4, lr}
 1005              	.LCFI19:
 1006              		.cfi_def_cfa_offset 8
 1007              		.cfi_offset 4, -8
 1008              		.cfi_offset 14, -4
 1009 0002 0C46     		mov	r4, r1
2470:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_poll: pcb=%p hs=%p pcb_state=%s\n",
 1010              		.loc 1 2470 3 is_stmt 1 view .LVU260
 1011              	.LVL108:
2472:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1012              		.loc 1 2472 91 view .LVU261
2474:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err_t closed;
 1013              		.loc 1 2474 3 view .LVU262
2474:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err_t closed;
 1014              		.loc 1 2474 6 is_stmt 0 view .LVU263
 1015 0004 80B1     		cbz	r0, .L90
 1016 0006 0146     		mov	r1, r0
 1017              	.LVL109:
2488:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->retries == HTTPD_MAX_RETRIES) {
 1018              		.loc 1 2488 5 is_stmt 1 view .LVU264
2488:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->retries == HTTPD_MAX_RETRIES) {
 1019              		.loc 1 2488 7 is_stmt 0 view .LVU265
 1020 0008 90F82830 		ldrb	r3, [r0, #40]	@ zero_extendqisi2
2488:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (hs->retries == HTTPD_MAX_RETRIES) {
 1021              		.loc 1 2488 16 view .LVU266
 1022 000c 0133     		adds	r3, r3, #1
 1023 000e DBB2     		uxtb	r3, r3
 1024 0010 80F82830 		strb	r3, [r0, #40]
2489:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG, ("http_poll: too many retries, close\n"));
 1025              		.loc 1 2489 5 is_stmt 1 view .LVU267
2489:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG, ("http_poll: too many retries, close\n"));
 1026              		.loc 1 2489 8 is_stmt 0 view .LVU268
 1027 0014 042B     		cmp	r3, #4
 1028 0016 0CD0     		beq	.L91
2498:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_poll: try to send more data\n"));
 1029              		.loc 1 2498 5 is_stmt 1 view .LVU269
2498:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_poll: try to send more data\n"));
 1030              		.loc 1 2498 11 is_stmt 0 view .LVU270
 1031 0018 4369     		ldr	r3, [r0, #20]
2498:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_poll: try to send more data\n"));
 1032              		.loc 1 2498 8 view .LVU271
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 70


 1033 001a 1BB1     		cbz	r3, .L87
2499:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (http_send(pcb, hs)) {
 1034              		.loc 1 2499 88 is_stmt 1 view .LVU272
2500:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* If we wrote anything to be sent, go ahead and send it now. */
 1035              		.loc 1 2500 7 view .LVU273
2500:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* If we wrote anything to be sent, go ahead and send it now. */
 1036              		.loc 1 2500 11 is_stmt 0 view .LVU274
 1037 001c 2046     		mov	r0, r4
 1038              	.LVL110:
2500:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* If we wrote anything to be sent, go ahead and send it now. */
 1039              		.loc 1 2500 11 view .LVU275
 1040 001e FFF7FEFF 		bl	http_send
 1041              	.LVL111:
2500:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* If we wrote anything to be sent, go ahead and send it now. */
 1042              		.loc 1 2500 10 view .LVU276
 1043 0022 50B9     		cbnz	r0, .L92
 1044              	.L87:
2509:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1045              		.loc 1 2509 1 view .LVU277
 1046 0024 0020     		movs	r0, #0
 1047 0026 10BD     		pop	{r4, pc}
 1048              	.LVL112:
 1049              	.L90:
 1050              	.LBB2:
2475:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* arg is null, close. */
 1051              		.loc 1 2475 5 is_stmt 1 view .LVU278
2477:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     closed = http_close_conn(pcb, NULL);
 1052              		.loc 1 2477 66 view .LVU279
2478:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(closed);
 1053              		.loc 1 2478 5 view .LVU280
2478:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(closed);
 1054              		.loc 1 2478 14 is_stmt 0 view .LVU281
 1055 0028 0021     		movs	r1, #0
 1056              	.LVL113:
2478:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(closed);
 1057              		.loc 1 2478 14 view .LVU282
 1058 002a 2046     		mov	r0, r4
 1059              	.LVL114:
2478:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_UNUSED_ARG(closed);
 1060              		.loc 1 2478 14 view .LVU283
 1061 002c FFF7FEFF 		bl	http_close_conn
 1062              	.LVL115:
2479:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_ABORT_ON_CLOSE_MEM_ERROR
 1063              		.loc 1 2479 5 is_stmt 1 view .LVU284
2486:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 1064              		.loc 1 2486 5 view .LVU285
2486:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 1065              		.loc 1 2486 12 is_stmt 0 view .LVU286
 1066 0030 F8E7     		b	.L87
 1067              	.LVL116:
 1068              	.L91:
2486:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 1069              		.loc 1 2486 12 view .LVU287
 1070              	.LBE2:
2490:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_close_conn(pcb, hs);
 1071              		.loc 1 2490 73 is_stmt 1 view .LVU288
2491:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return ERR_OK;
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 71


 1072              		.loc 1 2491 7 view .LVU289
 1073 0032 2046     		mov	r0, r4
 1074              	.LVL117:
2491:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       return ERR_OK;
 1075              		.loc 1 2491 7 is_stmt 0 view .LVU290
 1076 0034 FFF7FEFF 		bl	http_close_conn
 1077              	.LVL118:
2492:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1078              		.loc 1 2492 7 is_stmt 1 view .LVU291
2492:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1079              		.loc 1 2492 14 is_stmt 0 view .LVU292
 1080 0038 F4E7     		b	.L87
 1081              	.L92:
2502:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         altcp_output(pcb);
 1082              		.loc 1 2502 68 is_stmt 1 view .LVU293
2503:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1083              		.loc 1 2503 9 view .LVU294
 1084 003a 2046     		mov	r0, r4
 1085 003c FFF7FEFF 		bl	tcp_output
 1086              	.LVL119:
 1087 0040 F0E7     		b	.L87
 1088              		.cfi_endproc
 1089              	.LFE42:
 1091              		.section	.rodata.http_init_file.str1.4,"aMS",%progbits,1
 1092              		.align	2
 1093              	.LC6:
 1094 0000 66696C65 		.ascii	"file->data != NULL\000"
 1094      2D3E6461 
 1094      74612021 
 1094      3D204E55 
 1094      4C4C00
 1095 0013 00       		.align	2
 1096              	.LC7:
 1097 0014 46696C65 		.ascii	"File length must be positive!\000"
 1097      206C656E 
 1097      67746820 
 1097      6D757374 
 1097      20626520 
 1098 0032 0000     		.align	2
 1099              	.LC8:
 1100 0034 48545450 		.ascii	"HTTP headers not included in file system\000"
 1100      20686561 
 1100      64657273 
 1100      206E6F74 
 1100      20696E63 
 1101 005d 000000   		.align	2
 1102              	.LC9:
 1103 0060 0D0A0D0A 		.ascii	"\015\012\015\012\000"
 1103      00
 1104              		.section	.text.http_init_file,"ax",%progbits
 1105              		.align	1
 1106              		.syntax unified
 1107              		.thumb
 1108              		.thumb_func
 1109              		.fpu fpv5-sp-d16
 1111              	http_init_file:
 1112              	.LVL120:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 72


 1113              	.LFB39:
2307:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SUPPORT_V09
 1114              		.loc 1 2307 1 view -0
 1115              		.cfi_startproc
 1116              		@ args = 8, pretend = 0, frame = 0
 1117              		@ frame_needed = 0, uses_anonymous_args = 0
2307:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if !LWIP_HTTPD_SUPPORT_V09
 1118              		.loc 1 2307 1 is_stmt 0 view .LVU296
 1119 0000 70B5     		push	{r4, r5, r6, lr}
 1120              	.LCFI20:
 1121              		.cfi_def_cfa_offset 16
 1122              		.cfi_offset 4, -16
 1123              		.cfi_offset 5, -12
 1124              		.cfi_offset 6, -8
 1125              		.cfi_offset 14, -4
 1126 0002 0446     		mov	r4, r0
2311:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* file opened, initialise struct http_state */
 1127              		.loc 1 2311 3 is_stmt 1 view .LVU297
2311:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* file opened, initialise struct http_state */
 1128              		.loc 1 2311 6 is_stmt 0 view .LVU298
 1129 0004 0029     		cmp	r1, #0
 1130 0006 41D0     		beq	.L94
 1131 0008 1646     		mov	r6, r2
 1132 000a 0D46     		mov	r5, r1
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1133              		.loc 1 2315 5 is_stmt 1 view .LVU299
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1134              		.loc 1 2315 5 view .LVU300
 1135 000c 0B68     		ldr	r3, [r1]
 1136              	.LVL121:
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1137              		.loc 1 2315 5 is_stmt 0 view .LVU301
 1138 000e 2BB3     		cbz	r3, .L100
 1139              	.LVL122:
 1140              	.L95:
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1141              		.loc 1 2315 5 is_stmt 1 discriminator 3 view .LVU302
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1142              		.loc 1 2315 5 discriminator 3 view .LVU303
2331:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SSI */
 1143              		.loc 1 2331 5 discriminator 3 view .LVU304
2333:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI_SSI
 1144              		.loc 1 2333 5 discriminator 3 view .LVU305
2333:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI_SSI
 1145              		.loc 1 2333 16 is_stmt 0 discriminator 3 view .LVU306
 1146 0010 6561     		str	r5, [r4, #20]
2353:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_CGI_SSI */
 1147              		.loc 1 2353 5 is_stmt 1 discriminator 3 view .LVU307
2355:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("File length must be positive!", (file->len >= 0));
 1148              		.loc 1 2355 5 discriminator 3 view .LVU308
2355:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("File length must be positive!", (file->len >= 0));
 1149              		.loc 1 2355 20 is_stmt 0 discriminator 3 view .LVU309
 1150 0012 2B68     		ldr	r3, [r5]
2355:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_ASSERT("File length must be positive!", (file->len >= 0));
 1151              		.loc 1 2355 14 discriminator 3 view .LVU310
 1152 0014 A361     		str	r3, [r4, #24]
2356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CUSTOM_FILES
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 73


 1153              		.loc 1 2356 5 is_stmt 1 discriminator 3 view .LVU311
2356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CUSTOM_FILES
 1154              		.loc 1 2356 5 discriminator 3 view .LVU312
 1155 0016 6B68     		ldr	r3, [r5, #4]
 1156 0018 002B     		cmp	r3, #0
 1157 001a 27DB     		blt	.L101
 1158              	.L96:
2356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CUSTOM_FILES
 1159              		.loc 1 2356 5 discriminator 3 view .LVU313
2356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CUSTOM_FILES
 1160              		.loc 1 2356 5 discriminator 3 view .LVU314
2364:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1161              		.loc 1 2364 7 discriminator 3 view .LVU315
2364:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1162              		.loc 1 2364 29 is_stmt 0 discriminator 3 view .LVU316
 1163 001c 6B68     		ldr	r3, [r5, #4]
2364:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1164              		.loc 1 2364 16 discriminator 3 view .LVU317
 1165 001e 6362     		str	r3, [r4, #36]
2366:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
 1166              		.loc 1 2366 5 is_stmt 1 discriminator 3 view .LVU318
2366:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_TIMING
 1167              		.loc 1 2366 17 is_stmt 0 discriminator 3 view .LVU319
 1168 0020 0023     		movs	r3, #0
 1169 0022 84F82830 		strb	r3, [r4, #40]
2371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 (hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) != 0);
 1170              		.loc 1 2371 5 is_stmt 1 discriminator 3 view .LVU320
2371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 (hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) != 0);
 1171              		.loc 1 2371 5 discriminator 3 view .LVU321
 1172 0026 6369     		ldr	r3, [r4, #20]
 1173 0028 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 1174 002a 13F0010F 		tst	r3, #1
 1175 002e 25D0     		beq	.L102
 1176              	.L97:
2371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 (hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) != 0);
 1177              		.loc 1 2371 5 discriminator 3 view .LVU322
2371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 (hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) != 0);
 1178              		.loc 1 2371 5 discriminator 3 view .LVU323
2375:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* HTTP/0.9 responses are sent without HTTP header,
 1179              		.loc 1 2375 5 discriminator 3 view .LVU324
2375:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* HTTP/0.9 responses are sent without HTTP header,
 1180              		.loc 1 2375 8 is_stmt 0 discriminator 3 view .LVU325
 1181 0030 002E     		cmp	r6, #0
 1182 0032 31D0     		beq	.L98
2375:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* HTTP/0.9 responses are sent without HTTP header,
 1183              		.loc 1 2375 22 discriminator 1 view .LVU326
 1184 0034 6369     		ldr	r3, [r4, #20]
2375:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* HTTP/0.9 responses are sent without HTTP header,
 1185              		.loc 1 2375 30 discriminator 1 view .LVU327
 1186 0036 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
2375:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* HTTP/0.9 responses are sent without HTTP header,
 1187              		.loc 1 2375 15 discriminator 1 view .LVU328
 1188 0038 13F0010F 		tst	r3, #1
 1189 003c 2CD0     		beq	.L98
 1190              	.LBB3:
2378:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (file_start != NULL) {
 1191              		.loc 1 2378 7 is_stmt 1 view .LVU329
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 74


2378:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (file_start != NULL) {
 1192              		.loc 1 2378 26 is_stmt 0 view .LVU330
 1193 003e 626A     		ldr	r2, [r4, #36]
 1194 0040 1649     		ldr	r1, .L103
 1195 0042 A069     		ldr	r0, [r4, #24]
 1196 0044 FFF7FEFF 		bl	lwip_strnstr
 1197              	.LVL123:
2379:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         int diff = file_start + 4 - hs->file;
 1198              		.loc 1 2379 7 is_stmt 1 view .LVU331
2379:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         int diff = file_start + 4 - hs->file;
 1199              		.loc 1 2379 10 is_stmt 0 view .LVU332
 1200 0048 0346     		mov	r3, r0
 1201 004a 28B3     		cbz	r0, .L98
 1202              	.LBB4:
2380:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->file += diff;
 1203              		.loc 1 2380 9 is_stmt 1 view .LVU333
2380:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->file += diff;
 1204              		.loc 1 2380 31 is_stmt 0 view .LVU334
 1205 004c 0433     		adds	r3, r3, #4
2380:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->file += diff;
 1206              		.loc 1 2380 39 view .LVU335
 1207 004e A269     		ldr	r2, [r4, #24]
2380:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->file += diff;
 1208              		.loc 1 2380 13 view .LVU336
 1209 0050 9A1A     		subs	r2, r3, r2
 1210              	.LVL124:
2381:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->left -= (u32_t)diff;
 1211              		.loc 1 2381 9 is_stmt 1 view .LVU337
2381:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         hs->left -= (u32_t)diff;
 1212              		.loc 1 2381 18 is_stmt 0 view .LVU338
 1213 0052 A361     		str	r3, [r4, #24]
2382:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1214              		.loc 1 2382 9 is_stmt 1 view .LVU339
2382:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1215              		.loc 1 2382 18 is_stmt 0 view .LVU340
 1216 0054 636A     		ldr	r3, [r4, #36]
 1217 0056 9B1A     		subs	r3, r3, r2
 1218 0058 6362     		str	r3, [r4, #36]
 1219 005a 1DE0     		b	.L98
 1220              	.LVL125:
 1221              	.L100:
2382:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1222              		.loc 1 2382 18 view .LVU341
 1223              	.LBE4:
 1224              	.LBE3:
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1225              		.loc 1 2315 5 is_stmt 1 discriminator 1 view .LVU342
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1226              		.loc 1 2315 5 discriminator 1 view .LVU343
 1227 005c 104B     		ldr	r3, .L103+4
 1228 005e 40F60B12 		movw	r2, #2315
 1229              	.LVL126:
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1230              		.loc 1 2315 5 is_stmt 0 discriminator 1 view .LVU344
 1231 0062 1049     		ldr	r1, .L103+8
 1232              	.LVL127:
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 75


 1233              		.loc 1 2315 5 discriminator 1 view .LVU345
 1234 0064 1048     		ldr	r0, .L103+12
 1235              	.LVL128:
2315:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
 1236              		.loc 1 2315 5 discriminator 1 view .LVU346
 1237 0066 FFF7FEFF 		bl	printf
 1238              	.LVL129:
 1239 006a D1E7     		b	.L95
 1240              	.L101:
2356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CUSTOM_FILES
 1241              		.loc 1 2356 5 is_stmt 1 discriminator 1 view .LVU347
2356:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CUSTOM_FILES
 1242              		.loc 1 2356 5 discriminator 1 view .LVU348
 1243 006c 0C4B     		ldr	r3, .L103+4
 1244 006e 40F63412 		movw	r2, #2356
 1245 0072 0E49     		ldr	r1, .L103+16
 1246 0074 0C48     		ldr	r0, .L103+12
 1247 0076 FFF7FEFF 		bl	printf
 1248              	.LVL130:
 1249 007a CFE7     		b	.L96
 1250              	.L102:
2371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 (hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) != 0);
 1251              		.loc 1 2371 5 discriminator 1 view .LVU349
2371:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                 (hs->handle->flags & FS_FILE_FLAGS_HEADER_INCLUDED) != 0);
 1252              		.loc 1 2371 5 discriminator 1 view .LVU350
 1253 007c 084B     		ldr	r3, .L103+4
 1254 007e 40F64312 		movw	r2, #2371
 1255 0082 0B49     		ldr	r1, .L103+20
 1256 0084 0848     		ldr	r0, .L103+12
 1257 0086 FFF7FEFF 		bl	printf
 1258              	.LVL131:
 1259 008a D1E7     		b	.L97
 1260              	.LVL132:
 1261              	.L94:
2387:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->file = NULL;
 1262              		.loc 1 2387 5 view .LVU351
2387:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->file = NULL;
 1263              		.loc 1 2387 16 is_stmt 0 view .LVU352
 1264 008c 0023     		movs	r3, #0
 1265              	.LVL133:
2387:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->file = NULL;
 1266              		.loc 1 2387 16 view .LVU353
 1267 008e 4361     		str	r3, [r0, #20]
2388:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->left = 0;
 1268              		.loc 1 2388 5 is_stmt 1 view .LVU354
2388:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->left = 0;
 1269              		.loc 1 2388 14 is_stmt 0 view .LVU355
 1270 0090 8361     		str	r3, [r0, #24]
2389:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->retries = 0;
 1271              		.loc 1 2389 5 is_stmt 1 view .LVU356
2389:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->retries = 0;
 1272              		.loc 1 2389 14 is_stmt 0 view .LVU357
 1273 0092 4362     		str	r3, [r0, #36]
2390:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 1274              		.loc 1 2390 5 is_stmt 1 view .LVU358
2390:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 1275              		.loc 1 2390 17 is_stmt 0 view .LVU359
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 76


 1276 0094 80F82830 		strb	r3, [r0, #40]
 1277              	.LVL134:
 1278              	.L98:
2399:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_DYNAMIC_HEADERS */
 1279              		.loc 1 2399 3 is_stmt 1 view .LVU360
2416:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 1280              		.loc 1 2416 3 view .LVU361
2417:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1281              		.loc 1 2417 1 is_stmt 0 view .LVU362
 1282 0098 0020     		movs	r0, #0
 1283 009a 70BD     		pop	{r4, r5, r6, pc}
 1284              	.LVL135:
 1285              	.L104:
2417:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1286              		.loc 1 2417 1 view .LVU363
 1287              		.align	2
 1288              	.L103:
 1289 009c 60000000 		.word	.LC9
 1290 00a0 00000000 		.word	.LC0
 1291 00a4 00000000 		.word	.LC6
 1292 00a8 50000000 		.word	.LC2
 1293 00ac 14000000 		.word	.LC7
 1294 00b0 34000000 		.word	.LC8
 1295              		.cfi_endproc
 1296              	.LFE39:
 1298              		.section	.rodata.http_get_404_file.str1.4,"aMS",%progbits,1
 1299              		.align	2
 1300              	.LC10:
 1301 0000 2F343034 		.ascii	"/404.html\000"
 1301      2E68746D 
 1301      6C00
 1302 000a 0000     		.align	2
 1303              	.LC11:
 1304 000c 2F343034 		.ascii	"/404.htm\000"
 1304      2E68746D 
 1304      00
 1305 0015 000000   		.align	2
 1306              	.LC12:
 1307 0018 2F343034 		.ascii	"/404.shtml\000"
 1307      2E736874 
 1307      6D6C00
 1308              		.section	.text.http_get_404_file,"ax",%progbits
 1309              		.align	1
 1310              		.syntax unified
 1311              		.thumb
 1312              		.thumb_func
 1313              		.fpu fpv5-sp-d16
 1315              	http_get_404_file:
 1316              	.LVL136:
 1317              	.LFB36:
1674:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 1318              		.loc 1 1674 1 is_stmt 1 view -0
 1319              		.cfi_startproc
 1320              		@ args = 0, pretend = 0, frame = 0
 1321              		@ frame_needed = 0, uses_anonymous_args = 0
1674:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 1322              		.loc 1 1674 1 is_stmt 0 view .LVU365
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 77


 1323 0000 70B5     		push	{r4, r5, r6, lr}
 1324              	.LCFI21:
 1325              		.cfi_def_cfa_offset 16
 1326              		.cfi_offset 4, -16
 1327              		.cfi_offset 5, -12
 1328              		.cfi_offset 6, -8
 1329              		.cfi_offset 14, -4
 1330 0002 0646     		mov	r6, r0
 1331 0004 0C46     		mov	r4, r1
1675:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1332              		.loc 1 1675 3 is_stmt 1 view .LVU366
1677:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err = fs_open(&hs->file_handle, *uri);
 1333              		.loc 1 1677 3 view .LVU367
1677:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err = fs_open(&hs->file_handle, *uri);
 1334              		.loc 1 1677 8 is_stmt 0 view .LVU368
 1335 0006 0C49     		ldr	r1, .L109
 1336              	.LVL137:
1677:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err = fs_open(&hs->file_handle, *uri);
 1337              		.loc 1 1677 8 view .LVU369
 1338 0008 2160     		str	r1, [r4]
1678:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err != ERR_OK) {
 1339              		.loc 1 1678 3 is_stmt 1 view .LVU370
1678:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (err != ERR_OK) {
 1340              		.loc 1 1678 9 is_stmt 0 view .LVU371
 1341 000a 0546     		mov	r5, r0
 1342 000c FFF7FEFF 		bl	fs_open
 1343              	.LVL138:
1679:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* 404.html doesn't exist. Try 404.htm instead. */
 1344              		.loc 1 1679 3 is_stmt 1 view .LVU372
1679:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* 404.html doesn't exist. Try 404.htm instead. */
 1345              		.loc 1 1679 6 is_stmt 0 view .LVU373
 1346 0010 08B9     		cbnz	r0, .L108
 1347              	.LVL139:
 1348              	.L105:
1698:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1349              		.loc 1 1698 1 view .LVU374
 1350 0012 2846     		mov	r0, r5
 1351              	.LVL140:
1698:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1352              		.loc 1 1698 1 view .LVU375
 1353 0014 70BD     		pop	{r4, r5, r6, pc}
 1354              	.LVL141:
 1355              	.L108:
1681:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = fs_open(&hs->file_handle, *uri);
 1356              		.loc 1 1681 5 is_stmt 1 view .LVU376
1681:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     err = fs_open(&hs->file_handle, *uri);
 1357              		.loc 1 1681 10 is_stmt 0 view .LVU377
 1358 0016 0949     		ldr	r1, .L109+4
 1359 0018 2160     		str	r1, [r4]
1682:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err != ERR_OK) {
 1360              		.loc 1 1682 5 is_stmt 1 view .LVU378
1682:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err != ERR_OK) {
 1361              		.loc 1 1682 11 is_stmt 0 view .LVU379
 1362 001a 3046     		mov	r0, r6
 1363              	.LVL142:
1682:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err != ERR_OK) {
 1364              		.loc 1 1682 11 view .LVU380
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 78


 1365 001c FFF7FEFF 		bl	fs_open
 1366              	.LVL143:
1683:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* 404.htm doesn't exist either. Try 404.shtml instead. */
 1367              		.loc 1 1683 5 is_stmt 1 view .LVU381
1683:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* 404.htm doesn't exist either. Try 404.shtml instead. */
 1368              		.loc 1 1683 8 is_stmt 0 view .LVU382
 1369 0020 0028     		cmp	r0, #0
 1370 0022 F6D0     		beq	.L105
1685:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err = fs_open(&hs->file_handle, *uri);
 1371              		.loc 1 1685 7 is_stmt 1 view .LVU383
1685:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err = fs_open(&hs->file_handle, *uri);
 1372              		.loc 1 1685 12 is_stmt 0 view .LVU384
 1373 0024 0649     		ldr	r1, .L109+8
 1374 0026 2160     		str	r1, [r4]
1686:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (err != ERR_OK) {
 1375              		.loc 1 1686 7 is_stmt 1 view .LVU385
1686:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (err != ERR_OK) {
 1376              		.loc 1 1686 13 is_stmt 0 view .LVU386
 1377 0028 3046     		mov	r0, r6
 1378              	.LVL144:
1686:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (err != ERR_OK) {
 1379              		.loc 1 1686 13 view .LVU387
 1380 002a FFF7FEFF 		bl	fs_open
 1381              	.LVL145:
1687:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* 404.htm doesn't exist either. Indicate to the caller that it should
 1382              		.loc 1 1687 7 is_stmt 1 view .LVU388
1687:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* 404.htm doesn't exist either. Indicate to the caller that it should
 1383              		.loc 1 1687 10 is_stmt 0 view .LVU389
 1384 002e 0028     		cmp	r0, #0
 1385 0030 EFD0     		beq	.L105
1691:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         return NULL;
 1386              		.loc 1 1691 9 is_stmt 1 view .LVU390
1691:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         return NULL;
 1387              		.loc 1 1691 14 is_stmt 0 view .LVU391
 1388 0032 0025     		movs	r5, #0
 1389              	.LVL146:
1691:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         return NULL;
 1390              		.loc 1 1691 14 view .LVU392
 1391 0034 2560     		str	r5, [r4]
1692:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1392              		.loc 1 1692 9 is_stmt 1 view .LVU393
1692:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1393              		.loc 1 1692 16 is_stmt 0 view .LVU394
 1394 0036 ECE7     		b	.L105
 1395              	.L110:
 1396              		.align	2
 1397              	.L109:
 1398 0038 00000000 		.word	.LC10
 1399 003c 0C000000 		.word	.LC11
 1400 0040 18000000 		.word	.LC12
 1401              		.cfi_endproc
 1402              	.LFE36:
 1404              		.section	.text.http_find_file,"ax",%progbits
 1405              		.align	1
 1406              		.syntax unified
 1407              		.thumb
 1408              		.thumb_func
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 79


 1409              		.fpu fpv5-sp-d16
 1411              	http_find_file:
 1412              	.LVL147:
 1413              	.LFB38:
2177:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   size_t loop;
 1414              		.loc 1 2177 1 is_stmt 1 view -0
 1415              		.cfi_startproc
 1416              		@ args = 0, pretend = 0, frame = 8
 1417              		@ frame_needed = 0, uses_anonymous_args = 0
2177:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   size_t loop;
 1418              		.loc 1 2177 1 is_stmt 0 view .LVU396
 1419 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1420              	.LCFI22:
 1421              		.cfi_def_cfa_offset 36
 1422              		.cfi_offset 4, -36
 1423              		.cfi_offset 5, -32
 1424              		.cfi_offset 6, -28
 1425              		.cfi_offset 7, -24
 1426              		.cfi_offset 8, -20
 1427              		.cfi_offset 9, -16
 1428              		.cfi_offset 10, -12
 1429              		.cfi_offset 11, -8
 1430              		.cfi_offset 14, -4
 1431 0004 85B0     		sub	sp, sp, #20
 1432              	.LCFI23:
 1433              		.cfi_def_cfa_offset 56
 1434 0006 0446     		mov	r4, r0
 1435 0008 0391     		str	r1, [sp, #12]
 1436 000a 1646     		mov	r6, r2
2178:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct fs_file *file = NULL;
 1437              		.loc 1 2178 3 is_stmt 1 view .LVU397
2179:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *params = NULL;
 1438              		.loc 1 2179 3 view .LVU398
 1439              	.LVL148:
2180:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 1440              		.loc 1 2180 3 view .LVU399
2181:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_CGI
 1441              		.loc 1 2181 3 view .LVU400
2186:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* !LWIP_HTTPD_SSI */
 1442              		.loc 1 2186 3 view .LVU401
2193:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((uri_len > 0) && (uri[uri_len - 1] == '/') &&
 1443              		.loc 1 2193 3 view .LVU402
2193:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((uri_len > 0) && (uri[uri_len - 1] == '/') &&
 1444              		.loc 1 2193 20 is_stmt 0 view .LVU403
 1445 000c 0D46     		mov	r5, r1
 1446 000e 0846     		mov	r0, r1
 1447              	.LVL149:
2193:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((uri_len > 0) && (uri[uri_len - 1] == '/') &&
 1448              		.loc 1 2193 20 view .LVU404
 1449 0010 FFF7FEFF 		bl	strlen
 1450              	.LVL150:
2194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ((uri != http_uri_buf) || (uri_len == 1))) {
 1451              		.loc 1 2194 3 is_stmt 1 view .LVU405
2194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ((uri != http_uri_buf) || (uri_len == 1))) {
 1452              		.loc 1 2194 6 is_stmt 0 view .LVU406
 1453 0014 20B1     		cbz	r0, .L112
 1454 0016 8046     		mov	r8, r0
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 80


2194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ((uri != http_uri_buf) || (uri_len == 1))) {
 1455              		.loc 1 2194 28 discriminator 1 view .LVU407
 1456 0018 471E     		subs	r7, r0, #1
 1457 001a EB5D     		ldrb	r3, [r5, r7]	@ zero_extendqisi2
2194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ((uri != http_uri_buf) || (uri_len == 1))) {
 1458              		.loc 1 2194 21 discriminator 1 view .LVU408
 1459 001c 2F2B     		cmp	r3, #47
 1460 001e 1DD0     		beq	.L127
 1461              	.LVL151:
 1462              	.L112:
2239:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (params != NULL) {
 1463              		.loc 1 2239 5 is_stmt 1 view .LVU409
2239:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (params != NULL) {
 1464              		.loc 1 2239 14 is_stmt 0 view .LVU410
 1465 0020 3F21     		movs	r1, #63
 1466 0022 0398     		ldr	r0, [sp, #12]
 1467 0024 FFF7FEFF 		bl	strchr
 1468              	.LVL152:
2240:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* URI contains parameters. NULL-terminate the base URI */
 1469              		.loc 1 2240 5 is_stmt 1 view .LVU411
2240:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* URI contains parameters. NULL-terminate the base URI */
 1470              		.loc 1 2240 8 is_stmt 0 view .LVU412
 1471 0028 0746     		mov	r7, r0
 1472 002a 10B1     		cbz	r0, .L122
2242:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       params++;
 1473              		.loc 1 2242 7 is_stmt 1 view .LVU413
2242:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       params++;
 1474              		.loc 1 2242 15 is_stmt 0 view .LVU414
 1475 002c 0023     		movs	r3, #0
 1476 002e 07F8013B 		strb	r3, [r7], #1
2243:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1477              		.loc 1 2243 7 is_stmt 1 view .LVU415
 1478              	.LVL153:
 1479              	.L122:
2265:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1480              		.loc 1 2265 69 view .LVU416
2267:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err == ERR_OK) {
 1481              		.loc 1 2267 5 view .LVU417
2267:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (err == ERR_OK) {
 1482              		.loc 1 2267 11 is_stmt 0 view .LVU418
 1483 0032 2546     		mov	r5, r4
 1484 0034 0399     		ldr	r1, [sp, #12]
 1485 0036 2046     		mov	r0, r4
 1486 0038 FFF7FEFF 		bl	fs_open
 1487              	.LVL154:
2268:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       file = &hs->file_handle;
 1488              		.loc 1 2268 5 is_stmt 1 view .LVU419
2268:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       file = &hs->file_handle;
 1489              		.loc 1 2268 8 is_stmt 0 view .LVU420
 1490 003c 0028     		cmp	r0, #0
 1491 003e 5BD1     		bne	.L128
 1492              	.LVL155:
 1493              	.L121:
2285:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* None of the default filenames exist so send back a 404 page */
 1494              		.loc 1 2285 3 is_stmt 1 view .LVU421
2285:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* None of the default filenames exist so send back a 404 page */
 1495              		.loc 1 2285 6 is_stmt 0 view .LVU422
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 81


 1496 0040 002D     		cmp	r5, #0
 1497 0042 5FD0     		beq	.L129
 1498              	.L123:
2289:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 1499              		.loc 1 2289 3 is_stmt 1 view .LVU423
2289:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 1500              		.loc 1 2289 10 is_stmt 0 view .LVU424
 1501 0044 0197     		str	r7, [sp, #4]
 1502 0046 0023     		movs	r3, #0
 1503 0048 0093     		str	r3, [sp]
 1504 004a 039B     		ldr	r3, [sp, #12]
 1505 004c 3246     		mov	r2, r6
 1506 004e 2946     		mov	r1, r5
 1507 0050 2046     		mov	r0, r4
 1508 0052 FFF7FEFF 		bl	http_init_file
 1509              	.LVL156:
2290:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1510              		.loc 1 2290 1 view .LVU425
 1511 0056 05B0     		add	sp, sp, #20
 1512              	.LCFI24:
 1513              		.cfi_remember_state
 1514              		.cfi_def_cfa_offset 36
 1515              		@ sp needed
 1516 0058 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1517              	.LVL157:
 1518              	.L127:
 1519              	.LCFI25:
 1520              		.cfi_restore_state
2194:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       ((uri != http_uri_buf) || (uri_len == 1))) {
 1521              		.loc 1 2194 50 discriminator 2 view .LVU426
 1522 005c 2C4B     		ldr	r3, .L135
 1523 005e 9D42     		cmp	r5, r3
 1524 0060 08D0     		beq	.L130
 1525              	.L113:
 1526              	.LBB5:
2196:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (copy_len > 0) {
 1527              		.loc 1 2196 5 is_stmt 1 view .LVU427
2196:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (copy_len > 0) {
 1528              		.loc 1 2196 12 is_stmt 0 view .LVU428
 1529 0062 3F2F     		cmp	r7, #63
 1530 0064 28BF     		it	cs
 1531 0066 3F27     		movcs	r7, #63
 1532              	.LVL158:
2197:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       MEMCPY(http_uri_buf, uri, copy_len);
 1533              		.loc 1 2197 5 is_stmt 1 view .LVU429
2197:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       MEMCPY(http_uri_buf, uri, copy_len);
 1534              		.loc 1 2197 8 is_stmt 0 view .LVU430
 1535 0068 B8F1010F 		cmp	r8, #1
 1536 006c 05D1     		bne	.L131
 1537              	.LVL159:
 1538              	.L114:
 1539              	.LBB6:
 1540              	.LBB7:
2217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else
 1541              		.loc 1 2217 19 discriminator 1 view .LVU431
 1542 006e 4FF00009 		mov	r9, #0
 1543 0072 2DE0     		b	.L115
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 82


 1544              	.LVL160:
 1545              	.L130:
2217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else
 1546              		.loc 1 2217 19 discriminator 1 view .LVU432
 1547              	.LBE7:
 1548              	.LBE6:
 1549              	.LBE5:
2195:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     size_t copy_len = LWIP_MIN(sizeof(http_uri_buf) - 1, uri_len - 1);
 1550              		.loc 1 2195 30 view .LVU433
 1551 0074 0128     		cmp	r0, #1
 1552 0076 D3D1     		bne	.L112
 1553 0078 F3E7     		b	.L113
 1554              	.LVL161:
 1555              	.L131:
 1556              	.LBB13:
2198:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_uri_buf[copy_len] = 0;
 1557              		.loc 1 2198 7 is_stmt 1 view .LVU434
 1558 007a DFF89490 		ldr	r9, .L135
 1559 007e 3A46     		mov	r2, r7
 1560 0080 2946     		mov	r1, r5
 1561 0082 4846     		mov	r0, r9
 1562              	.LVL162:
2198:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       http_uri_buf[copy_len] = 0;
 1563              		.loc 1 2198 7 is_stmt 0 view .LVU435
 1564 0084 FFF7FEFF 		bl	memcpy
 1565              	.LVL163:
2199:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1566              		.loc 1 2199 7 is_stmt 1 view .LVU436
2199:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1567              		.loc 1 2199 30 is_stmt 0 view .LVU437
 1568 0088 0023     		movs	r3, #0
 1569 008a 09F80730 		strb	r3, [r9, r7]
 1570 008e EEE7     		b	.L114
 1571              	.LVL164:
 1572              	.L134:
 1573              	.LBB11:
 1574              	.LBB9:
 1575              	.LBB8:
2212:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           size_t name_copy_len = LWIP_MIN(len_left, name_len);
 1576              		.loc 1 2212 11 is_stmt 1 view .LVU438
2212:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           size_t name_copy_len = LWIP_MIN(len_left, name_len);
 1577              		.loc 1 2212 29 is_stmt 0 view .LVU439
 1578 0090 204B     		ldr	r3, .L135+4
 1579 0092 53F839A0 		ldr	r10, [r3, r9, lsl #3]
 1580 0096 5046     		mov	r0, r10
 1581 0098 FFF7FEFF 		bl	strlen
 1582              	.LVL165:
2213:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           MEMCPY(&http_uri_buf[copy_len], httpd_default_filenames[loop].name, name_copy_len);
 1583              		.loc 1 2213 11 is_stmt 1 view .LVU440
2213:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           MEMCPY(&http_uri_buf[copy_len], httpd_default_filenames[loop].name, name_copy_len);
 1584              		.loc 1 2213 18 is_stmt 0 view .LVU441
 1585 009c 8345     		cmp	fp, r0
 1586 009e 28BF     		it	cs
 1587 00a0 8346     		movcs	fp, r0
 1588              	.LVL166:
2214:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_uri_buf[copy_len + name_copy_len] = 0;
 1589              		.loc 1 2214 11 is_stmt 1 view .LVU442
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 83


 1590 00a2 1B4D     		ldr	r5, .L135
 1591 00a4 5A46     		mov	r2, fp
 1592 00a6 5146     		mov	r1, r10
 1593 00a8 E819     		adds	r0, r5, r7
 1594              	.LVL167:
2214:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_uri_buf[copy_len + name_copy_len] = 0;
 1595              		.loc 1 2214 11 is_stmt 0 view .LVU443
 1596 00aa FFF7FEFF 		bl	memcpy
 1597              	.LVL168:
2215:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
 1598              		.loc 1 2215 11 is_stmt 1 view .LVU444
2215:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
 1599              		.loc 1 2215 33 is_stmt 0 view .LVU445
 1600 00ae BB44     		add	fp, fp, r7
 1601              	.LVL169:
2215:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
 1602              		.loc 1 2215 50 view .LVU446
 1603 00b0 0023     		movs	r3, #0
 1604 00b2 05F80B30 		strb	r3, [r5, fp]
 1605              	.LBE8:
2217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else
 1606              		.loc 1 2217 19 view .LVU447
 1607 00b6 AA46     		mov	r10, r5
 1608 00b8 02E0     		b	.L117
 1609              	.LVL170:
 1610              	.L116:
2217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else
 1611              		.loc 1 2217 19 view .LVU448
 1612              	.LBE9:
2221:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1613              		.loc 1 2221 9 is_stmt 1 view .LVU449
2221:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1614              		.loc 1 2221 19 is_stmt 0 view .LVU450
 1615 00ba 164B     		ldr	r3, .L135+4
 1616 00bc 53F839A0 		ldr	r10, [r3, r9, lsl #3]
 1617              	.LVL171:
 1618              	.L117:
2223:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err = fs_open(&hs->file_handle, file_name);
 1619              		.loc 1 2223 84 is_stmt 1 view .LVU451
2224:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (err == ERR_OK) {
 1620              		.loc 1 2224 7 view .LVU452
2224:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (err == ERR_OK) {
 1621              		.loc 1 2224 13 is_stmt 0 view .LVU453
 1622 00c0 2546     		mov	r5, r4
 1623 00c2 5146     		mov	r1, r10
 1624 00c4 2046     		mov	r0, r4
 1625 00c6 FFF7FEFF 		bl	fs_open
 1626              	.LVL172:
2225:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         uri = file_name;
 1627              		.loc 1 2225 7 is_stmt 1 view .LVU454
2225:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         uri = file_name;
 1628              		.loc 1 2225 10 is_stmt 0 view .LVU455
 1629 00ca 68B1     		cbz	r0, .L132
2225:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         uri = file_name;
 1630              		.loc 1 2225 10 view .LVU456
 1631              	.LBE11:
2206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       const char *file_name;
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 84


 1632              		.loc 1 2206 50 is_stmt 1 discriminator 2 view .LVU457
2206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       const char *file_name;
 1633              		.loc 1 2206 54 is_stmt 0 discriminator 2 view .LVU458
 1634 00cc 09F10109 		add	r9, r9, #1
 1635              	.LVL173:
 1636              	.L115:
2206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       const char *file_name;
 1637              		.loc 1 2206 20 is_stmt 1 discriminator 1 view .LVU459
2206:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       const char *file_name;
 1638              		.loc 1 2206 5 is_stmt 0 discriminator 1 view .LVU460
 1639 00d0 B9F1040F 		cmp	r9, #4
 1640 00d4 0BD8     		bhi	.L133
 1641              	.LBB12:
2207:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_MAX_REQUEST_URI_LEN
 1642              		.loc 1 2207 7 is_stmt 1 view .LVU461
2209:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         size_t len_left = sizeof(http_uri_buf) - copy_len - 1;
 1643              		.loc 1 2209 7 view .LVU462
2209:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         size_t len_left = sizeof(http_uri_buf) - copy_len - 1;
 1644              		.loc 1 2209 10 is_stmt 0 view .LVU463
 1645 00d6 B8F1010F 		cmp	r8, #1
 1646 00da EED0     		beq	.L116
 1647              	.LBB10:
2210:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         if (len_left > 0) {
 1648              		.loc 1 2210 9 is_stmt 1 view .LVU464
 1649              	.LVL174:
2211:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           size_t name_len = strlen(httpd_default_filenames[loop].name);
 1650              		.loc 1 2211 9 view .LVU465
2211:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           size_t name_len = strlen(httpd_default_filenames[loop].name);
 1651              		.loc 1 2211 12 is_stmt 0 view .LVU466
 1652 00dc D7F13F0B 		rsbs	fp, r7, #63
 1653              	.LVL175:
2211:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           size_t name_len = strlen(httpd_default_filenames[loop].name);
 1654              		.loc 1 2211 12 view .LVU467
 1655 00e0 D6D1     		bne	.L134
2217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else
 1656              		.loc 1 2217 19 view .LVU468
 1657 00e2 DFF82CA0 		ldr	r10, .L135
 1658 00e6 EBE7     		b	.L117
 1659              	.LVL176:
 1660              	.L132:
2217:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       } else
 1661              		.loc 1 2217 19 view .LVU469
 1662              	.LBE10:
2226:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         file = &hs->file_handle;
 1663              		.loc 1 2226 9 is_stmt 1 view .LVU470
2226:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         file = &hs->file_handle;
 1664              		.loc 1 2226 13 is_stmt 0 view .LVU471
 1665 00e8 CDF80CA0 		str	r10, [sp, #12]
2227:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("Opened.\n"));
 1666              		.loc 1 2227 9 is_stmt 1 view .LVU472
 1667              	.LVL177:
2228:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
 1668              		.loc 1 2228 65 view .LVU473
2232:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1669              		.loc 1 2232 9 view .LVU474
 1670 00ec 00E0     		b	.L119
 1671              	.LVL178:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 85


 1672              	.L133:
2232:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1673              		.loc 1 2232 9 is_stmt 0 view .LVU475
 1674              	.LBE12:
 1675              	.LBE13:
2179:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *params = NULL;
 1676              		.loc 1 2179 19 view .LVU476
 1677 00ee 0025     		movs	r5, #0
 1678              	.LVL179:
 1679              	.L119:
2236:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* No - we've been asked for a specific file. */
 1680              		.loc 1 2236 3 is_stmt 1 view .LVU477
2236:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* No - we've been asked for a specific file. */
 1681              		.loc 1 2236 6 is_stmt 0 view .LVU478
 1682 00f0 002D     		cmp	r5, #0
 1683 00f2 95D0     		beq	.L112
2180:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 1684              		.loc 1 2180 9 view .LVU479
 1685 00f4 0027     		movs	r7, #0
 1686              	.LVL180:
2180:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   err_t err;
 1687              		.loc 1 2180 9 view .LVU480
 1688 00f6 A3E7     		b	.L121
 1689              	.LVL181:
 1690              	.L128:
2271:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1691              		.loc 1 2271 7 is_stmt 1 view .LVU481
2271:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1692              		.loc 1 2271 14 is_stmt 0 view .LVU482
 1693 00f8 03A9     		add	r1, sp, #12
 1694 00fa 2046     		mov	r0, r4
 1695              	.LVL182:
2271:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1696              		.loc 1 2271 14 view .LVU483
 1697 00fc FFF7FEFF 		bl	http_get_404_file
 1698              	.LVL183:
 1699 0100 0546     		mov	r5, r0
 1700              	.LVL184:
2271:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1701              		.loc 1 2271 14 view .LVU484
 1702 0102 9DE7     		b	.L121
 1703              	.LVL185:
 1704              	.L129:
2287:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 1705              		.loc 1 2287 5 is_stmt 1 view .LVU485
2287:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 1706              		.loc 1 2287 12 is_stmt 0 view .LVU486
 1707 0104 03A9     		add	r1, sp, #12
 1708 0106 2046     		mov	r0, r4
 1709 0108 FFF7FEFF 		bl	http_get_404_file
 1710              	.LVL186:
 1711 010c 0546     		mov	r5, r0
 1712              	.LVL187:
2287:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 1713              		.loc 1 2287 12 view .LVU487
 1714 010e 99E7     		b	.L123
 1715              	.L136:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 86


 1716              		.align	2
 1717              	.L135:
 1718 0110 00000000 		.word	.LANCHOR0
 1719 0114 00000000 		.word	.LANCHOR1
 1720              		.cfi_endproc
 1721              	.LFE38:
 1723              		.section	.rodata.http_parse_request.str1.4,"aMS",%progbits,1
 1724              		.align	2
 1725              	.LC13:
 1726 0000 7020213D 		.ascii	"p != NULL\000"
 1726      204E554C 
 1726      4C00
 1727 000a 0000     		.align	2
 1728              	.LC14:
 1729 000c 68732021 		.ascii	"hs != NULL\000"
 1729      3D204E55 
 1729      4C4C00
 1730 0017 00       		.align	2
 1731              	.LC15:
 1732 0018 0D0A00   		.ascii	"\015\012\000"
 1733 001b 00       		.align	2
 1734              	.LC16:
 1735 001c 47455420 		.ascii	"GET \000"
 1735      00
 1736 0021 000000   		.align	2
 1737              	.LC17:
 1738 0024 2000     		.ascii	" \000"
 1739              		.section	.text.http_parse_request,"ax",%progbits
 1740              		.align	1
 1741              		.syntax unified
 1742              		.thumb
 1743              		.thumb_func
 1744              		.fpu fpv5-sp-d16
 1746              	http_parse_request:
 1747              	.LVL188:
 1748              	.LFB37:
1953:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *data;
 1749              		.loc 1 1953 1 is_stmt 1 view -0
 1750              		.cfi_startproc
 1751              		@ args = 0, pretend = 0, frame = 0
 1752              		@ frame_needed = 0, uses_anonymous_args = 0
1953:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *data;
 1753              		.loc 1 1953 1 is_stmt 0 view .LVU489
 1754 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1755              	.LCFI26:
 1756              		.cfi_def_cfa_offset 32
 1757              		.cfi_offset 4, -32
 1758              		.cfi_offset 5, -28
 1759              		.cfi_offset 6, -24
 1760              		.cfi_offset 7, -20
 1761              		.cfi_offset 8, -16
 1762              		.cfi_offset 9, -12
 1763              		.cfi_offset 10, -8
 1764              		.cfi_offset 14, -4
 1765 0004 0C46     		mov	r4, r1
1954:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   char *crlf;
 1766              		.loc 1 1954 3 is_stmt 1 view .LVU490
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 87


1955:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   u16_t data_len;
 1767              		.loc 1 1955 3 view .LVU491
1956:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct pbuf *p = inp;
 1768              		.loc 1 1956 3 view .LVU492
1957:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_REQUESTLIST
 1769              		.loc 1 1957 3 view .LVU493
 1770              	.LVL189:
1959:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif /* LWIP_HTTPD_SUPPORT_REQUESTLIST */
 1771              		.loc 1 1959 3 view .LVU494
1965:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("p != NULL", p != NULL);
 1772              		.loc 1 1965 3 view .LVU495
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1773              		.loc 1 1966 3 view .LVU496
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1774              		.loc 1 1966 3 view .LVU497
 1775 0006 0546     		mov	r5, r0
 1776 0008 0028     		cmp	r0, #0
 1777 000a 58D0     		beq	.L154
 1778              	.LVL190:
 1779              	.L138:
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1780              		.loc 1 1966 3 discriminator 3 view .LVU498
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1781              		.loc 1 1966 3 discriminator 3 view .LVU499
1967:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1782              		.loc 1 1967 3 discriminator 3 view .LVU500
1967:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1783              		.loc 1 1967 3 discriminator 3 view .LVU501
 1784 000c 002C     		cmp	r4, #0
 1785 000e 5ED0     		beq	.L155
 1786              	.L139:
1967:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1787              		.loc 1 1967 3 discriminator 3 view .LVU502
1967:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1788              		.loc 1 1967 3 discriminator 3 view .LVU503
1969:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Received data while sending a file\n"));
 1789              		.loc 1 1969 3 discriminator 3 view .LVU504
1969:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Received data while sending a file\n"));
 1790              		.loc 1 1969 10 is_stmt 0 discriminator 3 view .LVU505
 1791 0010 6369     		ldr	r3, [r4, #20]
1969:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Received data while sending a file\n"));
 1792              		.loc 1 1969 6 discriminator 3 view .LVU506
 1793 0012 002B     		cmp	r3, #0
 1794 0014 40F08880 		bne	.L149
1969:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Received data while sending a file\n"));
 1795              		.loc 1 1969 34 discriminator 1 view .LVU507
 1796 0018 A369     		ldr	r3, [r4, #24]
1969:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("Received data while sending a file\n"));
 1797              		.loc 1 1969 28 discriminator 1 view .LVU508
 1798 001a 002B     		cmp	r3, #0
 1799 001c 40F08780 		bne	.L150
1978:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1800              		.loc 1 1978 70 is_stmt 1 view .LVU509
1983:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("First pbuf\n"));
 1801              		.loc 1 1983 3 view .LVU510
1983:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("First pbuf\n"));
 1802              		.loc 1 1983 9 is_stmt 0 view .LVU511
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 88


 1803 0020 206A     		ldr	r0, [r4, #32]
1983:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("First pbuf\n"));
 1804              		.loc 1 1983 6 view .LVU512
 1805 0022 0028     		cmp	r0, #0
 1806 0024 5BD0     		beq	.L156
1987:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_cat(hs->req, p);
 1807              		.loc 1 1987 50 is_stmt 1 view .LVU513
1988:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 1808              		.loc 1 1988 5 view .LVU514
 1809 0026 2946     		mov	r1, r5
 1810 0028 FFF7FEFF 		bl	pbuf_cat
 1811              	.LVL191:
 1812              	.L142:
1992:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1813              		.loc 1 1992 3 view .LVU515
 1814 002c 2846     		mov	r0, r5
 1815 002e FFF7FEFF 		bl	pbuf_ref
 1816              	.LVL192:
1994:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_len = LWIP_MIN(hs->req->tot_len, LWIP_HTTPD_MAX_REQ_LENGTH);
 1817              		.loc 1 1994 3 view .LVU516
1994:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_len = LWIP_MIN(hs->req->tot_len, LWIP_HTTPD_MAX_REQ_LENGTH);
 1818              		.loc 1 1994 9 is_stmt 0 view .LVU517
 1819 0032 206A     		ldr	r0, [r4, #32]
1994:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_len = LWIP_MIN(hs->req->tot_len, LWIP_HTTPD_MAX_REQ_LENGTH);
 1820              		.loc 1 1994 14 view .LVU518
 1821 0034 0368     		ldr	r3, [r0]
1994:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_len = LWIP_MIN(hs->req->tot_len, LWIP_HTTPD_MAX_REQ_LENGTH);
 1822              		.loc 1 1994 6 view .LVU519
 1823 0036 002B     		cmp	r3, #0
 1824 0038 53D0     		beq	.L143
1995:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_copy_partial(hs->req, httpd_req_buf, data_len, 0);
 1825              		.loc 1 1995 5 is_stmt 1 view .LVU520
1995:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_copy_partial(hs->req, httpd_req_buf, data_len, 0);
 1826              		.loc 1 1995 16 is_stmt 0 view .LVU521
 1827 003a 0589     		ldrh	r5, [r0, #8]
 1828              	.LVL193:
1995:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     pbuf_copy_partial(hs->req, httpd_req_buf, data_len, 0);
 1829              		.loc 1 1995 14 view .LVU522
 1830 003c 40F2FF33 		movw	r3, #1023
 1831 0040 9D42     		cmp	r5, r3
 1832 0042 28BF     		it	cs
 1833 0044 1D46     		movcs	r5, r3
 1834              	.LVL194:
1996:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data = httpd_req_buf;
 1835              		.loc 1 1996 5 is_stmt 1 view .LVU523
 1836 0046 3E4E     		ldr	r6, .L159
 1837 0048 0023     		movs	r3, #0
 1838 004a 2A46     		mov	r2, r5
 1839 004c 3146     		mov	r1, r6
 1840 004e FFF7FEFF 		bl	pbuf_copy_partial
 1841              	.LVL195:
1997:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
 1842              		.loc 1 1997 5 view .LVU524
 1843              	.L144:
2004:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 1844              		.loc 1 2004 86 view .LVU525
2009:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* wait for CRLF before parsing anything */
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 89


 1845              		.loc 1 2009 3 view .LVU526
2009:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* wait for CRLF before parsing anything */
 1846              		.loc 1 2009 6 is_stmt 0 view .LVU527
 1847 0052 062D     		cmp	r5, #6
 1848 0054 25D9     		bls	.L145
2011:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (crlf != NULL) {
 1849              		.loc 1 2011 5 is_stmt 1 view .LVU528
2011:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (crlf != NULL) {
 1850              		.loc 1 2011 12 is_stmt 0 view .LVU529
 1851 0056 A946     		mov	r9, r5
 1852 0058 2A46     		mov	r2, r5
 1853 005a 3A49     		ldr	r1, .L159+4
 1854 005c 3046     		mov	r0, r6
 1855 005e FFF7FEFF 		bl	lwip_strnstr
 1856              	.LVL196:
2012:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 1857              		.loc 1 2012 5 is_stmt 1 view .LVU530
2012:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 1858              		.loc 1 2012 8 is_stmt 0 view .LVU531
 1859 0062 F0B1     		cbz	r0, .L145
 1860              	.LBB14:
2016:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       char *sp1, *sp2;
 1861              		.loc 1 2016 7 is_stmt 1 view .LVU532
 1862              	.LVL197:
2017:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       u16_t left_len, uri_len;
 1863              		.loc 1 2017 7 view .LVU533
2018:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("CRLF received, parsing request\n"));
 1864              		.loc 1 2018 7 view .LVU534
2019:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* parse method */
 1865              		.loc 1 2019 86 view .LVU535
2021:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         sp1 = data + 3;
 1866              		.loc 1 2021 7 view .LVU536
2021:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         sp1 = data + 3;
 1867              		.loc 1 2021 12 is_stmt 0 view .LVU537
 1868 0064 0422     		movs	r2, #4
 1869 0066 3849     		ldr	r1, .L159+8
 1870 0068 3046     		mov	r0, r6
 1871              	.LVL198:
2021:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         sp1 = data + 3;
 1872              		.loc 1 2021 12 view .LVU538
 1873 006a FFF7FEFF 		bl	strncmp
 1874              	.LVL199:
2021:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         sp1 = data + 3;
 1875              		.loc 1 2021 10 view .LVU539
 1876 006e 8246     		mov	r10, r0
 1877 0070 0028     		cmp	r0, #0
 1878 0072 39D1     		bne	.L146
2022:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* received GET request */
 1879              		.loc 1 2022 9 is_stmt 1 view .LVU540
2022:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* received GET request */
 1880              		.loc 1 2022 13 is_stmt 0 view .LVU541
 1881 0074 F71C     		adds	r7, r6, #3
 1882              	.LVL200:
2024:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 1883              		.loc 1 2024 80 is_stmt 1 view .LVU542
2042:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       sp2 = lwip_strnstr(sp1 + 1, " ", left_len);
 1884              		.loc 1 2042 7 view .LVU543
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 90


2042:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       sp2 = lwip_strnstr(sp1 + 1, " ", left_len);
 1885              		.loc 1 2042 43 is_stmt 0 view .LVU544
 1886 0076 06F10408 		add	r8, r6, #4
2042:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       sp2 = lwip_strnstr(sp1 + 1, " ", left_len);
 1887              		.loc 1 2042 16 view .LVU545
 1888 007a 043D     		subs	r5, r5, #4
 1889              	.LVL201:
2042:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       sp2 = lwip_strnstr(sp1 + 1, " ", left_len);
 1890              		.loc 1 2042 16 view .LVU546
 1891 007c ADB2     		uxth	r5, r5
2043:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_V09
 1892              		.loc 1 2043 7 is_stmt 1 view .LVU547
2043:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_V09
 1893              		.loc 1 2043 13 is_stmt 0 view .LVU548
 1894 007e 2A46     		mov	r2, r5
 1895 0080 3249     		ldr	r1, .L159+12
 1896 0082 4046     		mov	r0, r8
 1897 0084 FFF7FEFF 		bl	lwip_strnstr
 1898              	.LVL202:
2045:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* HTTP 0.9: respond with correct protocol version */
 1899              		.loc 1 2045 7 is_stmt 1 view .LVU549
2045:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* HTTP 0.9: respond with correct protocol version */
 1900              		.loc 1 2045 10 is_stmt 0 view .LVU550
 1901 0088 0346     		mov	r3, r0
 1902 008a 0028     		cmp	r0, #0
 1903 008c 31D0     		beq	.L157
 1904              	.LVL203:
 1905              	.L148:
2057:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if ((sp2 != 0) && (sp2 > sp1)) {
 1906              		.loc 1 2057 7 is_stmt 1 view .LVU551
2057:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if ((sp2 != 0) && (sp2 > sp1)) {
 1907              		.loc 1 2057 29 is_stmt 0 view .LVU552
 1908 008e A3EB0805 		sub	r5, r3, r8
 1909              	.LVL204:
2058:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* wait for CRLFCRLF (indicating end of HTTP headers) before parsing anything */
 1910              		.loc 1 2058 7 is_stmt 1 view .LVU553
2058:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* wait for CRLFCRLF (indicating end of HTTP headers) before parsing anything */
 1911              		.loc 1 2058 30 is_stmt 0 view .LVU554
 1912 0092 BB42     		cmp	r3, r7
 1913 0094 94BF     		ite	ls
 1914 0096 0027     		movls	r7, #0
 1915              	.LVL205:
2058:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* wait for CRLFCRLF (indicating end of HTTP headers) before parsing anything */
 1916              		.loc 1 2058 30 view .LVU555
 1917 0098 0127     		movhi	r7, #1
2058:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* wait for CRLFCRLF (indicating end of HTTP headers) before parsing anything */
 1918              		.loc 1 2058 22 view .LVU556
 1919 009a 002B     		cmp	r3, #0
 1920 009c 08BF     		it	eq
 1921 009e 0027     		moveq	r7, #0
2058:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* wait for CRLFCRLF (indicating end of HTTP headers) before parsing anything */
 1922              		.loc 1 2058 10 view .LVU557
 1923 00a0 87BB     		cbnz	r7, .L158
 1924              	.LVL206:
 1925              	.L145:
2102:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 1926              		.loc 1 2102 52 is_stmt 1 view .LVU558
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 91


 1927              	.LBE14:
2108:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((hs->req->tot_len <= LWIP_HTTPD_REQ_BUFSIZE) &&
 1928              		.loc 1 2108 3 view .LVU559
2108:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if ((hs->req->tot_len <= LWIP_HTTPD_REQ_BUFSIZE) &&
 1929              		.loc 1 2108 10 is_stmt 0 view .LVU560
 1930 00a2 206A     		ldr	r0, [r4, #32]
 1931 00a4 FFF7FEFF 		bl	pbuf_clen
 1932              	.LVL207:
2109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       (clen <= LWIP_HTTPD_REQ_QUEUELEN)) {
 1933              		.loc 1 2109 3 is_stmt 1 view .LVU561
2109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       (clen <= LWIP_HTTPD_REQ_QUEUELEN)) {
 1934              		.loc 1 2109 10 is_stmt 0 view .LVU562
 1935 00a8 236A     		ldr	r3, [r4, #32]
2109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       (clen <= LWIP_HTTPD_REQ_QUEUELEN)) {
 1936              		.loc 1 2109 15 view .LVU563
 1937 00aa 1B89     		ldrh	r3, [r3, #8]
2109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       (clen <= LWIP_HTTPD_REQ_QUEUELEN)) {
 1938              		.loc 1 2109 6 view .LVU564
 1939 00ac B3F5806F 		cmp	r3, #1024
 1940 00b0 40D2     		bcs	.L151
2109:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       (clen <= LWIP_HTTPD_REQ_QUEUELEN)) {
 1941              		.loc 1 2109 52 discriminator 1 view .LVU565
 1942 00b2 0528     		cmp	r0, #5
 1943 00b4 41D9     		bls	.L152
2121:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 1944              		.loc 1 2121 12 view .LVU566
 1945 00b6 6FF00F00 		mvn	r0, #15
 1946              	.LVL208:
 1947              	.L140:
2123:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1948              		.loc 1 2123 1 view .LVU567
 1949 00ba BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1950              	.LVL209:
 1951              	.L154:
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1952              		.loc 1 1966 3 is_stmt 1 discriminator 1 view .LVU568
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1953              		.loc 1 1966 3 discriminator 1 view .LVU569
 1954 00be 244B     		ldr	r3, .L159+16
 1955 00c0 40F2AE72 		movw	r2, #1966
 1956              	.LVL210:
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1957              		.loc 1 1966 3 is_stmt 0 discriminator 1 view .LVU570
 1958 00c4 2349     		ldr	r1, .L159+20
 1959              	.LVL211:
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1960              		.loc 1 1966 3 discriminator 1 view .LVU571
 1961 00c6 2448     		ldr	r0, .L159+24
 1962              	.LVL212:
1966:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("hs != NULL", hs != NULL);
 1963              		.loc 1 1966 3 discriminator 1 view .LVU572
 1964 00c8 FFF7FEFF 		bl	printf
 1965              	.LVL213:
 1966 00cc 9EE7     		b	.L138
 1967              	.L155:
1967:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1968              		.loc 1 1967 3 is_stmt 1 discriminator 1 view .LVU573
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 92


1967:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 1969              		.loc 1 1967 3 discriminator 1 view .LVU574
 1970 00ce 204B     		ldr	r3, .L159+16
 1971 00d0 40F2AF72 		movw	r2, #1967
 1972 00d4 2149     		ldr	r1, .L159+28
 1973 00d6 2048     		ldr	r0, .L159+24
 1974 00d8 FFF7FEFF 		bl	printf
 1975              	.LVL214:
 1976 00dc 98E7     		b	.L139
 1977              	.L156:
1984:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     hs->req = p;
 1978              		.loc 1 1984 47 view .LVU575
1985:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 1979              		.loc 1 1985 5 view .LVU576
1985:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else {
 1980              		.loc 1 1985 13 is_stmt 0 view .LVU577
 1981 00de 2562     		str	r5, [r4, #32]
 1982 00e0 A4E7     		b	.L142
 1983              	.L143:
2001:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_len = p->len;
 1984              		.loc 1 2001 5 is_stmt 1 view .LVU578
2001:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     data_len = p->len;
 1985              		.loc 1 2001 10 is_stmt 0 view .LVU579
 1986 00e2 6E68     		ldr	r6, [r5, #4]
 1987              	.LVL215:
2002:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (p->len != p->tot_len) {
 1988              		.loc 1 2002 5 is_stmt 1 view .LVU580
2002:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     if (p->len != p->tot_len) {
 1989              		.loc 1 2002 14 is_stmt 0 view .LVU581
 1990 00e4 6D89     		ldrh	r5, [r5, #10]
 1991              	.LVL216:
2003:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_DEBUGF(HTTPD_DEBUG, ("Warning: incomplete header due to chained pbufs\n"));
 1992              		.loc 1 2003 5 is_stmt 1 view .LVU582
 1993 00e6 B4E7     		b	.L144
 1994              	.LVL217:
 1995              	.L146:
 1996              	.LBB16:
2035:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* unsupported method! */
 1997              		.loc 1 2035 9 view .LVU583
2035:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* unsupported method! */
 1998              		.loc 1 2035 17 is_stmt 0 view .LVU584
 1999 00e8 0023     		movs	r3, #0
 2000 00ea 3371     		strb	r3, [r6, #4]
2038:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         return http_find_error_file(hs, 501);
 2001              		.loc 1 2038 41 is_stmt 1 view .LVU585
2039:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 2002              		.loc 1 2039 9 view .LVU586
2039:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 2003              		.loc 1 2039 16 is_stmt 0 view .LVU587
 2004 00ec 6FF00F00 		mvn	r0, #15
 2005 00f0 E3E7     		b	.L140
 2006              	.LVL218:
 2007              	.L157:
2047:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         is_09 = 1;
 2008              		.loc 1 2047 9 is_stmt 1 view .LVU588
2047:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         is_09 = 1;
 2009              		.loc 1 2047 15 is_stmt 0 view .LVU589
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 93


 2010 00f2 2A46     		mov	r2, r5
 2011 00f4 1349     		ldr	r1, .L159+4
 2012 00f6 4046     		mov	r0, r8
 2013              	.LVL219:
2047:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         is_09 = 1;
 2014              		.loc 1 2047 15 view .LVU590
 2015 00f8 FFF7FEFF 		bl	lwip_strnstr
 2016              	.LVL220:
2047:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         is_09 = 1;
 2017              		.loc 1 2047 15 view .LVU591
 2018 00fc 0346     		mov	r3, r0
 2019              	.LVL221:
2048:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 2020              		.loc 1 2048 9 is_stmt 1 view .LVU592
2048:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 2021              		.loc 1 2048 15 is_stmt 0 view .LVU593
 2022 00fe 4FF0010A 		mov	r10, #1
 2023 0102 C4E7     		b	.L148
 2024              	.LVL222:
 2025              	.L158:
2060:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           char *uri = sp1 + 1;
 2026              		.loc 1 2060 9 is_stmt 1 view .LVU594
2060:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           char *uri = sp1 + 1;
 2027              		.loc 1 2060 13 is_stmt 0 view .LVU595
 2028 0104 4A46     		mov	r2, r9
 2029 0106 1649     		ldr	r1, .L159+32
 2030 0108 3046     		mov	r0, r6
 2031              	.LVL223:
2060:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           char *uri = sp1 + 1;
 2032              		.loc 1 2060 13 view .LVU596
 2033 010a FFF7FEFF 		bl	lwip_strnstr
 2034              	.LVL224:
2060:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           char *uri = sp1 + 1;
 2035              		.loc 1 2060 12 view .LVU597
 2036 010e 0028     		cmp	r0, #0
 2037 0110 C7D0     		beq	.L145
 2038              	.LBB15:
2061:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_11_KEEPALIVE
 2039              		.loc 1 2061 11 is_stmt 1 view .LVU598
 2040              	.LVL225:
2073:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           uri[uri_len] = 0;
 2041              		.loc 1 2073 11 view .LVU599
2073:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           uri[uri_len] = 0;
 2042              		.loc 1 2073 16 is_stmt 0 view .LVU600
 2043 0112 0023     		movs	r3, #0
 2044 0114 F370     		strb	r3, [r6, #3]
2074:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           LWIP_DEBUGF(HTTPD_DEBUG, ("Received \"%s\" request for URI: \"%s\"\n",
 2045              		.loc 1 2074 11 is_stmt 1 view .LVU601
2074:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           LWIP_DEBUGF(HTTPD_DEBUG, ("Received \"%s\" request for URI: \"%s\"\n",
 2046              		.loc 1 2074 14 is_stmt 0 view .LVU602
 2047 0116 ADB2     		uxth	r5, r5
2074:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           LWIP_DEBUGF(HTTPD_DEBUG, ("Received \"%s\" request for URI: \"%s\"\n",
 2048              		.loc 1 2074 24 view .LVU603
 2049 0118 08F80530 		strb	r3, [r8, r5]
2076:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 2050              		.loc 1 2076 48 is_stmt 1 view .LVU604
2098:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 94


 2051              		.loc 1 2098 13 view .LVU605
2098:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
 2052              		.loc 1 2098 20 is_stmt 0 view .LVU606
 2053 011c 5246     		mov	r2, r10
 2054 011e 4146     		mov	r1, r8
 2055 0120 2046     		mov	r0, r4
 2056 0122 FFF7FEFF 		bl	http_find_file
 2057              	.LVL226:
 2058 0126 C8E7     		b	.L140
 2059              	.LVL227:
 2060              	.L149:
2098:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           }
 2061              		.loc 1 2098 20 view .LVU607
 2062              	.LBE15:
 2063              	.LBE16:
1973:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2064              		.loc 1 1973 12 view .LVU608
 2065 0128 6FF00700 		mvn	r0, #7
 2066 012c C5E7     		b	.L140
 2067              	.L150:
 2068 012e 6FF00700 		mvn	r0, #7
 2069 0132 C2E7     		b	.L140
 2070              	.LVL228:
 2071              	.L151:
2121:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2072              		.loc 1 2121 12 view .LVU609
 2073 0134 6FF00F00 		mvn	r0, #15
 2074              	.LVL229:
2121:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2075              		.loc 1 2121 12 view .LVU610
 2076 0138 BFE7     		b	.L140
 2077              	.LVL230:
 2078              	.L152:
2112:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
 2079              		.loc 1 2112 12 view .LVU611
 2080 013a 6FF00400 		mvn	r0, #4
 2081              	.LVL231:
2112:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   } else
 2082              		.loc 1 2112 12 view .LVU612
 2083 013e BCE7     		b	.L140
 2084              	.L160:
 2085              		.align	2
 2086              	.L159:
 2087 0140 00000000 		.word	.LANCHOR2
 2088 0144 18000000 		.word	.LC15
 2089 0148 1C000000 		.word	.LC16
 2090 014c 24000000 		.word	.LC17
 2091 0150 00000000 		.word	.LC0
 2092 0154 00000000 		.word	.LC13
 2093 0158 50000000 		.word	.LC2
 2094 015c 0C000000 		.word	.LC14
 2095 0160 60000000 		.word	.LC9
 2096              		.cfi_endproc
 2097              	.LFE37:
 2099              		.section	.rodata.http_recv.str1.4,"aMS",%progbits,1
 2100              		.align	2
 2101              	.LC18:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 95


 2102 0000 68747470 		.ascii	"http_parse_request: unexpected return value\000"
 2102      5F706172 
 2102      73655F72 
 2102      65717565 
 2102      73743A20 
 2103              		.section	.text.http_recv,"ax",%progbits
 2104              		.align	1
 2105              		.syntax unified
 2106              		.thumb
 2107              		.thumb_func
 2108              		.fpu fpv5-sp-d16
 2110              	http_recv:
 2111              	.LVL232:
 2112              	.LFB43:
2517:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
 2113              		.loc 1 2517 1 is_stmt 1 view -0
 2114              		.cfi_startproc
 2115              		@ args = 0, pretend = 0, frame = 0
 2116              		@ frame_needed = 0, uses_anonymous_args = 0
2517:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs = (struct http_state *)arg;
 2117              		.loc 1 2517 1 is_stmt 0 view .LVU614
 2118 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2119              	.LCFI27:
 2120              		.cfi_def_cfa_offset 24
 2121              		.cfi_offset 3, -24
 2122              		.cfi_offset 4, -20
 2123              		.cfi_offset 5, -16
 2124              		.cfi_offset 6, -12
 2125              		.cfi_offset 7, -8
 2126              		.cfi_offset 14, -4
 2127 0002 0446     		mov	r4, r0
 2128 0004 0D46     		mov	r5, r1
2518:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG | LWIP_DBG_TRACE, ("http_recv: pcb=%p pbuf=%p err=%s\n", (void *)pcb,
 2129              		.loc 1 2518 3 is_stmt 1 view .LVU615
 2130              	.LVL233:
2520:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2131              		.loc 1 2520 44 view .LVU616
2522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error or closed by other side? */
 2132              		.loc 1 2522 3 view .LVU617
2522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error or closed by other side? */
 2133              		.loc 1 2522 29 is_stmt 0 view .LVU618
 2134 0006 1646     		mov	r6, r2
 2135 0008 B2FA82F2 		clz	r2, r2
 2136              	.LVL234:
2522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error or closed by other side? */
 2137              		.loc 1 2522 29 view .LVU619
 2138 000c 5209     		lsrs	r2, r2, #5
2522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error or closed by other side? */
 2139              		.loc 1 2522 23 view .LVU620
 2140 000e 002B     		cmp	r3, #0
 2141 0010 18BF     		it	ne
 2142 0012 0122     		movne	r2, #1
2522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error or closed by other side? */
 2143              		.loc 1 2522 6 view .LVU621
 2144 0014 52B9     		cbnz	r2, .L162
2522:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     /* error or closed by other side? */
 2145              		.loc 1 2522 38 discriminator 1 view .LVU622
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 96


 2146 0016 48B1     		cbz	r0, .L162
2544:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2147              		.loc 1 2544 5 is_stmt 1 view .LVU623
 2148 0018 3189     		ldrh	r1, [r6, #8]
 2149              	.LVL235:
2544:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2150              		.loc 1 2544 5 is_stmt 0 view .LVU624
 2151 001a 2846     		mov	r0, r5
 2152              	.LVL236:
2544:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2153              		.loc 1 2544 5 view .LVU625
 2154 001c FFF7FEFF 		bl	tcp_recved
 2155              	.LVL237:
2562:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err_t parsed = http_parse_request(p, hs, pcb);
 2156              		.loc 1 2562 5 is_stmt 1 view .LVU626
2562:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err_t parsed = http_parse_request(p, hs, pcb);
 2157              		.loc 1 2562 11 is_stmt 0 view .LVU627
 2158 0020 6369     		ldr	r3, [r4, #20]
2562:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       err_t parsed = http_parse_request(p, hs, pcb);
 2159              		.loc 1 2562 8 view .LVU628
 2160 0022 8BB1     		cbz	r3, .L171
2589:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* already sending but still receiving data, we might want to RST here? */
 2161              		.loc 1 2589 70 is_stmt 1 view .LVU629
2591:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 2162              		.loc 1 2591 7 view .LVU630
 2163 0024 3046     		mov	r0, r6
 2164 0026 FFF7FEFF 		bl	pbuf_free
 2165              	.LVL238:
 2166 002a 0BE0     		b	.L165
 2167              	.LVL239:
 2168              	.L162:
2524:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* Inform TCP that we have taken the data. */
 2169              		.loc 1 2524 5 view .LVU631
2524:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* Inform TCP that we have taken the data. */
 2170              		.loc 1 2524 8 is_stmt 0 view .LVU632
 2171 002c 36B1     		cbz	r6, .L164
2526:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pbuf_free(p);
 2172              		.loc 1 2526 7 is_stmt 1 view .LVU633
 2173 002e 3189     		ldrh	r1, [r6, #8]
 2174              	.LVL240:
2526:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pbuf_free(p);
 2175              		.loc 1 2526 7 is_stmt 0 view .LVU634
 2176 0030 2846     		mov	r0, r5
 2177              	.LVL241:
2526:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       pbuf_free(p);
 2178              		.loc 1 2526 7 view .LVU635
 2179 0032 FFF7FEFF 		bl	tcp_recved
 2180              	.LVL242:
2527:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
 2181              		.loc 1 2527 7 is_stmt 1 view .LVU636
 2182 0036 3046     		mov	r0, r6
 2183 0038 FFF7FEFF 		bl	pbuf_free
 2184              	.LVL243:
 2185              	.L164:
2529:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       /* this should not happen, only to be robust */
 2186              		.loc 1 2529 5 view .LVU637
2531:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 97


 2187              		.loc 1 2531 74 view .LVU638
2533:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_OK;
 2188              		.loc 1 2533 5 view .LVU639
 2189 003c 2146     		mov	r1, r4
 2190 003e 2846     		mov	r0, r5
 2191 0040 FFF7FEFF 		bl	http_close_conn
 2192              	.LVL244:
2534:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2193              		.loc 1 2534 5 view .LVU640
 2194              	.L165:
2595:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2195              		.loc 1 2595 1 is_stmt 0 view .LVU641
 2196 0044 0020     		movs	r0, #0
 2197 0046 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2198              	.LVL245:
 2199              	.L171:
 2200              	.LBB17:
2563:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_ASSERT("http_parse_request: unexpected return value", parsed == ERR_OK
 2201              		.loc 1 2563 7 is_stmt 1 view .LVU642
2563:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       LWIP_ASSERT("http_parse_request: unexpected return value", parsed == ERR_OK
 2202              		.loc 1 2563 22 is_stmt 0 view .LVU643
 2203 0048 2A46     		mov	r2, r5
 2204 004a 2146     		mov	r1, r4
 2205 004c 3046     		mov	r0, r6
 2206 004e FFF7FEFF 		bl	http_parse_request
 2207              	.LVL246:
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
 2208              		.loc 1 2564 7 is_stmt 1 view .LVU644
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
 2209              		.loc 1 2564 7 view .LVU645
 2210 0052 0746     		mov	r7, r0
 2211 0054 431D     		adds	r3, r0, #5
 2212 0056 18BF     		it	ne
 2213 0058 0123     		movne	r3, #1
 2214 005a 0028     		cmp	r0, #0
 2215 005c 08BF     		it	eq
 2216 005e 0023     		moveq	r3, #0
 2217 0060 3BB1     		cbz	r3, .L167
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
 2218              		.loc 1 2564 7 is_stmt 0 discriminator 1 view .LVU646
 2219 0062 10F10803 		adds	r3, r0, #8
 2220 0066 18BF     		it	ne
 2221 0068 0123     		movne	r3, #1
 2222 006a 10F1100F 		cmn	r0, #16
 2223 006e 00D0     		beq	.L167
 2224 0070 A3B9     		cbnz	r3, .L172
 2225              	.LVL247:
 2226              	.L167:
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
 2227              		.loc 1 2564 7 is_stmt 1 discriminator 5 view .LVU647
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
 2228              		.loc 1 2564 7 discriminator 5 view .LVU648
2567:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* request fully parsed or error */
 2229              		.loc 1 2567 7 discriminator 5 view .LVU649
2567:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* request fully parsed or error */
 2230              		.loc 1 2567 10 is_stmt 0 discriminator 5 view .LVU650
 2231 0072 17F1050F 		cmn	r7, #5
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 98


 2232 0076 05D0     		beq	.L168
2569:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           pbuf_free(hs->req);
 2233              		.loc 1 2569 9 is_stmt 1 view .LVU651
2569:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           pbuf_free(hs->req);
 2234              		.loc 1 2569 15 is_stmt 0 view .LVU652
 2235 0078 206A     		ldr	r0, [r4, #32]
2569:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           pbuf_free(hs->req);
 2236              		.loc 1 2569 12 view .LVU653
 2237 007a 18B1     		cbz	r0, .L168
2570:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           hs->req = NULL;
 2238              		.loc 1 2570 11 is_stmt 1 view .LVU654
 2239 007c FFF7FEFF 		bl	pbuf_free
 2240              	.LVL248:
2571:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
 2241              		.loc 1 2571 11 view .LVU655
2571:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
 2242              		.loc 1 2571 19 is_stmt 0 view .LVU656
 2243 0080 0023     		movs	r3, #0
 2244 0082 2362     		str	r3, [r4, #32]
 2245              	.L168:
2575:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       if (parsed == ERR_OK) {
 2246              		.loc 1 2575 7 is_stmt 1 view .LVU657
 2247 0084 3046     		mov	r0, r6
 2248 0086 FFF7FEFF 		bl	pbuf_free
 2249              	.LVL249:
2576:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 2250              		.loc 1 2576 7 view .LVU658
2576:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SUPPORT_POST
 2251              		.loc 1 2576 10 is_stmt 0 view .LVU659
 2252 008a 7FB1     		cbz	r7, .L173
2584:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* @todo: close on ERR_USE? */
 2253              		.loc 1 2584 14 is_stmt 1 view .LVU660
2584:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         /* @todo: close on ERR_USE? */
 2254              		.loc 1 2584 17 is_stmt 0 view .LVU661
 2255 008c 17F1100F 		cmn	r7, #16
 2256 0090 D8D1     		bne	.L165
2586:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****       }
 2257              		.loc 1 2586 9 is_stmt 1 view .LVU662
 2258 0092 2146     		mov	r1, r4
 2259 0094 2846     		mov	r0, r5
 2260 0096 FFF7FEFF 		bl	http_close_conn
 2261              	.LVL250:
 2262 009a D3E7     		b	.L165
 2263              	.LVL251:
 2264              	.L172:
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
 2265              		.loc 1 2564 7 discriminator 3 view .LVU663
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
 2266              		.loc 1 2564 7 discriminator 3 view .LVU664
 2267 009c 064B     		ldr	r3, .L174
 2268 009e 40F60422 		movw	r2, #2564
 2269 00a2 0649     		ldr	r1, .L174+4
 2270 00a4 0648     		ldr	r0, .L174+8
 2271              	.LVL252:
2564:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****                   || parsed == ERR_INPROGRESS || parsed == ERR_ARG || parsed == ERR_USE);
 2272              		.loc 1 2564 7 is_stmt 0 discriminator 3 view .LVU665
 2273 00a6 FFF7FEFF 		bl	printf
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 99


 2274              	.LVL253:
 2275 00aa E2E7     		b	.L167
 2276              	.L173:
2581:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****           http_send(pcb, hs);
 2277              		.loc 1 2581 125 is_stmt 1 view .LVU666
2582:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****         }
 2278              		.loc 1 2582 11 view .LVU667
 2279 00ac 2146     		mov	r1, r4
 2280 00ae 2846     		mov	r0, r5
 2281 00b0 FFF7FEFF 		bl	http_send
 2282              	.LVL254:
 2283 00b4 C6E7     		b	.L165
 2284              	.L175:
 2285 00b6 00BF     		.align	2
 2286              	.L174:
 2287 00b8 00000000 		.word	.LC0
 2288 00bc 00000000 		.word	.LC18
 2289 00c0 50000000 		.word	.LC2
 2290              	.LBE17:
 2291              		.cfi_endproc
 2292              	.LFE43:
 2294              		.section	.text.http_state_init,"ax",%progbits
 2295              		.align	1
 2296              		.syntax unified
 2297              		.thumb
 2298              		.thumb_func
 2299              		.fpu fpv5-sp-d16
 2301              	http_state_init:
 2302              	.LVL255:
 2303              	.LFB25:
 447:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Initialize the structure. */
 2304              		.loc 1 447 1 view -0
 2305              		.cfi_startproc
 2306              		@ args = 0, pretend = 0, frame = 0
 2307              		@ frame_needed = 0, uses_anonymous_args = 0
 447:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* Initialize the structure. */
 2308              		.loc 1 447 1 is_stmt 0 view .LVU669
 2309 0000 08B5     		push	{r3, lr}
 2310              	.LCFI28:
 2311              		.cfi_def_cfa_offset 8
 2312              		.cfi_offset 3, -8
 2313              		.cfi_offset 14, -4
 449:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_DYNAMIC_HEADERS
 2314              		.loc 1 449 3 is_stmt 1 view .LVU670
 2315 0002 2C22     		movs	r2, #44
 2316 0004 0021     		movs	r1, #0
 2317 0006 FFF7FEFF 		bl	memset
 2318              	.LVL256:
 454:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2319              		.loc 1 454 1 is_stmt 0 view .LVU671
 2320 000a 08BD     		pop	{r3, pc}
 2321              		.cfi_endproc
 2322              	.LFE25:
 2324              		.section	.text.http_state_alloc,"ax",%progbits
 2325              		.align	1
 2326              		.syntax unified
 2327              		.thumb
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 100


 2328              		.thumb_func
 2329              		.fpu fpv5-sp-d16
 2331              	http_state_alloc:
 2332              	.LFB26:
 459:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *ret = HTTP_ALLOC_HTTP_STATE();
 2333              		.loc 1 459 1 is_stmt 1 view -0
 2334              		.cfi_startproc
 2335              		@ args = 0, pretend = 0, frame = 0
 2336              		@ frame_needed = 0, uses_anonymous_args = 0
 2337 0000 10B5     		push	{r4, lr}
 2338              	.LCFI29:
 2339              		.cfi_def_cfa_offset 8
 2340              		.cfi_offset 4, -8
 2341              		.cfi_offset 14, -4
 460:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED
 2342              		.loc 1 460 3 view .LVU673
 460:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_KILL_OLD_ON_CONNECTIONS_EXCEEDED
 2343              		.loc 1 460 28 is_stmt 0 view .LVU674
 2344 0002 2C20     		movs	r0, #44
 2345 0004 FFF7FEFF 		bl	mem_malloc
 2346              	.LVL257:
 467:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_init(ret);
 2347              		.loc 1 467 3 is_stmt 1 view .LVU675
 467:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_state_init(ret);
 2348              		.loc 1 467 6 is_stmt 0 view .LVU676
 2349 0008 0446     		mov	r4, r0
 2350 000a 08B1     		cbz	r0, .L178
 468:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     http_add_connection(ret);
 2351              		.loc 1 468 5 is_stmt 1 view .LVU677
 2352 000c FFF7FEFF 		bl	http_state_init
 2353              	.LVL258:
 469:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2354              		.loc 1 469 29 view .LVU678
 471:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 2355              		.loc 1 471 3 view .LVU679
 2356              	.L178:
 472:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2357              		.loc 1 472 1 is_stmt 0 view .LVU680
 2358 0010 2046     		mov	r0, r4
 2359 0012 10BD     		pop	{r4, pc}
 472:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2360              		.loc 1 472 1 view .LVU681
 2361              		.cfi_endproc
 2362              	.LFE26:
 2364              		.section	.text.http_accept,"ax",%progbits
 2365              		.align	1
 2366              		.syntax unified
 2367              		.thumb
 2368              		.thumb_func
 2369              		.fpu fpv5-sp-d16
 2371              	http_accept:
 2372              	.LVL259:
 2373              	.LFB44:
2602:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs;
 2374              		.loc 1 2602 1 is_stmt 1 view -0
 2375              		.cfi_startproc
 2376              		@ args = 0, pretend = 0, frame = 0
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 101


 2377              		@ frame_needed = 0, uses_anonymous_args = 0
2602:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct http_state *hs;
 2378              		.loc 1 2602 1 is_stmt 0 view .LVU683
 2379 0000 10B5     		push	{r4, lr}
 2380              	.LCFI30:
 2381              		.cfi_def_cfa_offset 8
 2382              		.cfi_offset 4, -8
 2383              		.cfi_offset 14, -4
2603:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(err);
 2384              		.loc 1 2603 3 is_stmt 1 view .LVU684
2604:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_UNUSED_ARG(arg);
 2385              		.loc 1 2604 3 view .LVU685
2605:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("http_accept %p / %p\n", (void *)pcb, arg));
 2386              		.loc 1 2605 3 view .LVU686
2606:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2387              		.loc 1 2606 72 view .LVU687
2608:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_VAL;
 2388              		.loc 1 2608 3 view .LVU688
2608:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_VAL;
 2389              		.loc 1 2608 31 is_stmt 0 view .LVU689
 2390 0002 0C46     		mov	r4, r1
 2391 0004 B1FA81F1 		clz	r1, r1
 2392              	.LVL260:
2608:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_VAL;
 2393              		.loc 1 2608 31 view .LVU690
 2394 0008 4909     		lsrs	r1, r1, #5
2608:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_VAL;
 2395              		.loc 1 2608 23 view .LVU691
 2396 000a 002A     		cmp	r2, #0
 2397 000c 18BF     		it	ne
 2398 000e 0121     		movne	r1, #1
2608:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     return ERR_VAL;
 2399              		.loc 1 2608 6 view .LVU692
 2400 0010 F1B9     		cbnz	r1, .L183
2613:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2401              		.loc 1 2613 3 is_stmt 1 view .LVU693
 2402 0012 0121     		movs	r1, #1
 2403 0014 2046     		mov	r0, r4
 2404              	.LVL261:
2613:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2405              		.loc 1 2613 3 is_stmt 0 view .LVU694
 2406 0016 FFF7FEFF 		bl	tcp_setprio
 2407              	.LVL262:
2617:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs == NULL) {
 2408              		.loc 1 2617 3 is_stmt 1 view .LVU695
2617:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   if (hs == NULL) {
 2409              		.loc 1 2617 8 is_stmt 0 view .LVU696
 2410 001a FFF7FEFF 		bl	http_state_alloc
 2411              	.LVL263:
2618:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("http_accept: Out of memory, RST\n"));
 2412              		.loc 1 2618 3 is_stmt 1 view .LVU697
2618:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****     LWIP_DEBUGF(HTTPD_DEBUG, ("http_accept: Out of memory, RST\n"));
 2413              		.loc 1 2618 6 is_stmt 0 view .LVU698
 2414 001e 0146     		mov	r1, r0
 2415 0020 C8B1     		cbz	r0, .L184
2622:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2416              		.loc 1 2622 3 is_stmt 1 view .LVU699
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 102


2622:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2417              		.loc 1 2622 11 is_stmt 0 view .LVU700
 2418 0022 C461     		str	r4, [r0, #28]
2626:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2419              		.loc 1 2626 3 is_stmt 1 view .LVU701
 2420 0024 2046     		mov	r0, r4
 2421              	.LVL264:
2626:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2422              		.loc 1 2626 3 is_stmt 0 view .LVU702
 2423 0026 FFF7FEFF 		bl	tcp_arg
 2424              	.LVL265:
2629:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_err(pcb, http_err);
 2425              		.loc 1 2629 3 is_stmt 1 view .LVU703
 2426 002a 0C49     		ldr	r1, .L186
 2427 002c 2046     		mov	r0, r4
 2428 002e FFF7FEFF 		bl	tcp_recv
 2429              	.LVL266:
2630:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_poll(pcb, http_poll, HTTPD_POLL_INTERVAL);
 2430              		.loc 1 2630 3 view .LVU704
 2431 0032 0B49     		ldr	r1, .L186+4
 2432 0034 2046     		mov	r0, r4
 2433 0036 FFF7FEFF 		bl	tcp_err
 2434              	.LVL267:
2631:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   altcp_sent(pcb, http_sent);
 2435              		.loc 1 2631 3 view .LVU705
 2436 003a 0422     		movs	r2, #4
 2437 003c 0949     		ldr	r1, .L186+8
 2438 003e 2046     		mov	r0, r4
 2439 0040 FFF7FEFF 		bl	tcp_poll
 2440              	.LVL268:
2632:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2441              		.loc 1 2632 3 view .LVU706
 2442 0044 0849     		ldr	r1, .L186+12
 2443 0046 2046     		mov	r0, r4
 2444 0048 FFF7FEFF 		bl	tcp_sent
 2445              	.LVL269:
2634:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 2446              		.loc 1 2634 3 view .LVU707
2634:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 2447              		.loc 1 2634 10 is_stmt 0 view .LVU708
 2448 004c 0020     		movs	r0, #0
 2449              	.L182:
2635:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
 2450              		.loc 1 2635 1 view .LVU709
 2451 004e 10BD     		pop	{r4, pc}
 2452              	.LVL270:
 2453              	.L183:
2609:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2454              		.loc 1 2609 12 view .LVU710
 2455 0050 6FF00500 		mvn	r0, #5
 2456              	.LVL271:
2609:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2457              		.loc 1 2609 12 view .LVU711
 2458 0054 FBE7     		b	.L182
 2459              	.LVL272:
 2460              	.L184:
2620:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 103


 2461              		.loc 1 2620 12 view .LVU712
 2462 0056 4FF0FF30 		mov	r0, #-1
 2463              	.LVL273:
2620:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   }
 2464              		.loc 1 2620 12 view .LVU713
 2465 005a F8E7     		b	.L182
 2466              	.L187:
 2467              		.align	2
 2468              	.L186:
 2469 005c 00000000 		.word	http_recv
 2470 0060 00000000 		.word	http_err
 2471 0064 00000000 		.word	http_poll
 2472 0068 00000000 		.word	http_sent
 2473              		.cfi_endproc
 2474              	.LFE44:
 2476              		.section	.rodata.httpd_init.str1.4,"aMS",%progbits,1
 2477              		.align	2
 2478              	.LC19:
 2479 0000 68747470 		.ascii	"httpd_init: tcp_new failed\000"
 2479      645F696E 
 2479      69743A20 
 2479      7463705F 
 2479      6E657720 
 2480              		.section	.text.httpd_init,"ax",%progbits
 2481              		.align	1
 2482              		.global	httpd_init
 2483              		.syntax unified
 2484              		.thumb
 2485              		.thumb_func
 2486              		.fpu fpv5-sp-d16
 2488              	httpd_init:
 2489              	.LFB46:
2653:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2654:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** /**
2655:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * @ingroup httpd
2656:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  * Initialize the httpd: set up a listening PCB and bind it to the defined port
2657:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****  */
2658:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** void
2659:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** httpd_init(void)
2660:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** {
 2490              		.loc 1 2660 1 is_stmt 1 view -0
 2491              		.cfi_startproc
 2492              		@ args = 0, pretend = 0, frame = 0
 2493              		@ frame_needed = 0, uses_anonymous_args = 0
 2494 0000 10B5     		push	{r4, lr}
 2495              	.LCFI31:
 2496              		.cfi_def_cfa_offset 8
 2497              		.cfi_offset 4, -8
 2498              		.cfi_offset 14, -4
2661:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   struct altcp_pcb *pcb;
 2499              		.loc 1 2661 3 view .LVU715
2662:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2663:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if HTTPD_USE_MEM_POOL
2664:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_MEMPOOL_INIT(HTTPD_STATE);
2665:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #if LWIP_HTTPD_SSI
2666:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_MEMPOOL_INIT(HTTPD_SSI_STATE);
2667:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 104


2668:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** #endif
2669:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_DEBUGF(HTTPD_DEBUG, ("httpd_init\n"));
 2500              		.loc 1 2669 45 view .LVU716
2670:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2671:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   /* LWIP_ASSERT_CORE_LOCKED(); is checked by tcp_new() */
2672:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** 
2673:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   pcb = altcp_tcp_new_ip_type(IPADDR_TYPE_ANY);
 2501              		.loc 1 2673 3 view .LVU717
 2502              		.loc 1 2673 9 is_stmt 0 view .LVU718
 2503 0002 2E20     		movs	r0, #46
 2504 0004 FFF7FEFF 		bl	tcp_new_ip_type
 2505              	.LVL274:
2674:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("httpd_init: tcp_new failed", pcb != NULL);
 2506              		.loc 1 2674 3 is_stmt 1 view .LVU719
 2507              		.loc 1 2674 3 view .LVU720
 2508 0008 0446     		mov	r4, r0
 2509 000a 20B1     		cbz	r0, .L191
 2510              	.LVL275:
 2511              	.L189:
 2512              		.loc 1 2674 3 discriminator 3 view .LVU721
 2513              		.loc 1 2674 3 discriminator 3 view .LVU722
2675:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   httpd_init_pcb(pcb, HTTPD_SERVER_PORT);
 2514              		.loc 1 2675 3 discriminator 3 view .LVU723
 2515 000c 5021     		movs	r1, #80
 2516 000e 2046     		mov	r0, r4
 2517 0010 FFF7FEFF 		bl	httpd_init_pcb
 2518              	.LVL276:
2676:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c **** }
 2519              		.loc 1 2676 1 is_stmt 0 discriminator 3 view .LVU724
 2520 0014 10BD     		pop	{r4, pc}
 2521              	.LVL277:
 2522              	.L191:
2674:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("httpd_init: tcp_new failed", pcb != NULL);
 2523              		.loc 1 2674 3 is_stmt 1 discriminator 1 view .LVU725
2674:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("httpd_init: tcp_new failed", pcb != NULL);
 2524              		.loc 1 2674 3 discriminator 1 view .LVU726
 2525 0016 044B     		ldr	r3, .L192
 2526 0018 40F67222 		movw	r2, #2674
 2527 001c 0349     		ldr	r1, .L192+4
 2528 001e 0448     		ldr	r0, .L192+8
 2529              	.LVL278:
2674:Middlewares/Third_Party/LwIP/src/apps/http/httpd.c ****   LWIP_ASSERT("httpd_init: tcp_new failed", pcb != NULL);
 2530              		.loc 1 2674 3 is_stmt 0 discriminator 1 view .LVU727
 2531 0020 FFF7FEFF 		bl	printf
 2532              	.LVL279:
 2533 0024 F2E7     		b	.L189
 2534              	.L193:
 2535 0026 00BF     		.align	2
 2536              	.L192:
 2537 0028 00000000 		.word	.LC0
 2538 002c 00000000 		.word	.LC19
 2539 0030 50000000 		.word	.LC2
 2540              		.cfi_endproc
 2541              	.LFE46:
 2543              		.section	.rodata.str1.4,"aMS",%progbits,1
 2544              		.align	2
 2545              	.LC20:
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 105


 2546 0000 2F696E64 		.ascii	"/index.shtml\000"
 2546      65782E73 
 2546      68746D6C 
 2546      00
 2547 000d 000000   		.align	2
 2548              	.LC21:
 2549 0010 2F696E64 		.ascii	"/index.ssi\000"
 2549      65782E73 
 2549      736900
 2550 001b 00       		.align	2
 2551              	.LC22:
 2552 001c 2F696E64 		.ascii	"/index.shtm\000"
 2552      65782E73 
 2552      68746D00 
 2553              		.align	2
 2554              	.LC23:
 2555 0028 2F696E64 		.ascii	"/index.html\000"
 2555      65782E68 
 2555      746D6C00 
 2556              		.align	2
 2557              	.LC24:
 2558 0034 2F696E64 		.ascii	"/index.htm\000"
 2558      65782E68 
 2558      746D00
 2559              		.section	.bss.http_uri_buf,"aw",%nobits
 2560              		.align	2
 2561              		.set	.LANCHOR0,. + 0
 2564              	http_uri_buf:
 2565 0000 00000000 		.space	64
 2565      00000000 
 2565      00000000 
 2565      00000000 
 2565      00000000 
 2566              		.section	.bss.httpd_req_buf,"aw",%nobits
 2567              		.align	2
 2568              		.set	.LANCHOR2,. + 0
 2571              	httpd_req_buf:
 2572 0000 00000000 		.space	1024
 2572      00000000 
 2572      00000000 
 2572      00000000 
 2572      00000000 
 2573              		.section	.rodata.httpd_default_filenames,"a"
 2574              		.align	2
 2575              		.set	.LANCHOR1,. + 0
 2578              	httpd_default_filenames:
 2579 0000 00000000 		.word	.LC20
 2580 0004 01       		.byte	1
 2581 0005 000000   		.space	3
 2582 0008 10000000 		.word	.LC21
 2583 000c 01       		.byte	1
 2584 000d 000000   		.space	3
 2585 0010 1C000000 		.word	.LC22
 2586 0014 01       		.byte	1
 2587 0015 000000   		.space	3
 2588 0018 28000000 		.word	.LC23
 2589 001c 00       		.byte	0
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 106


 2590 001d 000000   		.space	3
 2591 0020 34000000 		.word	.LC24
 2592 0024 00       		.byte	0
 2593 0025 000000   		.space	3
 2594              		.text
 2595              	.Letext0:
 2596              		.file 2 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\std
 2597              		.file 3 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\machine\\_default_ty
 2598              		.file 4 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 2599              		.file 5 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 2600              		.file 6 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 2601              		.file 7 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\stdlib.h"
 2602              		.file 8 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 2603              		.file 9 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\time.h"
 2604              		.file 10 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 2605              		.file 11 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\ctype.h"
 2606              		.file 12 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 2607              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 2608              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 2609              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 2610              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/apps/fs.h"
 2611              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpbase.h"
 2612              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/iana.h"
 2613              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 2614              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 2615              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 2616              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 2617              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 2618              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 2619              		.file 25 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\stdio.h"
 2620              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/def.h"
 2621              		.file 27 "d:\\dev\\gcc-arm-none-eabi\\9_2019_q4-major\\arm-none-eabi\\include\\string.h"
 2622              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/mem.h"
 2623              		.file 29 "<built-in>"
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 107


DEFINED SYMBOLS
                            *ABS*:00000000 httpd.c
D:\Dev\msys64\tmp\ccDnylMb.s:18     .rodata.httpd_init_pcb.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:31     .text.httpd_init_pcb:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:38     .text.httpd_init_pcb:00000000 httpd_init_pcb
D:\Dev\msys64\tmp\ccDnylMb.s:141    .text.httpd_init_pcb:00000054 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2371   .text.http_accept:00000000 http_accept
D:\Dev\msys64\tmp\ccDnylMb.s:151    .rodata.http_write.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:155    .text.http_write:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:161    .text.http_write:00000000 http_write
D:\Dev\msys64\tmp\ccDnylMb.s:332    .text.http_write:00000094 $d
D:\Dev\msys64\tmp\ccDnylMb.s:339    .text.http_send_data_nonssi:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:345    .text.http_send_data_nonssi:00000000 http_send_data_nonssi
D:\Dev\msys64\tmp\ccDnylMb.s:433    .text.http_state_eof:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:439    .text.http_state_eof:00000000 http_state_eof
D:\Dev\msys64\tmp\ccDnylMb.s:487    .text.http_state_free:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:493    .text.http_state_free:00000000 http_state_free
D:\Dev\msys64\tmp\ccDnylMb.s:532    .text.http_close_or_abort_conn:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:538    .text.http_close_or_abort_conn:00000000 http_close_or_abort_conn
D:\Dev\msys64\tmp\ccDnylMb.s:639    .text.http_close_or_abort_conn:00000060 $d
D:\Dev\msys64\tmp\ccDnylMb.s:996    .text.http_poll:00000000 http_poll
D:\Dev\msys64\tmp\ccDnylMb.s:644    .text.http_close_conn:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:650    .text.http_close_conn:00000000 http_close_conn
D:\Dev\msys64\tmp\ccDnylMb.s:674    .text.http_eof:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:680    .text.http_eof:00000000 http_eof
D:\Dev\msys64\tmp\ccDnylMb.s:702    .rodata.http_check_eof.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:707    .text.http_check_eof:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:713    .text.http_check_eof:00000000 http_check_eof
D:\Dev\msys64\tmp\ccDnylMb.s:792    .text.http_check_eof:0000003c $d
D:\Dev\msys64\tmp\ccDnylMb.s:799    .text.http_send:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:805    .text.http_send:00000000 http_send
D:\Dev\msys64\tmp\ccDnylMb.s:889    .text.http_sent:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:895    .text.http_sent:00000000 http_sent
D:\Dev\msys64\tmp\ccDnylMb.s:948    .text.http_err:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:954    .text.http_err:00000000 http_err
D:\Dev\msys64\tmp\ccDnylMb.s:990    .text.http_poll:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:1092   .rodata.http_init_file.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:1105   .text.http_init_file:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:1111   .text.http_init_file:00000000 http_init_file
D:\Dev\msys64\tmp\ccDnylMb.s:1289   .text.http_init_file:0000009c $d
D:\Dev\msys64\tmp\ccDnylMb.s:1299   .rodata.http_get_404_file.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:1309   .text.http_get_404_file:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:1315   .text.http_get_404_file:00000000 http_get_404_file
D:\Dev\msys64\tmp\ccDnylMb.s:1398   .text.http_get_404_file:00000038 $d
D:\Dev\msys64\tmp\ccDnylMb.s:1405   .text.http_find_file:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:1411   .text.http_find_file:00000000 http_find_file
D:\Dev\msys64\tmp\ccDnylMb.s:1718   .text.http_find_file:00000110 $d
D:\Dev\msys64\tmp\ccDnylMb.s:1724   .rodata.http_parse_request.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:1740   .text.http_parse_request:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:1746   .text.http_parse_request:00000000 http_parse_request
D:\Dev\msys64\tmp\ccDnylMb.s:2087   .text.http_parse_request:00000140 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2100   .rodata.http_recv.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2104   .text.http_recv:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:2110   .text.http_recv:00000000 http_recv
D:\Dev\msys64\tmp\ccDnylMb.s:2287   .text.http_recv:000000b8 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2295   .text.http_state_init:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:2301   .text.http_state_init:00000000 http_state_init
ARM GAS  D:\Dev\msys64\tmp\ccDnylMb.s 			page 108


D:\Dev\msys64\tmp\ccDnylMb.s:2325   .text.http_state_alloc:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:2331   .text.http_state_alloc:00000000 http_state_alloc
D:\Dev\msys64\tmp\ccDnylMb.s:2365   .text.http_accept:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:2469   .text.http_accept:0000005c $d
D:\Dev\msys64\tmp\ccDnylMb.s:2477   .rodata.httpd_init.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2481   .text.httpd_init:00000000 $t
D:\Dev\msys64\tmp\ccDnylMb.s:2488   .text.httpd_init:00000000 httpd_init
D:\Dev\msys64\tmp\ccDnylMb.s:2537   .text.httpd_init:00000028 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2544   .rodata.str1.4:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2560   .bss.http_uri_buf:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2564   .bss.http_uri_buf:00000000 http_uri_buf
D:\Dev\msys64\tmp\ccDnylMb.s:2567   .bss.httpd_req_buf:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2571   .bss.httpd_req_buf:00000000 httpd_req_buf
D:\Dev\msys64\tmp\ccDnylMb.s:2574   .rodata.httpd_default_filenames:00000000 $d
D:\Dev\msys64\tmp\ccDnylMb.s:2578   .rodata.httpd_default_filenames:00000000 httpd_default_filenames

UNDEFINED SYMBOLS
tcp_setprio
tcp_bind
tcp_listen_with_backlog
tcp_accept
printf
ip_addr_any
tcp_write
fs_close
pbuf_free
mem_free
tcp_arg
tcp_recv
tcp_err
tcp_poll
tcp_sent
tcp_close
tcp_abort
fs_bytes_left
tcp_output
lwip_strnstr
fs_open
strlen
strchr
memcpy
pbuf_cat
pbuf_ref
pbuf_copy_partial
strncmp
pbuf_clen
tcp_recved
memset
mem_malloc
tcp_new_ip_type
